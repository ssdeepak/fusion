import{a as qi}from"./chunk-4OGH6Q66.js";import{i as Br,j as $r,k as Lr,l as Wr}from"./chunk-6D2PQ4BF.js";import{b as Ir,e as $,f as K}from"./chunk-STP3VB3D.js";import{c as ue,d as ae,e as zi,f as Kr,g as U,k as be,l as oe,m as Qe,n as je,o as Ue,p as Ge,q as Ye,r as st,s as lt,t as Ci,u as wi,v as Si,w as ki,x as fe,y as te}from"./chunk-TL3SOKZG.js";import{a as le,c as ce,h as pe,j as Dr,o as ee,p as ne}from"./chunk-2UOGX6KS.js";import{$a as Z,Ab as Oi,Bb as Fr,Cb as Mr,Db as at,Eb as ot,Ia as R,L as Se,Na as O,Oa as P,Pa as w,Pb as me,Qa as j,Ra as S,Rb as un,Sa as Er,Ua as N,V as H,Va as b,Wa as Zi,Xa as T,Ya as E,Za as p,_a as d,aa as Re,ab as ji,ba as _,bb as Ui,ca as h,cb as g,cc as Ri,da as G,db as v,dc as yt,ea as Xi,eb as s,ec as Di,fb as Ji,fc as Li,gb as Qi,gc as Ii,hb as br,hc as J,ib as Vr,ja as Ae,jb as en,ka as L,kb as tn,lb as nn,mb as x,na as Q,nb as q,oa as kr,ob as V,pb as xe,qb as Pr,rb as F,sb as M,tb as D,ub as Ce,vb as ge,wa as Tr,wb as re,xb as ie,ya as m,yb as X,za as I}from"./chunk-XIWENJHJ.js";import{i as W}from"./chunk-BL3FZZIZ.js";var Ke=class r extends U{constructor(){super(),this.key="",this.params=[],this.returns=[],this.body=[],this.tokenType=ue.AGENT,this.builderType="AgentStatement",this.shapeType="Polygon",this.needsEnd=!0,this.nexts=["PARAM","RETURN","DO","FOR","FOREACH","WHILE","ASSIGN","CALL","REM","DECLARE","IN","OUT","PICK","IF","SWITCH","INVOKE","PROMPT","HISTORY","BRANCH","EVENT","DISPATCH","LINE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.params,i=o.returns,n=o.body,a=new oe;a.heading=`${o.key}Params`,e.groups.push(a);let c=new oe;c.heading=`${o.key}Returns`,e.groups.push(c);let l=new oe;if(l.heading=`${o.key}Body`,e.groups.push(l),t.length>0)for(let u=0;u<t.length;u++){let f=t[u];f.createBranches(),a.groups.push(...f.groups)}else e.groups=e.groups.filter(u=>u!==a);if(i.length>0)for(let u=0;u<i.length;u++){let f=i[u];f.createBranches(),c.groups.push(...f.groups)}else e.groups=e.groups.filter(u=>u!==c);if(n.length>0)for(let u=0;u<n.length;u++){let f=n[u];f.createBranches(),l.groups.push(...f.groups),f.groups.length>0?l.heading=f.groups[0].heading:e.groups=e.groups.filter(C=>C!==l)}else e.groups=e.groups.filter(u=>u!==l);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.params),o.push(...this.returns),o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="ParamStatement"?this.getChildren().find(i=>i.id===o.id)?!1:(o.parent=this,this.params.push(o),!0):o.builderType==="ReturnStatement"?this.getChildren().find(i=>i.id===o.id)?!1:(o.parent=this,this.returns.push(o),!0):!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return e.builderType==="ParamStatement"?this.getChildren().find(a=>a.id===e.id)?t=this.addChild(e):(e.parent=this,this.params.splice(o,0,e),t=!0):e.builderType==="ReturnStatement"&&(this.getChildren().find(a=>a.id===e.id)?t=this.addChild(e):(e.parent=this,this.returns.splice(o,0,e),t=!0)),this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.params=[],this.returns=[],this.body=[],!0}removeChild(o){if(o.builderType==="ParamStatement"){let t=this.getChildren().indexOf(o);if(t>-1)return this.params.splice(t,1),!0}if(o.builderType==="ReturnStatement"){let t=this.getChildren().indexOf(o);if(t>-1)return this.returns.splice(t,1),!0}let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var He=class r extends U{constructor(){super(),this.key="",this.agents=[],this.tokenType=ue.PLAN,this.builderType="PlanStatement",this.shapeType="Diamond",this.needsEnd=!0,this.nexts=["AGENT"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.agents,i=new oe;if(i.heading=`${o.key}Agents`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.agents);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="AgentStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.agents.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="AgentStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.agents.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.agents=[],!0}removeChild(o){if(o.builderType==="AgentStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.agents.splice(e,1),!0}return!1}};var De=class r extends U{constructor(){super(),this.key="",this.type="NotSet",this.foreignType="",this.expression="",this.tokenType=ue.DECLARE,this.builderType="DeclareStatement",this.shapeType="Rectangle",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"],this.enumValues.set("Type",["GUID","AUTO","STRING","NUM","BOOL","ENUM","IMAGE","DATE","COLOR","EMAIL","PASSWORD","TEL","URL","WEEK","TIME","OBJECT","OBJECTS","ONE","MANY","COMPUTED"])}first(){return this.key}second(){return this.type}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.type=o.type,this.foreignType=o.foreignType,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Type"&&t.value&&(this.type=t.value),t.key==="ForeignType"&&t.value&&(this.foreignType=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Type",this.type,"StringEnum","LineTwoA")),o.push(new ae("ForeignType",this.foreignType,"StringType","LineTwoB")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var Ti=class r extends U{constructor(){super(),this.key="",this.parameters=[],this.assignType="NotSet",this.expression="Sunny",this.tokenType=ue.ASSIGN,this.builderType="AssignStatement",this.shapeType="Rectangle",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"],this.enumValues.set("AssignType",["DEFAULT","APPEND","UPDATE"])}first(){return this.key}second(){return this.parameters.join(",")}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.parameters=o.parameters,this.assignType=o.assignType,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.value?this.parameters=t.value.split(","):this.parameters=[],t.key==="AssignType"&&t.value&&(this.assignType=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key,"ParentKey","LineOneA")),o.push(new ae("Parameters",this.parameters.join(","),"Keys","LineTwoA")),o.push(new ae("AssignType",this.assignType,"StringEnum","LineThreeA")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var Ei=class r extends U{constructor(){super(),this.key="",this.label="Your Weather",this.tokenType=ue.IN,this.builderType="InStatement",this.shapeType="Parallelogram",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"]}first(){return this.key}second(){return this.label}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.label=o.label)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Label"&&t.value&&(this.label=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key,"ParentKey","LineOneA")),o.push(new ae("Label",this.label,"StringType","LineOneB")),o}};var ve=class r extends U{constructor(){super(),this.key="",this.subs=[],this.tokenType=ue.PICK,this.builderType="PickStatement",this.shapeType="Parallelogram",this.needsEnd=!0,this.nexts=["SUB"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.subs,i=new oe;if(i.heading=`${o.key}Subs`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.subs);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="SubStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.subs.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="SubStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.subs.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.subs=[],!0}removeChild(o){if(o.builderType==="SubStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.subs.splice(e,1),!0}return!1}};var ye=class r extends U{constructor(){super(),this.key="",this.childs=[],this.tokenType=ue.SUB,this.builderType="SubStatement",this.shapeType="Circle",this.needsEnd=!0,this.nexts=["CHILD"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.childs,i=new oe;if(i.heading=`${o.key}Childs`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.childs);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="ChildStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.childs.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="ChildStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.childs.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.childs=[],!0}removeChild(o){if(o.builderType==="ChildStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.childs.splice(e,1),!0}return!1}};var bi=class r extends U{constructor(){super(),this.key="",this.infants=[],this.tokenType=ue.CHILD,this.builderType="ChildStatement",this.shapeType="Circle",this.needsEnd=!0,this.nexts=["INFANT"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.infants,i=new oe;if(i.heading=`${o.key}Infants`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.infants);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="InfantStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.infants.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="InfantStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.infants.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.infants=[],!0}removeChild(o){if(o.builderType==="InfantStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.infants.splice(e,1),!0}return!1}};var Vi=class r extends U{constructor(){super(),this.key="",this.tokenType=ue.INFANT,this.builderType="InfantStatement",this.shapeType="Circle"}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}};var Pi=class r extends U{constructor(){super(),this.key="",this.parameters=[],this.outType="NotSet",this.expression="",this.tokenType=ue.OUT,this.builderType="OutStatement",this.shapeType="Parallelogram",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"],this.enumValues.set("OutType",["TEXT","HTML","SVG","AST","IMAGE","VIDEO","AUDIO"])}first(){return this.key}second(){return this.parameters.join(",")}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.parameters=o.parameters,this.outType=o.outType,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.value?this.parameters=t.value.split(","):this.parameters=[],t.key==="OutType"&&t.value&&(this.outType=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key,"ParentKey","LineOneA")),o.push(new ae("Parameters",this.parameters.join(","),"Keys","LineTwoA")),o.push(new ae("OutType",this.outType,"StringEnum","LineThreeA")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var Fi=class r extends U{constructor(){super(),this.expression="",this.tokenType=ue.REM,this.builderType="RemStatement",this.shapeType="Rectangle",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"]}first(){return this.expression}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.expression,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var vt=class r extends U{constructor(){super(),this.key="",this.toKey="",this.parameters=[],this.body=[],this.agentType="NotSet",this.tokenType=ue.CALL,this.builderType="CallStatement",this.shapeType="Rectangle",this.needsEnd=!0,this.nexts=["AWAIT"],this.enumValues.set("AgentType",["UserDefined","Prebuilt"])}first(){return this.key}second(){return this.toKey}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.key}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.toKey=o.toKey,this.parameters=o.parameters,this.agentType=o.agentType)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="ToKey"&&t.value&&(this.toKey=t.value),t.value?this.parameters=t.value.split(","):this.parameters=[],t.key==="AgentType"&&t.value&&(this.agentType=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key,"ParentKey","LineOneA")),o.push(new ae("ToKey",this.toKey," NextKey "," LineOneB ")),o.push(new ae("Parameters",this.parameters.join(","),"Keys","LineTwoA")),o.push(new ae("AgentType",this.agentType,"StringEnum","")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Xe=class r extends U{constructor(){super(),this.key="",this.expression="",this.lines=[],this.tokenType=ue.PROMPT,this.builderType="PromptStatement",this.shapeType="Trapezoid",this.needsEnd=!0,this.nexts=["LINE"]}first(){return this.key}second(){return this.expression}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.lines,i=new oe;if(i.heading=`${o.key}Lines`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}getChildren(){let o=new Array;o.push(...this.lines);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="LineStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.lines.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="LineStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.lines.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.lines=[],!0}removeChild(o){if(o.builderType==="LineStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.lines.splice(e,1),!0}return!1}};var ze=class r extends U{constructor(){super(),this.role="NotSet",this.declares=[],this.expression="",this.score="NotSet",this.tokenType=ue.LINE,this.builderType="LineStatement",this.shapeType="Rectangle",this.enumValues.set("Role",["system","user","assistant"]),this.enumValues.set("Score",["notscored","good","average","bad"])}first(){return this.role}second(){return this.declares.join(",")}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.role,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.role=o.role,this.declares=o.declares,this.expression=o.expression,this.score=o.score)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Role"&&t.value&&(this.role=t.value),t.value?this.declares=t.value.split(","):this.declares=[],t.key==="Expression"&&t.value&&(this.expression=t.value),t.key==="Score"&&t.value&&(this.score=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Role",this.role,"StringEnum","LineOneA")),o.push(new ae("Declares",this.declares.join(","),"Keys","LineOneB")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o.push(new ae("Score",this.score,"StringEnum","LineTwoA")),o}};var xt=class r extends U{constructor(){super(),this.key="",this.apiKey="",this.botType="NotSet",this.outType="NotSet",this.modelName="",this.endPoint="",this.histories=[],this.prompts=[],this.tokenType=ue.INVOKE,this.builderType="InvokeStatement",this.shapeType="Bot",this.enumValues.set("BotType",["OpenAI","Gemini","Claude","Groq","Local"])}first(){return this.key}second(){return this.apiKey}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.apiKey=o.apiKey,this.botType=o.botType,this.outType=o.outType,this.modelName=o.modelName,this.endPoint=o.endPoint,this.histories=o.histories,this.prompts=o.prompts)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="ApiKey"&&t.value&&(this.apiKey=t.value),t.key==="BotType"&&t.value&&(this.botType=t.value),t.key==="OutType"&&t.value&&(this.outType=t.value),t.key==="ModelName"&&t.value&&(this.modelName=t.value),t.key==="EndPoint"&&t.value&&(this.endPoint=t.value),t.value?this.histories=t.value.split(","):this.histories=[],t.value?this.prompts=t.value.split(","):this.prompts=[]}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key,"ParentKey","LineOneA")),o.push(new ae("ApiKey",this.apiKey,"StringType","LineOneB")),o.push(new ae("BotType",this.botType,"StringEnum","LineOneC")),o.push(new ae("OutType",this.outType,"StringEnum","LineTwoA")),o.push(new ae("ModelName",this.modelName,"StringType","LineTwoB")),o.push(new ae("EndPoint",this.endPoint,"StringType","LineThreeA")),o.push(new ae("Histories",this.histories.join(","),"Keys","TabA")),o.push(new ae("Prompts",this.prompts.join(","),"Keys","TabA")),o}};var Ne=class r extends U{constructor(){super(),this.key="",this.tables=[],this.enums=[],this.tokenType=ue.SCHEMA,this.builderType="SchemaStatement",this.shapeType="Trapezoid",this.needsEnd=!0,this.nexts=["TABLE","ENUM"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.tables,i=o.enums,n=new oe;n.heading=`${o.key}Tables`,e.groups.push(n);let a=new oe;if(a.heading=`${o.key}Enums`,e.groups.push(a),t.length>0)for(let c=0;c<t.length;c++){let l=t[c];l.createBranches(),n.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==n);if(i.length>0)for(let c=0;c<i.length;c++){let l=i[c];l.createBranches(),a.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==a);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.tables),o.push(...this.enums);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="TableStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.tables.push(o),!0):o.builderType==="EnumStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.enums.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="TableStatement"?this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.tables.splice(o,0,e),t=!0):e.builderType==="EnumStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.enums.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.tables=[],this.enums=[],!0}removeChild(o){if(o.builderType==="TableStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.tables.splice(e,1),!0}if(o.builderType==="EnumStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.enums.splice(e,1),!0}return!1}};var Oe=class r extends U{constructor(){super(),this.key="",this.plural="",this.columns=[],this.tokenType=ue.TABLE,this.builderType="TableStatement",this.shapeType="",this.needsEnd=!0,this.nexts=["COLUMN"]}first(){return this.key}second(){return this.plural}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.columns,i=new oe;if(i.heading=`${o.key}Columns`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.plural=o.plural)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Plural"&&t.value&&(this.plural=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Plural",this.plural,"StringType","LineOneB")),o}getChildren(){let o=new Array;o.push(...this.columns);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="ColumnStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.columns.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="ColumnStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.columns.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.columns=[],!0}removeChild(o){if(o.builderType==="ColumnStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.columns.splice(e,1),!0}return!1}};var qe=class r extends U{constructor(){super(),this.key="",this.type="NotSet",this.annotation="NotSet",this.foreignType="",this.tokenType=ue.COLUMN,this.builderType="ColumnStatement",this.shapeType="",this.enumValues.set("Annotation",["USER_HISTORY","USER_RATING","REQUIRED","UNIQUE","MIN_LENGTH and MAX_LENGTH","RANGE To enforce numerical ranges.","SEARCHABLE","FILTERABLE","USAGE_STATS","TRENDING","USER_FEEDBACK","TRANSLATABLE","CURRENCY","PREDICTION","IMAGE_RECOGNITION","ENCRYPTED","ANONYMIZED","INDEXED","CACHEABLE"])}first(){return this.key}second(){return this.type}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.type=o.type,this.annotation=o.annotation,this.foreignType=o.foreignType)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Type"&&t.value&&(this.type=t.value),t.key==="Annotation"&&t.value&&(this.annotation=t.value),t.key==="ForeignType"&&t.value&&(this.foreignType=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Type",this.type,"StringEnum","LineOneB")),o.push(new ae("Annotation",this.annotation,"StringEnum","")),o.push(new ae("ForeignType",this.foreignType,"ParentKey","LineThreeB")),o}};var ct=class r extends U{constructor(){super(),this.key="",this.values=[],this.tokenType=ue.ENUM,this.builderType="EnumStatement",this.shapeType="",this.needsEnd=!0,this.nexts=["VALUE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.values,i=new oe;if(i.heading=`${o.key}Values`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.values);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="ValueStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.values.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="ValueStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.values.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.values=[],!0}removeChild(o){if(o.builderType==="ValueStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.values.splice(e,1),!0}return!1}};var pt=class r extends U{constructor(){super(),this.key="",this.content="",this.tokenType=ue.VALUE,this.builderType="ValueStatement",this.shapeType=""}first(){return this.key}second(){return this.content}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.content=o.content)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Content"&&t.value&&(this.content=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Content",this.content,"StringType","TabA")),o}};var dt=class r extends U{constructor(){super(),this.key="",this.schemaKey="",this.recordsCount=0,this.records=[],this.tokenType=ue.SEED,this.builderType="SeedStatement",this.shapeType="Trapezoid",this.needsEnd=!0,this.nexts=["RECORD"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.records,i=new oe;if(i.heading=`${o.key}Records`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.schemaKey=o.schemaKey,this.recordsCount=parseInt(o.recordsCount.toString()))}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="SchemaKey"&&t.value&&(this.schemaKey=t.value),t.key==="RecordsCount"&&t.value&&(this.recordsCount=parseInt(t.value))}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("SchemaKey",this.schemaKey,"ParentKey","")),o.push(new ae("RecordsCount",this.recordsCount.toString(),"IntegerType","")),o}getChildren(){let o=new Array;o.push(...this.records);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="RecordStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.records.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="RecordStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.records.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.records=[],!0}removeChild(o){if(o.builderType==="RecordStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.records.splice(e,1),!0}return!1}};var ut=class r extends U{constructor(){super(),this.key="",this.tableKey="",this.fields=[],this.tokenType=ue.RECORD,this.builderType="RecordStatement",this.shapeType="",this.needsEnd=!0,this.nexts=["FIELD"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.fields,i=new oe;if(i.heading=`${o.key}Fields`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.tableKey=o.tableKey)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="TableKey"&&t.value&&(this.tableKey=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("TableKey",this.tableKey,"ParentKey","NoUI")),o}getChildren(){let o=new Array;o.push(...this.fields);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="FieldStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.fields.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="FieldStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.fields.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.fields=[],!0}removeChild(o){if(o.builderType==="FieldStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.fields.splice(e,1),!0}return!1}};var mt=class r extends U{constructor(){super(),this.key="",this.content="",this.type="NotSet",this.foreignType="",this.tokenType=ue.FIELD,this.builderType="FieldStatement",this.shapeType=""}first(){return this.key}second(){return this.content}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.content=o.content,this.type=o.type,this.foreignType=o.foreignType)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Content"&&t.value&&(this.content=t.value),t.key==="Type"&&t.value&&(this.type=t.value),t.key==="ForeignType"&&t.value&&(this.foreignType=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Content",this.content,"StringType","LineOneB")),o.push(new ae("Type",this.type,"StringEnum","LineTwoA")),o.push(new ae("ForeignType",this.foreignType,"StringType","LineThreeA")),o}};var et=class r extends U{constructor(){super(),this.key="",this.schemaKey="",this.routes=[],this.links=[],this.routeHelpers=[],this.tokenType=ue.API,this.builderType="ApiStatement",this.shapeType="Octagon",this.needsEnd=!0,this.nexts=["ROUTE","AGENT"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.routes,i=o.routeHelpers,n=new oe;n.heading=`${o.key}Routes`,e.groups.push(n);let a=new oe;if(a.heading=`${o.key}RouteHelpers`,e.groups.push(a),t.length>0)for(let c=0;c<t.length;c++){let l=t[c];l.createBranches(),n.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==n);if(i.length>0)for(let c=0;c<i.length;c++){let l=i[c];l.createBranches(),a.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==a);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.schemaKey=o.schemaKey,this.links=o.links)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="SchemaKey"&&t.value&&(this.schemaKey=t.value),t.value?this.links=t.value.split(","):this.links=[]}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("SchemaKey",this.schemaKey,"ParentKey","")),o.push(new ae("Links",this.links.join(","),"Keys","")),o}getChildren(){let o=new Array;o.push(...this.routes),o.push(...this.routeHelpers);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="RouteStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.routes.push(o),!0):o.builderType==="AgentStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.routeHelpers.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="RouteStatement"?this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.routes.splice(o,0,e),t=!0):e.builderType==="AgentStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.routeHelpers.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.routes=[],this.routeHelpers=[],!0}removeChild(o){if(o.builderType==="RouteStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.routes.splice(e,1),!0}if(o.builderType==="AgentStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.routeHelpers.splice(e,1),!0}return!1}};var Ze=class r extends U{constructor(){super(),this.key="",this.path="",this.verb="NotSet",this.tableKey="",this.requestKeys=[],this.responseKeys=[],this.payloadKeys=[],this.orderBy=[],this.responseType="NotSet",this.searchRoute="",this.agentRoute=[],this.navRoutes=[],this.filterRoutes=[],this.providerRoutes=[],this.childRoutes=[],this.tokenType=ue.ROUTE,this.builderType="RouteStatement",this.shapeType="",this.enumValues.set("Verb",["FetchMany","FetchManyByFk","KeysProvider","FetchOne","FetchOneFk","Create","CreateByFk","Search","Filter","Agent","Update","UpdateByFk","Delete","DeleteByFk"]),this.enumValues.set("ResponseType",["ObjectType","ObjectTypes","HttpStatusCode"])}first(){return this.key}second(){return this.path}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.path=o.path,this.verb=o.verb,this.tableKey=o.tableKey,this.requestKeys=o.requestKeys,this.responseKeys=o.responseKeys,this.payloadKeys=o.payloadKeys,this.orderBy=o.orderBy,this.responseType=o.responseType,this.searchRoute=o.searchRoute,this.agentRoute=o.agentRoute,this.navRoutes=o.navRoutes,this.filterRoutes=o.filterRoutes,this.providerRoutes=o.providerRoutes,this.childRoutes=o.childRoutes)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Path"&&t.value&&(this.path=t.value),t.key==="Verb"&&t.value&&(this.verb=t.value),t.key==="TableKey"&&t.value&&(this.tableKey=t.value),t.value?this.requestKeys=t.value.split(","):this.requestKeys=[],t.value?this.responseKeys=t.value.split(","):this.responseKeys=[],t.value?this.payloadKeys=t.value.split(","):this.payloadKeys=[],t.value?this.orderBy=t.value.split(","):this.orderBy=[],t.key==="ResponseType"&&t.value&&(this.responseType=t.value),t.key==="SearchRoute"&&t.value&&(this.searchRoute=t.value),t.value?this.agentRoute=t.value.split(","):this.agentRoute=[],t.value?this.navRoutes=t.value.split(","):this.navRoutes=[],t.value?this.filterRoutes=t.value.split(","):this.filterRoutes=[],t.value?this.providerRoutes=t.value.split(","):this.providerRoutes=[],t.value?this.childRoutes=t.value.split(","):this.childRoutes=[]}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Path",this.path,"StringType","LineOneB")),o.push(new ae("Verb",this.verb,"StringEnum","LineTwoB")),o.push(new ae("TableKey",this.tableKey,"ParentKey","")),o.push(new ae("RequestKeys",this.requestKeys.join(","),"Keys","NoUI")),o.push(new ae("ResponseKeys",this.responseKeys.join(","),"Keys","")),o.push(new ae("PayloadKeys",this.payloadKeys.join(","),"Keys","")),o.push(new ae("OrderBy",this.orderBy.join(","),"Keys","I")),o.push(new ae("ResponseType",this.responseType,"StringEnum","LineThreeA")),o.push(new ae("SearchRoute",this.searchRoute,"ParentKey","")),o.push(new ae("AgentRoute",this.agentRoute.join(","),"Keys","")),o.push(new ae("NavRoutes",this.navRoutes.join(","),"Keys","")),o.push(new ae("FilterRoutes",this.filterRoutes.join(","),"Keys","")),o.push(new ae("ProviderRoutes",this.providerRoutes.join(","),"Keys","")),o.push(new ae("ChildRoutes",this.childRoutes.join(","),"Keys","")),o}};var gt=class r extends U{constructor(){super(),this.key="",this.schemaKey="",this.apiKey="",this.pages=[],this.tokenType=ue.DESIGN,this.builderType="DesignStatement",this.shapeType="Tetragram",this.needsEnd=!0,this.nexts=["PAGE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.pages,i=new oe;if(i.heading=`${o.key}Pages`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.schemaKey=o.schemaKey,this.apiKey=o.apiKey)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="SchemaKey"&&t.value&&(this.schemaKey=t.value),t.key==="ApiKey"&&t.value&&(this.apiKey=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("SchemaKey",this.schemaKey,"ParentKey","")),o.push(new ae("ApiKey",this.apiKey,"ParentKey","")),o}getChildren(){let o=new Array;o.push(...this.pages);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="PageStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.pages.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="PageStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.pages.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.pages=[],!0}removeChild(o){if(o.builderType==="PageStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.pages.splice(e,1),!0}return!1}};var rt=class r extends U{constructor(){super(),this.key="",this.pageType="NotSet",this.routeKey="",this.tableKey="",this.displayType="NotSet",this.idKeys=[],this.headerKeys=[],this.imageKeys=[],this.contentKeys=[],this.footerKeys=[],this.pickerKeys=[],this.rangeKeys=[],this.inputKeys=[],this.booleanKeys=[],this.textKeys=[],this.toggleKeys=[],this.selectKeys=[],this.dateKeys=[],this.navPages=[],this.searchPage="",this.filterPages=[],this.providerPages=[],this.components=[],this.agentPages=[],this.tokenType=ue.PAGE,this.builderType="PageStatement",this.shapeType="",this.enumValues.set("PageType",["DetailPage","ListPage","DetailFkPage","MasterDetailPage","MasterDetailFkPage","CreatePage","CreateFkPage","UpdatePage","UpdateFkPage","Components","Pickers","Modals","Filters","AgentPage","SearchPage"]),this.enumValues.set("DisplayType",["Chip","Card","Table","List","Slider"])}first(){return this.key}second(){return this.pageType}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.pageType=o.pageType,this.routeKey=o.routeKey,this.tableKey=o.tableKey,this.displayType=o.displayType,this.idKeys=o.idKeys,this.headerKeys=o.headerKeys,this.imageKeys=o.imageKeys,this.contentKeys=o.contentKeys,this.footerKeys=o.footerKeys,this.pickerKeys=o.pickerKeys,this.rangeKeys=o.rangeKeys,this.inputKeys=o.inputKeys,this.booleanKeys=o.booleanKeys,this.textKeys=o.textKeys,this.toggleKeys=o.toggleKeys,this.selectKeys=o.selectKeys,this.dateKeys=o.dateKeys,this.navPages=o.navPages,this.searchPage=o.searchPage,this.filterPages=o.filterPages,this.providerPages=o.providerPages,this.components=o.components,this.agentPages=o.agentPages)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="PageType"&&t.value&&(this.pageType=t.value),t.key==="RouteKey"&&t.value&&(this.routeKey=t.value),t.key==="TableKey"&&t.value&&(this.tableKey=t.value),t.key==="DisplayType"&&t.value&&(this.displayType=t.value),t.value?this.idKeys=t.value.split(","):this.idKeys=[],t.value?this.headerKeys=t.value.split(","):this.headerKeys=[],t.value?this.imageKeys=t.value.split(","):this.imageKeys=[],t.value?this.contentKeys=t.value.split(","):this.contentKeys=[],t.value?this.footerKeys=t.value.split(","):this.footerKeys=[],t.value?this.pickerKeys=t.value.split(","):this.pickerKeys=[],t.value?this.rangeKeys=t.value.split(","):this.rangeKeys=[],t.value?this.inputKeys=t.value.split(","):this.inputKeys=[],t.value?this.booleanKeys=t.value.split(","):this.booleanKeys=[],t.value?this.textKeys=t.value.split(","):this.textKeys=[],t.value?this.toggleKeys=t.value.split(","):this.toggleKeys=[],t.value?this.selectKeys=t.value.split(","):this.selectKeys=[],t.value?this.dateKeys=t.value.split(","):this.dateKeys=[],t.value?this.navPages=t.value.split(","):this.navPages=[],t.key==="SearchPage"&&t.value&&(this.searchPage=t.value),t.value?this.filterPages=t.value.split(","):this.filterPages=[],t.value?this.providerPages=t.value.split(","):this.providerPages=[],t.value?this.components=t.value.split(","):this.components=[],t.value?this.agentPages=t.value.split(","):this.agentPages=[]}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("PageType",this.pageType,"StringEnum","LineOneB")),o.push(new ae("RouteKey",this.routeKey,"ParentKey","LineTwoB")),o.push(new ae("TableKey",this.tableKey,"ParentKey","LineTwoC")),o.push(new ae("DisplayType",this.displayType,"StringEnum","LineOneB")),o.push(new ae("IdKeys",this.idKeys.join(","),"Keys","NoUI")),o.push(new ae("HeaderKeys",this.headerKeys.join(","),"Keys","NoUI")),o.push(new ae("ImageKeys",this.imageKeys.join(","),"Keys","NoUI")),o.push(new ae("ContentKeys",this.contentKeys.join(","),"Keys","NoUI")),o.push(new ae("FooterKeys",this.footerKeys.join(","),"Keys","NoUI")),o.push(new ae("PickerKeys",this.pickerKeys.join(","),"Keys","NoUI")),o.push(new ae("RangeKeys",this.rangeKeys.join(","),"Keys","NoUI")),o.push(new ae("InputKeys",this.inputKeys.join(","),"Keys","NoUI")),o.push(new ae("BooleanKeys",this.booleanKeys.join(","),"Keys","NoUI")),o.push(new ae("TextKeys",this.textKeys.join(","),"Keys","NoUI")),o.push(new ae("ToggleKeys",this.toggleKeys.join(","),"Keys","NoUI")),o.push(new ae("SelectKeys",this.selectKeys.join(","),"Keys","NoUI")),o.push(new ae("DateKeys",this.dateKeys.join(","),"Keys","NoUI")),o.push(new ae("NavPages",this.navPages.join(","),"Keys","")),o.push(new ae("SearchPage",this.searchPage,"ParentKey","")),o.push(new ae("FilterPages",this.filterPages.join(","),"Keys","")),o.push(new ae("ProviderPages",this.providerPages.join(","),"Keys","")),o.push(new ae("Components",this.components.join(","),"Keys","")),o.push(new ae("AgentPages",this.agentPages.join(","),"Keys","")),o}};var _t=class r extends U{constructor(){super(),this.key="",this.folders=[],this.codeHelpers=[],this.tokenType=ue.CODE,this.builderType="CodeStatement",this.shapeType="Parallelogram",this.needsEnd=!0,this.nexts=["FOLDER","AGENT"]}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.folders,i=o.codeHelpers,n=new oe;n.heading=`${o.key}Folders`,e.groups.push(n);let a=new oe;if(a.heading=`${o.key}CodeHelpers`,e.groups.push(a),t.length>0)for(let c=0;c<t.length;c++){let l=t[c];l.createBranches(),n.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==n);if(i.length>0)for(let c=0;c<i.length;c++){let l=i[c];l.createBranches(),a.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==a);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","")),o}getChildren(){let o=new Array;o.push(...this.folders),o.push(...this.codeHelpers);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="FolderStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.folders.push(o),!0):o.builderType==="AgentStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.codeHelpers.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="FolderStatement"?this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.folders.splice(o,0,e),t=!0):e.builderType==="AgentStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.codeHelpers.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.folders=[],this.codeHelpers=[],!0}removeChild(o){if(o.builderType==="FolderStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.folders.splice(e,1),!0}if(o.builderType==="AgentStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.codeHelpers.splice(e,1),!0}return!1}};var tt=class r extends U{constructor(){super(),this.key="",this.files=[],this.folders=[],this.tokenType=ue.FOLDER,this.builderType="FolderStatement",this.shapeType="",this.needsEnd=!0,this.nexts=["FILE","FOLDER"]}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.files,i=o.folders,n=new oe;n.heading=`${o.key}Files`,e.groups.push(n);let a=new oe;if(a.heading=`${o.key}Folders`,e.groups.push(a),t.length>0)for(let c=0;c<t.length;c++){let l=t[c];l.createBranches(),n.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==n);if(i.length>0)for(let c=0;c<i.length;c++){let l=i[c];l.createBranches(),a.groups.push(...l.groups)}else e.groups=e.groups.filter(c=>c!==a);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","Key")),o}getChildren(){let o=new Array;o.push(...this.files),o.push(...this.folders);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="FileStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.files.push(o),!0):o.builderType==="FolderStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.folders.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="FileStatement"?this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.files.splice(o,0,e),t=!0):e.builderType==="FolderStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.folders.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.files=[],this.folders=[],!0}removeChild(o){if(o.builderType==="FileStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.files.splice(e,1),!0}if(o.builderType==="FolderStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.folders.splice(e,1),!0}return!1}};var ht=class r extends U{constructor(){super(),this.key="",this.content="",this.tokenType=ue.FILE,this.builderType="FileStatement",this.shapeType=""}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.content=o.content)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Content"&&t.value&&(this.content=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","Key")),o.push(new ae("Content",this.content,"StringType","Content")),o}};var it=class r extends U{constructor(){super(),this.key="",this.type="NotSet",this.foreignType="",this.expression="",this.tokenType=ue.PARAM,this.builderType="ParamStatement",this.shapeType="Rectangle",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"]}first(){return this.key}second(){return this.type}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.type=o.type,this.foreignType=o.foreignType,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Type"&&t.value&&(this.type=t.value),t.key==="ForeignType"&&t.value&&(this.foreignType=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Type",this.type,"StringEnum","LineOneB")),o.push(new ae("ForeignType",this.foreignType,"StringType","LineTwoA")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var nt=class r extends U{constructor(){super(),this.key="",this.expression="",this.tokenType=ue.RETURN,this.builderType="ReturnStatement",this.shapeType="Rectangle",this.nexts=["ASSIGN","CALL","REM","DECLARE","IN","PICK","OUT","PARAM","RETURN"]}first(){return this.key}second(){return this.expression}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.expression=o.expression)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Expression",this.expression,"StringType","TabA")),o}};var Je=class r extends U{constructor(){super(),this.key="",this.lines=[],this.tokenType=ue.HISTORY,this.builderType="HistoryStatement",this.shapeType="Parallelogram",this.needsEnd=!0,this.nexts=["LINE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.lines,i=new oe;if(i.heading=`${o.key}Lines`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.lines);for(let e of o)e.parent=this;return o}addChild(o){return o.builderType==="LineStatement"?this.getChildren().find(t=>t.id===o.id)?!1:(o.parent=this,this.lines.push(o),!0):!1}insertChild(o,e){let t=!1;return e.builderType==="LineStatement"&&(this.getChildren().find(n=>n.id===e.id)?t=this.addChild(e):(e.parent=this,this.lines.splice(o,0,e),t=!0)),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.lines=[],!0}removeChild(o){if(o.builderType==="LineStatement"){let e=this.getChildren().indexOf(o);if(e>-1)return this.lines.splice(e,1),!0}return!1}};var Ki=class r extends U{constructor(){super(),this.key="",this.body=[],this.tokenType=ue.EVENT,this.builderType="EventStatement",this.shapeType="Tetragram",this.needsEnd=!0,this.nexts=[]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.key}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Ct=class r extends U{constructor(){super(),this.fromKey="",this.toKey="",this.body=[],this.tokenType=ue.DISPATCH,this.builderType="DispatchStatement",this.shapeType="Rhombus",this.needsEnd=!0,this.nexts=["DO","FOR","FOREACH","WHILE","ASSIGN","CALL","REM","DECLARE","IN","OUT","PARAM","PICK","RETURN","IF","SWITCH","INVOKE","AGENT","PROMPT","HISTORY","BRANCH","EVENT","LINE"]}first(){return this.fromKey}second(){return this.toKey}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.fromKey,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.fromKey}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.fromKey=o.fromKey,this.toKey=o.toKey)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="FromKey"&&t.value&&(this.fromKey=t.value),t.key==="ToKey"&&t.value&&(this.toKey=t.value)}}keyValue(){let o=new Array;return o.push(new ae("FromKey",this.fromKey,"ParentKey","LineOneA")),o.push(new ae("ToKey",this.toKey,"ParentKey","LineTwoA")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Bi=class r extends U{constructor(){super(),this.key="",this.body=[],this.tokenType=ue.ACTION,this.builderType="ActionStatement",this.shapeType="Rectangle",this.needsEnd=!0,this.nexts=["DO","FOR","FOREACH","WHILE","ASSIGN","CALL","REM","DECLARE","IN","OUT","PARAM","PICK","RETURN","IF","SWITCH","INVOKE","AGENT","PROMPT","HISTORY","BRANCH","EVENT","DISPATCH","LINE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.key}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Mi=class r extends U{constructor(){super(),this.key="",this.body=[],this.tokenType=ue.AWAIT,this.builderType="AwaitStatement",this.shapeType="Rectangle",this.needsEnd=!0,this.nexts=["DO","FOR","FOREACH","WHILE","ASSIGN","CALL","REM","DECLARE","IN","OUT","PARAM","PICK","RETURN","IF","SWITCH","INVOKE","AGENT","PROMPT","HISTORY","BRANCH","EVENT","DISPATCH","LINE"]}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.key}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Wi=class r extends U{constructor(){super(),this.fromKey="",this.comment="",this.tokenType=ue.END,this.builderType="EndStatement",this.shapeType="Ellipse"}first(){return this.fromKey}second(){return this.comment}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.fromKey,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.fromKey=o.fromKey,this.comment=o.comment)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="FromKey"&&t.value&&(this.fromKey=t.value),t.key==="Comment"&&t.value&&(this.comment=t.value)}}keyValue(){let o=new Array;return o.push(new ae("FromKey",this.fromKey,"StringType","LineOneA")),o.push(new ae("Comment",this.comment,"StringType","LineOneB")),o}};var Le=class r extends U{constructor(){super(),this.fromKey="",this.toKey="",this.type="",this.toType="",this.x=0,this.y=0,this.w=0,this.h=0,this.where="NotSet",this.name="",this.content="",this.body=[],this.tokenType=ue.LINK,this.builderType="LinkStatement",this.shapeType="Rectangle",this.needsEnd=!0,this.nexts=[],this.enumValues.set("Where",["RightMiddleToTopMiddle","RightMiddleToTopLeft","RightMiddleToTopRight","RightMiddleToRightMiddle","LeftMiddleToTopMiddle","LeftMiddleToTopLeft","LeftMiddleToTopRight","LeftMiddleToLeftMiddle","BottomMiddleToTopMiddle","BottomMiddleToTopLeft","BottomMiddleToTopRight","BottomMiddleToLeftMiddle","RightMiddleToLeftMiddle"])}first(){return this.fromKey}second(){return this.toKey}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;e.from=o,e.heading=o.fromKey,e.heading=o.toKey,e.from=o,e.tokenType=o.tokenType;let t=o.body,i=new oe;if(i.heading=`${o.toKey}Body`,e.groups.push(i),t.length>0)for(let n=0;n<t.length;n++){let a=t[n];a.createBranches(),i.groups.push(...a.groups),a.groups.length>0?i.heading=a.groups[0].heading:e.groups=e.groups.filter(c=>c!==i)}else e.groups=e.groups.filter(n=>n!==i);return this.groups.push(e),this.groups}update(o){o instanceof r&&(this.fromKey=o.fromKey,this.toKey=o.toKey,this.type=o.type,this.toType=o.toType,this.x=parseInt(o.x.toString()),this.y=parseInt(o.y.toString()),this.w=parseInt(o.w.toString()),this.h=parseInt(o.h.toString()),this.where=o.where,this.name=o.name,this.content=o.content)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="FromKey"&&t.value&&(this.fromKey=t.value),t.key==="ToKey"&&t.value&&(this.toKey=t.value),t.key==="Type"&&t.value&&(this.type=t.value),t.key==="ToType"&&t.value&&(this.toType=t.value),t.key==="X"&&t.value&&(this.x=parseInt(t.value)),t.key==="Y"&&t.value&&(this.y=parseInt(t.value)),t.key==="W"&&t.value&&(this.w=parseInt(t.value)),t.key==="H"&&t.value&&(this.h=parseInt(t.value)),t.key==="Where"&&t.value&&(this.where=t.value),t.key==="Name"&&t.value&&(this.name=t.value),t.key==="Content"&&t.value&&(this.content=t.value)}}keyValue(){let o=new Array;return o.push(new ae("FromKey",this.fromKey.toString(),"UniqueKey","LineOneA")),o.push(new ae("ToKey",this.toKey.toString(),"UniqueKey","LineOneB")),o.push(new ae("Type",this.type,"StringType","LineTwoA")),o.push(new ae("ToType",this.toType,"StringType","LineTwoB")),o.push(new ae("X",this.x.toString(),"DoubleType","LineThreeA")),o.push(new ae("Y",this.y.toString(),"DoubleType","LineThreeB")),o.push(new ae("W",this.w.toString(),"DoubleType","LineFourA")),o.push(new ae("H",this.h.toString(),"DoubleType","LineFourB")),o.push(new ae("Where",this.where,"StringEnum","LineFiveA")),o.push(new ae("Name",this.name,"StringType","")),o.push(new ae("Content",this.content,"StringType","LineSixA")),o}getChildren(){let o=new Array;o.push(...this.body);for(let e of o)e.parent=this;return o}addChild(o){return!this.getChildren().find(t=>t.id===o.id)&&this.body.push(o)>0}insertChild(o,e){let t=!1;return this.getChildren().find(n=>n.id===e.id)?(alert("insertChild"+e.builderType+" "+o),t=this.addChild(e)):(e.parent=this,this.body.splice(o,0,e),t=!0),t}addChildBefore(o,e){let t=this.getChildren(),i=!1;if(e&&t.includes(e)){let n=t.indexOf(e);this.insertChild(n,o),i=!0}else this.addChild(o),i=!0;return i}removeChildren(){return this.body=[],!0}removeChild(o){let e=this.getChildren().indexOf(o);return e>-1?(this.body.splice(e,1),!0):!1}};var Ai=class r extends U{constructor(){super(),this.key="",this.expression="",this.type="",this.tokenType=ue.PAIR,this.builderType="PairStatement",this.shapeType="Rectangle"}first(){return this.key}createBranches(){if(this.groups.length>0)return;let o=this,e=new oe;return e.from=o,e.heading=o.key,e.from=o,e.tokenType=o.tokenType,this.groups.push(e),this.groups}update(o){o instanceof r&&(this.key=o.key,this.expression=o.expression,this.type=o.type)}updateKevValue(o){for(let e=0;e<o.length;e++){let t=o[e];t.key==="Key"&&t.value&&(this.key=t.value),t.key==="Expression"&&t.value&&(this.expression=t.value),t.key==="Type"&&t.value&&(this.type=t.value)}}keyValue(){let o=new Array;return o.push(new ae("Key",this.key.toString(),"UniqueKey","LineOneA")),o.push(new ae("Expression",this.expression,"StringType","")),o.push(new ae("Type",this.type,"StringType","")),o}};var mn=class{constructor(){this.index=0,this.tokens=[],this.specialchars=["&","<",">",'"',"'","=",`
`,"\r","	"]}parse(o){this.tokens=o,this.index=0;let e=[];for(;this.index<this.tokens.length;){let t=this.parseStatement();t&&e.push(t)}return e}parseStatement(){switch(this.tokens[this.index].tokenType){case ue.PLAN:return this.parsePlanStatement();case ue.AGENT:return this.parseAgentStatement();case ue.DECLARE:return this.parseDeclareStatement();case ue.ASSIGN:return this.parseAssignStatement();case ue.IF:return this.parseIfStatement();case ue.THEN:return this.parseThenStatement();case ue.ELSEIF:return this.parseElseIfStatement();case ue.ELSE:return this.parseElseStatement();case ue.IN:return this.parseInStatement();case ue.PICK:return this.parsePickStatement();case ue.SUB:return this.parseSubStatement();case ue.CHILD:return this.parseChildStatement();case ue.INFANT:return this.parseInfantStatement();case ue.OUT:return this.parseOutStatement();case ue.REM:return this.parseRemStatement();case ue.SWITCH:return this.parseSwitchStatement();case ue.CASE:return this.parseCaseStatement();case ue.DEFAULT:return this.parseDefaultStatement();case ue.FOR:return this.parseForStatement();case ue.FOREACH:return this.parseForEachStatement();case ue.WHILE:return this.parseWhileStatement();case ue.DO:return this.parseDoStatement();case ue.CALL:return this.parseCallStatement();case ue.PROMPT:return this.parsePromptStatement();case ue.LINE:return this.parseLineStatement();case ue.INVOKE:return this.parseInvokeStatement();case ue.PROJECT:return this.parseProjectStatement();case ue.SCHEMA:return this.parseSchemaStatement();case ue.TABLE:return this.parseTableStatement();case ue.COLUMN:return this.parseColumnStatement();case ue.ENUM:return this.parseEnumStatement();case ue.VALUE:return this.parseValueStatement();case ue.SEED:return this.parseSeedStatement();case ue.RECORD:return this.parseRecordStatement();case ue.FIELD:return this.parseFieldStatement();case ue.API:return this.parseApiStatement();case ue.ROUTE:return this.parseRouteStatement();case ue.DESIGN:return this.parseDesignStatement();case ue.PAGE:return this.parsePageStatement();case ue.CODE:return this.parseCodeStatement();case ue.FOLDER:return this.parseFolderStatement();case ue.FILE:return this.parseFileStatement();case ue.PARAM:return this.parseParamStatement();case ue.RETURN:return this.parseReturnStatement();case ue.BRANCH:return this.parseBranchStatement();case ue.HISTORY:return this.parseHistoryStatement();case ue.EVENT:return this.parseEventStatement();case ue.DISPATCH:return this.parseDispatchStatement();case ue.ACTION:return this.parseActionStatement();case ue.AWAIT:return this.parseAwaitStatement();case ue.END:return this.parseEndStatement();case ue.LINK:return this.parseLinkStatement();case ue.PAIR:return this.parsePairStatement();default:return this.index++,null}}parsePlanStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof Ke&&a.push(l);let c=new He;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.agents=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.agents)l.parent=c;return this.currentStatement}parseAgentStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[],l=[];for(let f of n)f instanceof it?a.push(f):f instanceof nt?c.push(f):f instanceof U&&l.push(f);let u=new Ke;u.tokenType=o.tokenType,u.value=e,u.index=o.line,u.key=i,u.params=a,u.returns=c,u.body=l,this.currentStatement=u,this.currentStatement.shape.text=t;for(let f of u.params)f.parent=u;for(let f of u.returns)f.parent=u;for(let f of u.body)f.parent=u;return this.currentStatement}parseDeclareStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Type","ForeignType","Expression");t=i,this.index++;let l=new De;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.type=n,l.foreignType=a,l.expression=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseAssignStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Parameters","AssignType","Expression");t=i,this.index++;let l=new Ti;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.parameters=n.split(","),l.assignType=a,l.expression=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseIfStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[],l=[],u=[];for(let C of a)C instanceof Ye?c.push(C):C instanceof Ue?l.push(C):C instanceof Ge&&u.push(C);let f=new st;f.tokenType=o.tokenType,f.value=e,f.index=o.line,f.key=i,f.expression=n,f.then=c[0],f.elseIfs=l,f.elses=u[0],this.currentStatement=f,this.currentStatement.shape.text=t,f.then&&(f.then.parent=f);for(let C of f.elseIfs)C.parent=f;return f.elses&&(f.elses.parent=f),this.currentStatement}parseThenStatement(){let o=this.tokens[this.index],e=o.value,t="",[]=this.getProperties(e);this.index++;let i=this.parseBlockUntil(ue.END),n=[];for(let c of i)c instanceof U&&n.push(c);let a=new Ye;a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.body=n,this.currentStatement=a,this.currentStatement.shape.text=t;for(let c of a.body)c.parent=a;return this.currentStatement}parseElseIfStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Expression");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new Ue;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.expression=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseElseStatement(){let o=this.tokens[this.index],e=o.value,t="",[]=this.getProperties(e);this.index++;let i=this.parseBlockUntil(ue.END),n=[];for(let c of i)c instanceof U&&n.push(c);let a=new Ge;a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.body=n,this.currentStatement=a,this.currentStatement.shape.text=t;for(let c of a.body)c.parent=a;return this.currentStatement}parseInStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Label");t=i,this.index++;let a=new Ei;return a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.key=i,a.label=n,this.currentStatement=a,this.currentStatement.shape.text=t,this.currentStatement}parsePickStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof ye&&a.push(l);let c=new ve;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.subs=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.subs)l.parent=c;return this.currentStatement}parseSubStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof bi&&a.push(l);let c=new ye;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.childs=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.childs)l.parent=c;return this.currentStatement}parseChildStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof Vi&&a.push(l);let c=new bi;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.infants=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.infants)l.parent=c;return this.currentStatement}parseInfantStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=new Vi;return n.tokenType=o.tokenType,n.value=e,n.index=o.line,n.key=i,this.currentStatement=n,this.currentStatement.shape.text=t,this.currentStatement}parseOutStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Parameters","OutType","Expression");t=i,this.index++;let l=new Pi;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.parameters=n.split(","),l.outType=a,l.expression=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseRemStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Expression");t=i,this.index++;let n=new Fi;return n.tokenType=o.tokenType,n.value=e,n.index=o.line,n.expression=i,this.currentStatement=n,this.currentStatement.shape.text=t,this.currentStatement}parseSwitchStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[];for(let u of n)u instanceof Qe?a.push(u):u instanceof je&&c.push(u);let l=new lt;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.cases=a,l.defaults=c[0],this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.cases)u.parent=l;return l.defaults&&(l.defaults.parent=l),this.currentStatement}parseCaseStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Expression");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new Qe;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.expression=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseDefaultStatement(){let o=this.tokens[this.index],e=o.value,t="",[]=this.getProperties(e);this.index++;let i=this.parseBlockUntil(ue.END),n=[];for(let c of i)c instanceof U&&n.push(c);let a=new je;a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.body=n,this.currentStatement=a,this.currentStatement.shape.text=t;for(let c of a.body)c.parent=a;return this.currentStatement}parseForStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Start","Increment","Expression");t=i,this.index++;let l=this.parseBlockUntil(ue.END),u=[];for(let C of l)C instanceof U&&u.push(C);let f=new wi;f.tokenType=o.tokenType,f.value=e,f.index=o.line,f.key=i,f.start=n,f.increment=parseInt(a),f.expression=c,f.body=u,this.currentStatement=f,this.currentStatement.shape.text=t;for(let C of f.body)C.parent=f;return this.currentStatement}parseForEachStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof U&&c.push(u);let l=new Si;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.expression=n,l.body=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.body)u.parent=l;return this.currentStatement}parseWhileStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof U&&c.push(u);let l=new Ci;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.expression=n,l.body=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.body)u.parent=l;return this.currentStatement}parseDoStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof U&&c.push(u);let l=new ki;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.expression=n,l.body=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.body)u.parent=l;return this.currentStatement}parseCallStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","ToKey","Parameters","AgentType");t=i,this.index++;let l=this.parseBlockUntil(ue.END),u=[];for(let C of l)C instanceof U&&u.push(C);let f=new vt;f.tokenType=o.tokenType,f.value=e,f.index=o.line,f.key=i,f.toKey=n,f.parameters=a.split(","),f.agentType=c,f.body=u,this.currentStatement=f,this.currentStatement.shape.text=t;for(let C of f.body)C.parent=f;return this.currentStatement}parsePromptStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof ze&&c.push(u);let l=new Xe;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.expression=n,l.lines=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.lines)u.parent=l;return this.currentStatement}parseLineStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Role","Declares","Expression","Score");t=i,this.index++;let l=new ze;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.role=i,l.declares=n.split(","),l.expression=a,l.score=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseInvokeStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c,l,u,f,C]=this.getProperties(e,"Key","ApiKey","BotType","OutType","ModelName","EndPoint","Histories","Prompts");t=i,this.index++;let y=new xt;return y.tokenType=o.tokenType,y.value=e,y.index=o.line,y.key=i,y.apiKey=n,y.botType=a,y.outType=c,y.modelName=l,y.endPoint=u,y.histories=f.split(","),y.prompts=C.split(","),this.currentStatement=y,this.currentStatement.shape.text=t,this.currentStatement}parseProjectStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[],l=[],u=[],f=[],C=[];for(let B of n)B instanceof He?a.push(B):B instanceof Ne?c.push(B):B instanceof dt?l.push(B):B instanceof et?u.push(B):B instanceof gt?f.push(B):B instanceof _t&&C.push(B);let y=new zi;y.tokenType=o.tokenType,y.value=e,y.index=o.line,y.key=i,y.plan=a,y.schema=c,y.seed=l,y.api=u,y.design=f,y.code=C,this.currentStatement=y,this.currentStatement.shape.text=t;for(let B of y.plan)B.parent=y;for(let B of y.schema)B.parent=y;for(let B of y.seed)B.parent=y;for(let B of y.api)B.parent=y;for(let B of y.design)B.parent=y;for(let B of y.code)B.parent=y;return this.currentStatement}parseSchemaStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[];for(let u of n)u instanceof Oe?a.push(u):u instanceof ct&&c.push(u);let l=new Ne;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.tables=a,l.enums=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.tables)u.parent=l;for(let u of l.enums)u.parent=l;return this.currentStatement}parseTableStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Plural");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof qe&&c.push(u);let l=new Oe;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.plural=n,l.columns=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.columns)u.parent=l;return this.currentStatement}parseColumnStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Type","Annotation","ForeignType");t=i,this.index++;let l=new qe;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.type=n,l.annotation=a,l.foreignType=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseEnumStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof pt&&a.push(l);let c=new ct;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.values=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.values)l.parent=c;return this.currentStatement}parseValueStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Content");t=i,this.index++;let a=new pt;return a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.key=i,a.content=n,this.currentStatement=a,this.currentStatement.shape.text=t,this.currentStatement}parseSeedStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a]=this.getProperties(e,"Key","SchemaKey","RecordsCount");t=i,this.index++;let c=this.parseBlockUntil(ue.END),l=[];for(let f of c)f instanceof ut&&l.push(f);let u=new dt;u.tokenType=o.tokenType,u.value=e,u.index=o.line,u.key=i,u.schemaKey=n,u.recordsCount=parseInt(a),u.records=l,this.currentStatement=u,this.currentStatement.shape.text=t;for(let f of u.records)f.parent=u;return this.currentStatement}parseRecordStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","TableKey");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof mt&&c.push(u);let l=new ut;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.tableKey=n,l.fields=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.fields)u.parent=l;return this.currentStatement}parseFieldStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Content","Type","ForeignType");t=i,this.index++;let l=new mt;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.content=n,l.type=a,l.foreignType=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseApiStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a]=this.getProperties(e,"Key","SchemaKey","Links");t=i,this.index++;let c=this.parseBlockUntil(ue.END),l=[],u=[];for(let C of c)C instanceof Ze?l.push(C):C instanceof Ke&&u.push(C);let f=new et;f.tokenType=o.tokenType,f.value=e,f.index=o.line,f.key=i,f.schemaKey=n,f.links=a.split(","),f.routes=l,f.routeHelpers=u,this.currentStatement=f,this.currentStatement.shape.text=t;for(let C of f.routes)C.parent=f;for(let C of f.routeHelpers)C.parent=f;return this.currentStatement}parseRouteStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c,l,u,f,C,y,B,k,A,Y,z,Pe]=this.getProperties(e,"Key","Path","Verb","TableKey","RequestKeys","ResponseKeys","PayloadKeys","OrderBy","ResponseType","SearchRoute","AgentRoute","NavRoutes","FilterRoutes","ProviderRoutes","ChildRoutes");t=i,this.index++;let Ve=new Ze;return Ve.tokenType=o.tokenType,Ve.value=e,Ve.index=o.line,Ve.key=i,Ve.path=n,Ve.verb=a,Ve.tableKey=c,Ve.requestKeys=l.split(","),Ve.responseKeys=u.split(","),Ve.payloadKeys=f.split(","),Ve.orderBy=C.split(","),Ve.responseType=y,Ve.searchRoute=B,Ve.agentRoute=k.split(","),Ve.navRoutes=A.split(","),Ve.filterRoutes=Y.split(","),Ve.providerRoutes=z.split(","),Ve.childRoutes=Pe.split(","),this.currentStatement=Ve,this.currentStatement.shape.text=t,this.currentStatement}parseDesignStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a]=this.getProperties(e,"Key","SchemaKey","ApiKey");t=i,this.index++;let c=this.parseBlockUntil(ue.END),l=[];for(let f of c)f instanceof rt&&l.push(f);let u=new gt;u.tokenType=o.tokenType,u.value=e,u.index=o.line,u.key=i,u.schemaKey=n,u.apiKey=a,u.pages=l,this.currentStatement=u,this.currentStatement.shape.text=t;for(let f of u.pages)f.parent=u;return this.currentStatement}parsePageStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c,l,u,f,C,y,B,k,A,Y,z,Pe,Ve,Fe,Ie,$i,Me,$e,cn,pn,dn]=this.getProperties(e,"Key","PageType","RouteKey","TableKey","DisplayType","IdKeys","HeaderKeys","ImageKeys","ContentKeys","FooterKeys","PickerKeys","RangeKeys","InputKeys","BooleanKeys","TextKeys","ToggleKeys","SelectKeys","DateKeys","NavPages","SearchPage","FilterPages","ProviderPages","Components","AgentPages");t=i,this.index++;let Be=new rt;return Be.tokenType=o.tokenType,Be.value=e,Be.index=o.line,Be.key=i,Be.pageType=n,Be.routeKey=a,Be.tableKey=c,Be.displayType=l,Be.idKeys=u.split(","),Be.headerKeys=f.split(","),Be.imageKeys=C.split(","),Be.contentKeys=y.split(","),Be.footerKeys=B.split(","),Be.pickerKeys=k.split(","),Be.rangeKeys=A.split(","),Be.inputKeys=Y.split(","),Be.booleanKeys=z.split(","),Be.textKeys=Pe.split(","),Be.toggleKeys=Ve.split(","),Be.selectKeys=Fe.split(","),Be.dateKeys=Ie.split(","),Be.navPages=$i.split(","),Be.searchPage=Me,Be.filterPages=$e.split(","),Be.providerPages=cn.split(","),Be.components=pn.split(","),Be.agentPages=dn.split(","),this.currentStatement=Be,this.currentStatement.shape.text=t,this.currentStatement}parseCodeStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[];for(let u of n)u instanceof tt?a.push(u):u instanceof Ke&&c.push(u);let l=new _t;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.folders=a,l.codeHelpers=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.folders)u.parent=l;for(let u of l.codeHelpers)u.parent=l;return this.currentStatement}parseFolderStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[],c=[];for(let u of n)u instanceof ht?a.push(u):u instanceof tt&&c.push(u);let l=new tt;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.files=a,l.folders=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.files)u.parent=l;for(let u of l.folders)u.parent=l;return this.currentStatement}parseFileStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Content");t=i,this.index++;let a=new ht;return a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.key=i,a.content=n,this.currentStatement=a,this.currentStatement.shape.text=t,this.currentStatement}parseParamStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c]=this.getProperties(e,"Key","Type","ForeignType","Expression");t=i,this.index++;let l=new it;return l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.key=i,l.type=n,l.foreignType=a,l.expression=c,this.currentStatement=l,this.currentStatement.shape.text=t,this.currentStatement}parseReturnStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"Key","Expression");t=i,this.index++;let a=new nt;return a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.key=i,a.expression=n,this.currentStatement=a,this.currentStatement.shape.text=t,this.currentStatement}parseBranchStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new oe;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseHistoryStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof ze&&a.push(l);let c=new Je;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.lines=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.lines)l.parent=c;return this.currentStatement}parseEventStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new Ki;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseDispatchStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"FromKey","ToKey");t=i,this.index++;let a=this.parseBlockUntil(ue.END),c=[];for(let u of a)u instanceof U&&c.push(u);let l=new Ct;l.tokenType=o.tokenType,l.value=e,l.index=o.line,l.fromKey=i,l.toKey=n,l.body=c,this.currentStatement=l,this.currentStatement.shape.text=t;for(let u of l.body)u.parent=l;return this.currentStatement}parseActionStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new Bi;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseAwaitStatement(){let o=this.tokens[this.index],e=o.value,t="",[i]=this.getProperties(e,"Key");t=i,this.index++;let n=this.parseBlockUntil(ue.END),a=[];for(let l of n)l instanceof U&&a.push(l);let c=new Mi;c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.body=a,this.currentStatement=c,this.currentStatement.shape.text=t;for(let l of c.body)l.parent=c;return this.currentStatement}parseEndStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n]=this.getProperties(e,"FromKey","Comment");t=i,this.index++;let a=new Wi;return a.tokenType=o.tokenType,a.value=e,a.index=o.line,a.fromKey=i,a.comment=n,this.currentStatement=a,this.currentStatement.shape.text=t,this.currentStatement}parseLinkStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a,c,l,u,f,C,y,B,k]=this.getProperties(e,"FromKey","ToKey","Type","ToType","X","Y","W","H","Where","Name","Content");t=i,t=n,this.index++;let A=this.parseBlockUntil(ue.END),Y=[];for(let Pe of A)Pe instanceof U&&Y.push(Pe);let z=new Le;z.tokenType=o.tokenType,z.value=e,z.index=o.line,z.fromKey=i,z.toKey=n,z.type=a,z.toType=c,z.x=parseInt(l),z.y=parseInt(u),z.w=parseInt(f),z.h=parseInt(C),z.where=y,z.name=B,z.content=k,z.body=Y,this.currentStatement=z,this.currentStatement.shape.text=t;for(let Pe of z.body)Pe.parent=z;return this.currentStatement}parsePairStatement(){let o=this.tokens[this.index],e=o.value,t="",[i,n,a]=this.getProperties(e,"Key","Expression","Type");t=i,this.index++;let c=new Ai;return c.tokenType=o.tokenType,c.value=e,c.index=o.line,c.key=i,c.expression=n,c.type=a,this.currentStatement=c,this.currentStatement.shape.text=t,this.currentStatement}parseBlockUntil(...o){let e=[];for(var t=[];this.index<this.tokens.length;){if(o.includes(this.tokens[this.index].tokenType)){this.index++;break}let i=this.parseStatement();i&&e.push(i)}return e}unescapeString(o){return o=o.replace(/&amp;/g,"&"),o=o.replace(/&lt;/g,"<"),o=o.replace(/&gt;/g,">"),o=o.replace(/&quot;/g,'"'),o=o.replace(/&#39;/g,"'"),o=o.replace(/&#61;/g,"="),o=o.replace(/&#10;/g,`
`),o=o.replace(/&#13;/g,"\r"),o=o.replace(/&#9;/g,"	"),o}getProperties(o,...e){let t=[];for(let i of e){let a=new RegExp(`\\b${i}\\b="([^"]*)`,"i").exec(o);if(a&&a.length>1){let c=!1;for(let l of this.specialchars)if(a[1].includes(l)){c=!0;break}c?t.push(this.unescapeString(a[1])):t.push(a[1])}else t.push("")}return t}getDate(o){if(o){if(o.length===8){let e=parseInt(o.substring(0,4)),t=parseInt(o.substring(5,7))-1,i=parseInt(o.substring(8,10));return new Date(e,t,i)}else if(o.length===10){let e=parseInt(o.substring(0,4)),t=parseInt(o.substring(5,7))-1,i=parseInt(o.substring(8,10));return new Date(e,t,i)}else if(o.length===14){let e=parseInt(o.substring(0,4)),t=parseInt(o.substring(5,7))-1,i=parseInt(o.substring(8,10)),n=parseInt(o.substring(11,13)),a=parseInt(o.substring(14,16));return new Date(e,t,i,n,a)}else if(o.length===19){let e=parseInt(o.substring(0,4)),t=parseInt(o.substring(5,7))-1,i=parseInt(o.substring(8,10)),n=parseInt(o.substring(11,13)),a=parseInt(o.substring(14,16)),c=parseInt(o.substring(17,19));return new Date(e,t,i,n,a,c)}else if(o.length===23){let e=parseInt(o.substring(0,4)),t=parseInt(o.substring(5,7))-1,i=parseInt(o.substring(8,10)),n=parseInt(o.substring(11,13)),a=parseInt(o.substring(14,16)),c=parseInt(o.substring(17,19)),l=parseInt(o.substring(20,23));return new Date(e,t,i,n,a,c,l)}}return new Date}},Ar=new mn;var Qs=["&","<",">",'"',"'","=",`
`,"\r","	"],_n=class{convert(o){let e=new qi;return this.recurseTree(e,o," ",void 0),e.toString()}recurseTree(o,e,t,i){let n=e.keyValue(),a=new qi,c=new Array,l=e.tokenType.toString();for(let u of n){if(!u.value)continue;l=u.key.trim();let f=u.value;Qs.some(y=>f.includes(y))?c.push(`${l}="${this.escapeString(f.trim())}" `):c.push(`${l}="${f.trim()}" `)}if(o.AppendLine(`${t}${e.tokenType} ${c.join("")}`),e.getChildren().length>0){let u=t+" ";for(let f of e.getChildren())this.recurseTree(o,f,u,e)}e.needsEnd?o.AppendLine(`${t}END #${e.tokenType}`):e.getChildren().length>0&&o.AppendLine(`${t}END #this is an error ${e.tokenType}`)}convertArray(o){let e=new qi;for(let t of o)this.recurseTree(e,t," ",void 0);return e.toString()}escapeString(o){return o=o.replace(/&/g,"&amp;"),o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),o=o.replace(/"/g,"&quot;"),o=o.replace(/'/g,"&#39;"),o=o.replace(/=/g,"&#61;"),o=o.replace(/\n/g,"&#10;"),o=o.replace(/\r/g,"&#13;"),o=o.replace(/\t/g,"&#9;"),o}unescapeString(o){return o=o.replace(/&amp;/g,"&"),o=o.replace(/&lt;/g,"<"),o=o.replace(/&gt;/g,">"),o=o.replace(/&quot;/g,'"'),o=o.replace(/&#39;/g,"'"),o=o.replace(/&#61;/g,"="),o=o.replace(/&#10;/g,`
`),o=o.replace(/&#13;/g,"\r"),o=o.replace(/&#9;/g,"	"),o}},rn=new _n;var Gi=class{constructor(){this.tokenType=ue.NotSet,this.value="PLAN",this.line=0,this.branches=[],this.keyValues={Value:"",Line:""}}};var an=class{constructor(o,e){this.key=o,this.value=e}};var Yi=class{constructor(o,e,t){this.node=o,this.error=e,this.syntax=t}};var hn=class{constructor(){this.errors=[],this.tokens=[],this.input="",this.totalcontents=0,this.inMultilineMode=!1,this.multilineContent=[],this.contentKey="",this.lastToken=null}tokenize(o){this.tokens=[],this.input=o;let e=this.input.split(`
`);for(let t=0;t<e.length;t++){let i=e[t].trim();if(i.length===0)continue;if(this.inMultilineMode)if(i==="ENDCONTENT"){if(this.totalcontents++,this.inMultilineMode=!1,this.lastToken!==null){let c=new an(this.contentKey,this.multilineContent);this.lastToken.branches.push(c),this.lastToken.value=`${this.contentKey}="${this.multilineContent.join(`
`)}"`}this.multilineContent=[],this.contentKey="";continue}else{this.multilineContent.push(i);continue}let n=i.split(/\s+/),a=n[0];n.splice(0,1);try{let c=ue[a],l=new Gi;if(l.tokenType=c,l.value=n.join(" "),l.line=t,this.tokens.push(l),a!=="CONTENT")this.lastToken=l;else{this.inMultilineMode=!0;let u=i.match(/Key="([^"]+)"/i);u?this.contentKey=u[1]:(this.errors.push(new Yi(l,"Missing Key in CONTENT line",'Expected format: CONTENT Key="Value"')),alert("Missing Key in CONTENT line"))}}catch(c){this.errors.push(new Yi(new Gi,`${c}`,"An exception was thrown")),alert(`${c}`)}}return this.tokens}},Or=new hn;var fn=class{constructor(){this.astMap=new Map,this.getTHEN(),this.getELSE(),this.getELSEIF(),this.getCASE(),this.getDEFAULT(),this.getTABLE(),this.getENUM(),this.getRECORD(),this.getPLAN(),this.getFOR(),this.getFOREACH(),this.getWHILE(),this.getDO(),this.getIF(),this.getSWITCH(),this.getSCHEMA(),this.getSEED(),this.getDESIGN(),this.getAPI(),this.getCODE(),this.getFOLDER(),this.getPROJECT(),this.getBRANCH(),this.getPROMPT(),this.getINVOKE(),this.getAGENT(),this.getACTION(),this.getAWAIT(),this.getCALL(),this.getDISPATCH();var o=this.getNEXT();for(let e of o.getChildren())this.astMap.has(e)||this.astMap.set(e,e.getChildren())}flatten(o,e){if(o&&o.tokenType)try{e.push(o);for(let t of o.getChildren())t.parent=o,this.flatten(t,e)}catch{}}getTHEN(){let o=new Ye;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getELSE(){let o=new Ge;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getELSEIF(){let o=new Ue;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getCASE(){let o=new Qe;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getDEFAULT(){let o=new je;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getTABLE(){let o=new Oe,e=new qe;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getENUM(){let o=new ct,e=new pt;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getRECORD(){let o=new ut,e=new mt;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getPLAN(){let o=new He;for(let i of this.getNEXT().getChildren())o.addChild(i);let e=new Je;o.addChild(e);let t=new Ke;return o.addChild(t),this.astMap.set(o,o.getChildren()),o}getNEXT(){let o=new oe,e=new ki;o.addChild(e);let t=new wi;o.addChild(t);let i=new Si;o.addChild(i);let n=new Ci;o.addChild(n);let a=new Ti;o.addChild(a);let c=new vt;o.addChild(c);let l=new Fi;o.addChild(l);let u=new De;o.addChild(u);let f=new Ei;o.addChild(f);let C=new Pi;o.addChild(C);let y=new it;o.addChild(y);let B=new ve;o.addChild(B);let k=new nt;o.addChild(k);let A=new st;o.addChild(A);let Y=new lt;o.addChild(Y);let z=new xt;o.addChild(z);let Pe=new Ke;o.addChild(Pe);let Ve=new Xe;o.addChild(Ve);let Fe=new Je;o.addChild(Fe);let Ie=new oe;o.addChild(Ie);let $i=new Ki;o.addChild($i);let Me=new Ct;o.addChild(Me);let $e=new ze;return o.addChild($e),o}getFOR(){let o=new wi;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getFOREACH(){let o=new Si;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getWHILE(){let o=new Ci;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getDO(){let o=new ki;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getIF(){let o=new st,e=new Ue;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getSWITCH(){let o=new lt,e=new Qe;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getSCHEMA(){let o=new Ne,e=new ct;o.addChild(e);let t=new pt;e.addChild(t);let i=new Oe;o.addChild(i);let n=new qe;return i.addChild(n),this.astMap.set(o,o.getChildren()),o}getSEED(){let o=new dt,e=new ut;o.addChild(e);let t=new mt;return e.addChild(t),this.astMap.set(o,o.getChildren()),o}getDESIGN(){let o=new gt,e=new rt;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getAPI(){let o=new et,e=new Ze;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getCODE(){let o=new _t,e=new tt;o.addChild(e);let t=new ht;return e.addChild(t),this.astMap.set(o,o.getChildren()),o}getFOLDER(){let o=new tt,e=new ht;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getPROJECT(){let o=new zi,e=new Ke;o.addChild(e);let t=new Ne;o.addChild(t);let i=new et;o.addChild(i);let n=new dt;o.addChild(n);let a=new rt;o.addChild(a);let c=new _t;return o.addChild(c),this.astMap.set(o,o.getChildren()),o}getBRANCH(){let o=new oe;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getPROMPT(){let o=new Xe,e=new ze;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getINVOKE(){let o=new xt,e=new Xe;o.addChild(e);let t=new Mi;return o.addChild(t),this.astMap.set(o,o.getChildren()),o}getAGENT(){let o=new Ke,e=new it;o.addChild(e);let t=new nt;o.addChild(t);for(let i of this.getNEXT().getChildren())o.addChild(i);return this.astMap.set(o,o.getChildren()),o}getACTION(){let o=new Bi;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getAWAIT(){let o=new Mi;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getCALL(){let o=new vt,e=new Mi;return o.addChild(e),this.astMap.set(o,o.getChildren()),o}getDISPATCH(){let o=new Ct;for(let e of this.getNEXT().getChildren())o.addChild(e);return this.astMap.set(o,o.getChildren()),o}getStatement(o){var e=new Array;for(let t of this.astMap.keys())this.flatten(t,e);for(let t of e)if(t.tokenType===o)return t}getNext(o){if(this.astMap.has(o)){let e=this.astMap.get(o);if(e&&e.length>0)return e[0]}return o.builderType==="ThenStatement"?this.getTHEN():o.builderType==="ElseStatement"?this.getELSE():o.builderType==="ElseIfStatement"?this.getELSEIF():o.builderType==="CaseStatement"?this.getCASE():o.builderType==="DefaultStatement"?this.getDEFAULT():o.builderType==="TableStatement"?this.getTABLE():o.builderType==="EnumStatement"?this.getENUM():o.builderType==="RecordStatement"?this.getRECORD():o.builderType==="PlanStatement"?this.getPLAN():o.builderType==="ForStatement"?this.getFOR():o.builderType==="ForEachStatement"?this.getFOREACH():o.builderType==="WhileStatement"?this.getWHILE():o.builderType==="DoStatement"?this.getDO():o.builderType==="IfStatement"?this.getIF():o.builderType==="SwitchStatement"?this.getSWITCH():o.builderType==="SchemaStatement"?this.getSCHEMA():o.builderType==="SeedStatement"?this.getSEED():o.builderType==="DesignStatement"?this.getDESIGN():o.builderType==="ApiStatement"?this.getAPI():o.builderType==="CodeStatement"?this.getCODE():o.builderType==="FolderStatement"?this.getFOLDER():o.builderType==="ProjectStatement"?this.getPROJECT():o.builderType==="BranchStatement"?this.getBRANCH():o.builderType==="PromptStatement"?this.getPROMPT():o.builderType==="InvokeStatement"?this.getINVOKE():o.builderType==="AgentStatement"?this.getAGENT():o.builderType==="ActionStatement"?this.getACTION():o.builderType==="AwaitStatement"?this.getAWAIT():o.builderType==="CallStatement"?this.getCALL():o.builderType==="DispatchStatement"?this.getDISPATCH():new U}canAdd(o,e){let t=!1;if(o.builderType==="ThenStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="ElseStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="ElseIfStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="CaseStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="DefaultStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="TableStatement")e.builderType==="ColumnStatement"&&(t=!0);else if(o.builderType==="EnumStatement")e.builderType==="ValueStatement"&&(t=!0);else if(o.builderType==="RecordStatement")e.builderType==="FieldStatement"&&(t=!0);else if(o.builderType==="PlanStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}(e.builderType==="HistoryStatement"||e.builderType==="AgentStatement")&&(t=!0)}else if(o.builderType==="ForStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="ForEachStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="WhileStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="DoStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="IfStatement")e.builderType==="ElseIfStatement"&&(t=!0);else if(o.builderType==="SwitchStatement")e.builderType==="CaseStatement"&&(t=!0);else if(o.builderType==="SchemaStatement")(e.builderType==="EnumStatement"||e.builderType==="TableStatement")&&(t=!0);else if(o.builderType==="SeedStatement")e.builderType==="RecordStatement"&&(t=!0);else if(o.builderType==="DesignStatement")e.builderType==="PageStatement"&&(t=!0);else if(o.builderType==="ApiStatement")e.builderType==="RouteStatement"&&(t=!0);else if(o.builderType==="CodeStatement")e.builderType==="FolderStatement"&&(t=!0);else if(o.builderType==="FolderStatement")e.builderType==="FileStatement"&&(t=!0);else if(o.builderType==="ProjectStatement")(e.builderType==="AgentStatement"||e.builderType==="SchemaStatement"||e.builderType==="ApiStatement"||e.builderType==="SeedStatement"||e.builderType==="PageStatement"||e.builderType==="CodeStatement")&&(t=!0);else if(o.builderType==="BranchStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="PromptStatement")e.builderType==="LineStatement"&&(t=!0);else if(o.builderType==="InvokeStatement")(e.builderType==="PromptStatement"||e.builderType==="AwaitStatement")&&(t=!0);else if(o.builderType==="AgentStatement"){(e.builderType==="ParamStatement"||e.builderType==="ReturnStatement")&&(t=!0);let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="ActionStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="AwaitStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}else if(o.builderType==="CallStatement")e.builderType==="AwaitStatement"&&(t=!0);else if(o.builderType==="DispatchStatement"){let i=this.getNEXT();for(let n of i.getChildren())if(n.tokenType===e.tokenType){t=!0;break}}return t}clone(o){let e=new U;if(o.builderType==="PlanStatement"){let t=new He,i=o;return t.key=i.key,t}else if(o.builderType==="AgentStatement"){let t=new Ke,i=o;return t.key=i.key,t}else if(o.builderType==="DeclareStatement"){let t=new De,i=o;return t.key=i.key,t.type=i.type,t.foreignType=i.foreignType,t.expression=i.expression,t}else if(o.builderType==="AssignStatement"){let t=new Ti,i=o;return t.key=i.key,t.parameters=i.parameters,t.assignType=i.assignType,t.expression=i.expression,t}else if(o.builderType==="IfStatement"){let t=new st,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="ThenStatement"){let t=new Ye,i=o;return t}else if(o.builderType==="ElseIfStatement"){let t=new Ue,i=o;return t.expression=i.expression,t}else if(o.builderType==="ElseStatement"){let t=new Ge,i=o;return t}else if(o.builderType==="InStatement"){let t=new Ei,i=o;return t.key=i.key,t.label=i.label,t}else if(o.builderType==="PickStatement"){let t=new ve,i=o;return t.key=i.key,t}else if(o.builderType==="SubStatement"){let t=new ye,i=o;return t.key=i.key,t}else if(o.builderType==="ChildStatement"){let t=new bi,i=o;return t.key=i.key,t}else if(o.builderType==="InfantStatement"){let t=new Vi,i=o;return t.key=i.key,t}else if(o.builderType==="OutStatement"){let t=new Pi,i=o;return t.key=i.key,t.parameters=i.parameters,t.outType=i.outType,t.expression=i.expression,t}else if(o.builderType==="RemStatement"){let t=new Fi,i=o;return t.expression=i.expression,t}else if(o.builderType==="SwitchStatement"){let t=new lt,i=o;return t.key=i.key,t}else if(o.builderType==="CaseStatement"){let t=new Qe,i=o;return t.expression=i.expression,t}else if(o.builderType==="DefaultStatement"){let t=new je,i=o;return t}else if(o.builderType==="ForStatement"){let t=new wi,i=o;return t.key=i.key,t.start=i.start,t.increment=i.increment,t.expression=i.expression,t}else if(o.builderType==="ForEachStatement"){let t=new Si,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="WhileStatement"){let t=new Ci,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="DoStatement"){let t=new ki,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="CallStatement"){let t=new vt,i=o;return t.key=i.key,t.toKey=i.toKey,t.parameters=i.parameters,t.agentType=i.agentType,t}else if(o.builderType==="PromptStatement"){let t=new Xe,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="LineStatement"){let t=new ze,i=o;return t.role=i.role,t.declares=i.declares,t.expression=i.expression,t.score=i.score,t}else if(o.builderType==="InvokeStatement"){let t=new xt,i=o;return t.key=i.key,t.apiKey=i.apiKey,t.botType=i.botType,t.outType=i.outType,t.modelName=i.modelName,t.endPoint=i.endPoint,t.histories=i.histories,t.prompts=i.prompts,t}else if(o.builderType==="ProjectStatement"){let t=new zi,i=o;return t.key=i.key,t}else if(o.builderType==="SchemaStatement"){let t=new Ne,i=o;return t.key=i.key,t}else if(o.builderType==="TableStatement"){let t=new Oe,i=o;return t.key=i.key,t.plural=i.plural,t}else if(o.builderType==="ColumnStatement"){let t=new qe,i=o;return t.key=i.key,t.type=i.type,t.annotation=i.annotation,t.foreignType=i.foreignType,t}else if(o.builderType==="EnumStatement"){let t=new ct,i=o;return t.key=i.key,t}else if(o.builderType==="ValueStatement"){let t=new pt,i=o;return t.key=i.key,t.content=i.content,t}else if(o.builderType==="SeedStatement"){let t=new dt,i=o;return t.key=i.key,t.schemaKey=i.schemaKey,t.recordsCount=i.recordsCount,t}else if(o.builderType==="RecordStatement"){let t=new ut,i=o;return t.key=i.key,t.tableKey=i.tableKey,t}else if(o.builderType==="FieldStatement"){let t=new mt,i=o;return t.key=i.key,t.content=i.content,t.type=i.type,t.foreignType=i.foreignType,t}else if(o.builderType==="ApiStatement"){let t=new et,i=o;return t.key=i.key,t.schemaKey=i.schemaKey,t.links=i.links,t}else if(o.builderType==="RouteStatement"){let t=new Ze,i=o;return t.key=i.key,t.path=i.path,t.verb=i.verb,t.tableKey=i.tableKey,t.requestKeys=i.requestKeys,t.responseKeys=i.responseKeys,t.payloadKeys=i.payloadKeys,t.orderBy=i.orderBy,t.responseType=i.responseType,t.searchRoute=i.searchRoute,t.agentRoute=i.agentRoute,t.navRoutes=i.navRoutes,t.filterRoutes=i.filterRoutes,t.providerRoutes=i.providerRoutes,t.childRoutes=i.childRoutes,t}else if(o.builderType==="DesignStatement"){let t=new gt,i=o;return t.key=i.key,t.schemaKey=i.schemaKey,t.apiKey=i.apiKey,t}else if(o.builderType==="PageStatement"){let t=new rt,i=o;return t.key=i.key,t.pageType=i.pageType,t.routeKey=i.routeKey,t.tableKey=i.tableKey,t.displayType=i.displayType,t.idKeys=i.idKeys,t.headerKeys=i.headerKeys,t.imageKeys=i.imageKeys,t.contentKeys=i.contentKeys,t.footerKeys=i.footerKeys,t.pickerKeys=i.pickerKeys,t.rangeKeys=i.rangeKeys,t.inputKeys=i.inputKeys,t.booleanKeys=i.booleanKeys,t.textKeys=i.textKeys,t.toggleKeys=i.toggleKeys,t.selectKeys=i.selectKeys,t.dateKeys=i.dateKeys,t.navPages=i.navPages,t.searchPage=i.searchPage,t.filterPages=i.filterPages,t.providerPages=i.providerPages,t.components=i.components,t.agentPages=i.agentPages,t}else if(o.builderType==="CodeStatement"){let t=new _t,i=o;return t.key=i.key,t}else if(o.builderType==="FolderStatement"){let t=new tt,i=o;return t.key=i.key,t}else if(o.builderType==="FileStatement"){let t=new ht,i=o;return t.key=i.key,t.content=i.content,t}else if(o.builderType==="ParamStatement"){let t=new it,i=o;return t.key=i.key,t.type=i.type,t.foreignType=i.foreignType,t.expression=i.expression,t}else if(o.builderType==="ReturnStatement"){let t=new nt,i=o;return t.key=i.key,t.expression=i.expression,t}else if(o.builderType==="BranchStatement"){let t=new oe,i=o;return t.key=i.key,t}else if(o.builderType==="HistoryStatement"){let t=new Je,i=o;return t.key=i.key,t}else if(o.builderType==="EventStatement"){let t=new Ki,i=o;return t.key=i.key,t}else if(o.builderType==="DispatchStatement"){let t=new Ct,i=o;return t.fromKey=i.fromKey,t.toKey=i.toKey,t}else if(o.builderType==="ActionStatement"){let t=new Bi,i=o;return t.key=i.key,t}else if(o.builderType==="AwaitStatement"){let t=new Mi,i=o;return t.key=i.key,t}else if(o.builderType==="EndStatement"){let t=new Wi,i=o;return t.fromKey=i.fromKey,t.comment=i.comment,t}else if(o.builderType==="LinkStatement"){let t=new Le,i=o;return t.fromKey=i.fromKey,t.toKey=i.toKey,t.type=i.type,t.toType=i.toType,t.x=i.x,t.y=i.y,t.w=i.w,t.h=i.h,t.where=i.where,t.name=i.name,t.content=i.content,t}else if(o.builderType==="PairStatement"){let t=new Ai,i=o;return t.key=i.key,t.expression=i.expression,t.type=i.type,t}return e}},We=new fn;var el=r=>({active:r}),tl=r=>({backgroundColor:r}),il=r=>({marginLeft:r});function nl(r,o){if(r&1){let e=g();p(0,"button",4),v("click",function(i){return _(e),s().onToggle(),h(i.stopPropagation())}),x(1),d()}if(r&2){let e=s();m(),q(e.data.isExpanded?"-":"+")}}function rl(r,o){if(r&1){let e=g();p(0,"ast-item",6),v("itemChanged",function(i){_(e);let n=s(2);return h(n.setChild(i))})("crud",function(i){_(e);let n=s(2);return h(n.crud.emit(i))}),d()}if(r&2){let e=o.$implicit,t=s(2);w("data",e)("parent",t.data)("current",t.current)("level",t.level+1)}}function al(r,o){if(r&1&&T(0,rl,1,4,"ast-item",5,b),r&2){let e=s();E(e.data.getChildren())}}var zr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this.data&&this.data.isExpanded&&this.data.parent&&(this.data.parent.isExpanded=!0,this.data.parent.parent&&(this.data.parent.parent.isExpanded=!0)),this.parent&&this.data.isExpanded&&(this.parent.isExpanded=!0)}get level(){return this._level}set level(t){this._level=t,this.margin=1+t*10}constructor(){this._data=new U,this.parent=null,this._level=0,this.current=null,this.itemChanged=new Q,this.crud=new Q,this.margin=1}trackByFn(t,i){return i.id||t}onToggle(){this.data.isExpanded=!this.data.isExpanded}setCurrent(t){t.needsEnd&&(t.isExpanded=!t.isExpanded),this.itemChanged.emit(t)}setChild(t){this.itemChanged.emit(t)}cloneAndAdd(t){t.stopPropagation(),t.preventDefault();var i=We.clone(this.data);if(i){if(i.id=fe.newid(),this.data.parent&&i){var n=this.data.parent.getChildren().indexOf(this.data);n>=0?(this.data.parent.insertChild(n+1,i),this.crud.emit(i)):alert("Could not find parent")}else if(this.parent){var n=this.parent.getChildren().indexOf(this.data);n>=0?(this.parent.insertChild(n+1,i),this.crud.emit(i)):alert("Could not find parent")}}}dragStart(t){if(!t||!t.target||!t.dataTransfer)return;t.stopPropagation();let i=t.target,n=i.getAttribute("data-id"),a=i.getAttribute("data-type");t.dataTransfer.setData("text/plain",n),t.dataTransfer.setData("application/fusion-web",a),t.dataTransfer.effectAllowed="move",t.target instanceof HTMLElement&&t.target.classList.add("dragging")}dragOver(t){t.preventDefault(),t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-enter"),t.target.classList.add("drag-over"))}dragEnter(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-over"),t.target.classList.add("drag-enter"))}dragLeave(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-enter"),t.target.classList.add("drag-leave"))}dragEnd(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-over"),t.target.classList.remove("drag-enter"),t.target.classList.remove("drag-leave"),t.target.classList.remove("dragging"))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["ast-item"]],inputs:{data:"data",parent:"parent",level:"level",current:"current"},outputs:{itemChanged:"itemChanged",crud:"crud"},standalone:!0,features:[X],decls:6,vars:18,consts:[[1,"itm",3,"click","dragstart","dragleave","dragenter","dragover","dragend","ngClass","draggable"],[1,"itm-sliver",3,"ngStyle"],[1,"itm-content",3,"dblclick","ngStyle"],[1,"toggle"],[1,"toggle",3,"click"],[3,"data","parent","current","level"],[3,"itemChanged","crud","data","parent","current","level"]],template:function(i,n){i&1&&(p(0,"div",0),v("click",function(){return n.setCurrent(n.data)})("dragstart",function(c){return n.dragStart(c)})("dragleave",function(c){return n.dragLeave(c)})("dragenter",function(c){return n.dragEnter(c)})("dragover",function(c){return n.dragOver(c)})("dragend",function(c){return n.dragEnd(c)}),Z(1,"div",1),p(2,"div",2),v("dblclick",function(c){return n.cloneAndAdd(c)}),x(3),d(),O(4,nl,2,1,"button",3),d(),O(5,al,2,0)),i&2&&(w("ngClass",Oi(12,el,n.current===n.data))("draggable",!0),P("id",n.data.id)("data-id",n.data.id)("data-type",n.data.tokenType),m(),w("ngStyle",Oi(14,tl,n.data.shape.fill)),m(),w("ngStyle",Oi(16,il,n.margin+"px")),m(),Pr("",n.data.tokenType," ",n.data.first()," ",n.data.second(),""),m(),N(n.data.getChildren().length>0?4:-1),m(),N(n.data.isExpanded?5:-1))},dependencies:[o,J,Ri,Li],encapsulation:2});let r=o;return r})();var yn=class{constructor(){this.codeLanguage="csharp"}setLanguage(o){this.codeLanguage=o}execute(o,e,t,i){this.setLanguage(t),i.AppendLine("import { ApiStatement } from 'src/app/models/ApiStatement';"),i.AppendLine("import { AssignStatement } from 'src/app/models/AssignStatement';"),i.AppendLine("import { AstStatement } from 'src/app/models/AstStatement';"),i.AppendLine("import { ColumnStatement } from 'src/app/models/ColumnStatement';"),i.AppendLine("import { CrumbStatement } from 'src/app/models/CrumbStatement';"),i.AppendLine("import { DeclareStatement } from 'src/app/models/DeclareStatement';"),i.AppendLine("import { DesignStatement } from 'src/app/models/DesignStatement';"),i.AppendLine("import { DispatchStatement } from 'src/app/models/DispatchStatement';"),i.AppendLine("import { ElseStatement } from 'src/app/models/ElseStatement';"),i.AppendLine("import { EnumStatement } from 'src/app/models/EnumStatement';"),i.AppendLine("import { FieldStatement } from 'src/app/models/FieldStatement';"),i.AppendLine("import { FilterStatement } from 'src/app/models/FilterStatement';"),i.AppendLine("import { AgentStatement } from 'src/app/models/AgentStatement';"),i.AppendLine("import { HistoryStatement } from 'src/app/models/HistoryStatement';"),i.AppendLine("import { IfStatement } from 'src/app/models/IfStatement';"),i.AppendLine("import { InStatement } from 'src/app/models/InStatement';"),i.AppendLine("import { InvokeStatement } from 'src/app/models/InvokeStatement';"),i.AppendLine("import { LineStatement } from 'src/app/models/LineStatement';"),i.AppendLine("import { OptionStatement } from 'src/app/models/OptionStatement';"),i.AppendLine("import { OutStatement } from 'src/app/models/OutStatement';"),i.AppendLine("import { PageStatement } from 'src/app/models/PageStatement';"),i.AppendLine("import { ProjectStatement } from 'src/app/models/ProjectStatement';"),i.AppendLine("import { PromptStatement } from 'src/app/models/PromptStatement';"),i.AppendLine("import { QueryStatement } from 'src/app/models/QueryStatement';"),i.AppendLine("import { RecordStatement } from 'src/app/models/RecordStatement';"),i.AppendLine("import { RenderStatement } from 'src/app/models/RenderStatement';"),i.AppendLine("import { RequestStatement } from 'src/app/models/RequestStatement';"),i.AppendLine("import { ResponseStatement } from 'src/app/models/ResponseStatement';"),i.AppendLine("import { RouteStatement } from 'src/app/models/RouteStatement';"),i.AppendLine("import { SchemaStatement } from 'src/app/models/SchemaStatement';"),i.AppendLine("import { SearchStatement } from 'src/app/models/SearchStatement';"),i.AppendLine("import { SeedStatement } from 'src/app/models/SeedStatement';"),i.AppendLine("import { TableStatement } from 'src/app/models/TableStatement';"),i.AppendLine("import { ThenStatement } from 'src/app/models/ThenStatement';"),i.AppendLine("import { ValueStatement } from 'src/app/models/ValueStatement';"),i.AppendLine("import { WhileStatement } from 'src/app/models/WhileStatement';"),i.AppendLine(`export class ${e.tokenType}${e.first()} {`),i.AppendLine("  constructor() {}"),i.AppendLine("  public generate(): Array<AstStatement> {"),i.AppendLine("    const asts = new Array<AstStatement>();"),this.recurse(o,e,t,i,0),i.AppendLine("    return asts;"),i.AppendLine("  }"),i.AppendLine("}")}recurse(o,e,t,i,n=0){let a=e.tokenType.toLowerCase()+e.first().replaceAll(" ","").toLowerCase()+"mnt";i.AppendLine(o+` var ${a} = new ${e.builderType}();`);var c=e.keyValue();for(var l of c){let y=fe.getTs(l.key);if(l.type==="Keys"){let k="";if(l.value&&l.value.length>0)for(var u of l.value?.split(","))k+=`'${u}',`;i.AppendLine(o+` ${a}.${y} = [${k}];`)}else i.AppendLine(o+` ${a}.${y} = '${l.value}';`)}n===0&&i.AppendLine(o+` asts.push(${a});`);var f=e.getChildren();for(var C of f){this.recurse(o+"  ",C,t,i,n+1);let y=C.tokenType.toLowerCase()+C.first().replaceAll(" ","").toLowerCase()+"mnt";i.AppendLine(o+` ${a}.addChild(${y});`)}return i.toString()}},vn=new yn;var ol=["groupchipdialog"];function sl(r,o){if(r&1){let e=g();p(0,"ast-item",25),v("itemChanged",function(i){_(e);let n=s();return h(n.setCurrent(i))})("crud",function(i){_(e);let n=s();return h(n.crud(i))}),d()}if(r&2){let e=s();w("data",e.data())("current",e.current())("level",0)}}function ll(r,o){if(r&1&&(p(0,"div"),x(1,"ADD NEXT TO"),d(),p(2,"div"),x(3),d()),r&2){s();let e=re(15);m(3),q(e.tokenType)}}function cl(r,o){if(r&1){let e=g();p(0,"button",27),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.add(i))}),p(1,"div"),x(2),d(),p(3,"div"),x(4,"+"),d()()}if(r&2){let e=o.$implicit;m(2),q(e)}}function pl(r,o){if(r&1&&T(0,cl,5,1,"button",26,b),r&2){s();let e=re(15);E(e.nexts)}}function dl(r,o){if(r&1){let e=g();p(0,"button",28),v("click",function(i){_(e);let n=s();return h(n.openDialog(i))}),p(1,"span",5),x(2,"launch"),d()(),p(3,"textarea",29),D("ngModelChange",function(i){_(e),s();let n=re(15);return M(n.source,i)||(n.source=i),h(i)}),d(),p(4,"button",30),v("click",function(){_(e);let i=s();return h(i.submited())}),p(5,"span",5),x(6,"sync_alt"),d()()}if(r&2){s();let e=re(15);w("title","open dialog for editing"),m(3),w("rows",2),F("ngModel",e.source),w("spellcheck",!1),m(),w("title","save changes")}}function ul(r,o){if(r&1){let e=g();p(0,"div",14)(1,"div",17)(2,"div"),x(3),d(),Z(4,"div"),p(5,"button",18),v("click",function(){_(e);let i=s();return h(i.closeDialog())}),p(6,"span",19),x(7,"close"),d()()(),Z(8,"div",20),p(9,"div",31)(10,"textarea",29),D("ngModelChange",function(i){_(e),s();let n=re(15);return M(n.source,i)||(n.source=i),h(i)}),d()(),p(11,"div",23)(12,"button",24),v("click",function(){_(e);let i=s();return h(i.exportFile())}),x(13," save and close "),p(14,"span",19),x(15,"save"),d()()()()}if(r&2){s();let e=re(15);m(3),V("edit ",e.tokenType,""),m(2),w("title","close without saving"),m(5),w("rows",62),F("ngModel",e.source),w("spellcheck",!1),m(2),w("title","save and close")}}function ml(r,o){if(r&1){let e=g();p(0,"div",33)(1,"button",37),v("click",function(){_(e);let i=s(3);return h(i.doConfirm())}),p(2,"span",5),x(3,"recommend"),d()(),p(4,"button",38),v("click",function(){_(e);let i=s(3);return h(i.askUserConfirm=!1)}),p(5,"span",5),x(6,"cancel"),d()()()}}function _l(r,o){if(r&1){let e=g();p(0,"div",39),v("click",function(){_(e);let i=s(3);return h(i.doConfirm())}),p(1,"button",40)(2,"span",5),x(3,"delete"),d()()()}r&2&&(m(),w("title","do you want to delete?"))}function hl(r,o){if(r&1){let e=g();p(0,"button",27),v("click",function(){let i=_(e).$implicit,n=s(3);return h(n.wrapCurrentIn(i))}),p(1,"div"),x(2),d(),p(3,"div"),x(4,"+"),d()()}if(r&2){let e=o.$implicit;m(2),q(e.tokenType)}}function fl(r,o){if(r&1){let e=g();p(0,"div",16)(1,"div",17)(2,"div"),x(3),d(),Z(4,"div"),O(5,ml,7,0,"div",33)(6,_l,4,1,"div"),d(),p(7,"div",34)(8,"div",35),T(9,hl,5,1,"button",26,Zi),d()(),p(11,"div",23)(12,"button",36),v("click",function(){_(e);let i=s(2);return h(i.isContextMenuVisible.set(!1))}),p(13,"span",5),x(14,"close"),d()()()()}if(r&2){s();let e=re(0),t=s();Er(t.menu()),m(3),V("wrap ",e.tokenType," inside a"),m(2),N(t.askUserConfirm?5:6),m(4),E(t.wrappers)}}function yl(r,o){if(r&1&&(Ce(0),O(1,fl,15,4,"div",32)),r&2){let e=s(),t=ge(e.current()?e.current():void 0);m(),N(t?1:-1)}}var fH=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.h=L.required(),this.itemChanged=new Q,this.rootUpdated=new Q,this.sourceChanged=Ae(),this.flatt=[],this.converted="",this.tokenType="",this.menu=me(()=>({display:this.isContextMenuVisible()?"block":"none",position:"absolute",left:this.cntextMenu().x+"px",top:this.cntextMenu().y+"px",width:"200px",backgroundColor:"var(--tertiary-color)",color:"var(--text-color)",borderRadius:"var(--corner-radius)",borderStyle:"solid",borderWidth:"4px",borderColor:"var(--text-color)",paddingTop:"10px",boxShadow:"var(--shadow)",height:"300px"})),this.cntextMenu=R({x:0,y:0}),this.askUserConfirm=!1,this.isContextMenuVisible=R(!1),this.wrappers=new Array,un(()=>{this.data()}),un(()=>{if(this.current()){let t=this.current()?this.current():void 0;t&&(t.source=rn.convert(t),this.data()!==t&&this.scrollToCurrent(t))}})}ngAfterViewInit(){this.element&&(this.dialog=this.element.nativeElement)}execute(t){var i=new qi;let n=this.current();return n?(this.tokenType=n.tokenType.toString()+n.first(),vn.execute("   ",n,t,i)):(this.tokenType=this.data().tokenType.toString()+this.data().first(),vn.execute("   ",this.data(),t,i)),this.converted=i.toString(),i.toString()}importFile(){return W(this,null,function*(){let[t]=yield window.showOpenFilePicker({types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}],excludeAcceptAllOption:!0,multiple:!1}),n=yield(yield t.getFile()).text(),a=this.current();return a?a.source=n:this.data().source=n,n})}exportGeneratedFile(){return W(this,null,function*(){yield this.save(this.tokenType,this.converted)})}exportFile(){return W(this,null,function*(){let t=this.current(),i=t?t.tokenType+""+t.first():this.data().tokenType+""+this.data().first(),n=t?t.source:this.data().source;yield this.save(i,n)})}save(t,i){return W(this,null,function*(){let n=t.replace(" ","")+".txt";if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){let c={suggestedName:n,startIn:"desktop",types:[{description:"Text file",accept:{"text/plain":[".txt"]}}]},u=yield(yield window.showSaveFilePicker(c)).createWritable();yield u.write(i),yield u.close()}else{let c="data:text/plain;charset=utf-8,"+encodeURIComponent(i),l=document.createElement("a");l.setAttribute("href",c),l.setAttribute("download",n),l.click()}})}crud(t){this.rootUpdated.emit({root:this.data(),crnt:t})}wrapCurrentIn(t){let i=this.current();if(!i)return;let n=i.parent;if(n){let a=n.getChildren().indexOf(i);a>=0&&(n.removeChild(i),t.addChild(i),n.insertChild(a,t),this.rootUpdated.emit({root:this.data(),crnt:t}))}this.isContextMenuVisible.set(!1)}doConfirm(){if(!this.askUserConfirm)this.askUserConfirm=!0;else{this.askUserConfirm=!1;let t=this.current();t&&t.parent&&(t.parent.removeChild(t),this.rootUpdated.emit({root:this.data(),crnt:t.parent}))}}closeIfEscape(t){this.isContextMenuVisible.set(!1)}onContextMenu(t){t.stopPropagation(),t.preventDefault();let i=this.current();if(this.wrappers=[],i){let a=We.getNext(i).getChildren();if(a?.length)for(let c of a)c.needsEnd&&this.wrappers.push(c);else if(i.parent){let c=We.getNext(i.parent).getChildren();if(c?.length)for(let l of c)l.needsEnd&&this.wrappers.push(l)}}let n=100;t.clientX+200>window.innerWidth&&(n=t.clientX-200),this.cntextMenu.set({x:n,y:t.clientY}),this.isContextMenuVisible.set(!0)}dropped(t){if(t.preventDefault(),!t.dataTransfer)return;let i=t.dataTransfer?.getData("text/plain"),n=t.dataTransfer?.getData("application/fusion-web"),a=t.target;for(;a&&!a.getAttribute("data-id");)a=a.parentElement;if(!i||!n){alert("Invalid Drag");return}let c=a?a.getAttribute("data-id"):null,l=a?a.getAttribute("data-type"):null,u=this.data().flatten(),f=u.find(y=>y.id===i&&y.tokenType===n),C=u.find(y=>y.id===c&&y.tokenType===l);if(f&&C){let y=f.parent,B=C.parent;if(y&&B)if(y===B){let k=y.getChildren().indexOf(f),A=B.getChildren().indexOf(C);k>=0&&A>=0?(y.removeChild(f),y.insertChild(A,f)):alert("Invalid Drag")}else y.removeChild(f),C.addChild(f);this.rootUpdated.emit({root:this.data(),crnt:C})}}setCurrent(t){t&&(this.ast=t,t.source=rn.convert(t),this.isContextMenuVisible.set(!1),this.itemChanged.emit(t))}scrollToCurrent(t){if(this.ast===t)return;let i=t.id,n=document.querySelector(".vanilla-middle");if(n){let a=n.querySelector(`[data-id="${i}"]`);if(a){let c=a.getBoundingClientRect(),l=n.getBoundingClientRect(),u=n.scrollTop,f=c.top-l.top+u;n.scrollTo({top:f,behavior:"smooth"})}}}add(t){return W(this,null,function*(){if(!t)return;let i=We.getStatement(t),n=this.current();if(n){if(n&&i)if(n.needsEnd){let a=n.parent;if(a){let c=a.getChildren().indexOf(n);if(c>=0){let l=We.clone(i);if(!l){alert(t+" !ccloned "+c);return}l.id=fe.newid();let u=l.keyValue();for(let C=0;C<u.length;C++){let y=u[C];y.value=""}l.updateKevValue(u),l.parent=n;let f=n.insertChild(c+1,l);alert(f+"  insertChild "+t+" at "+c),this.rootUpdated.emit({root:this.data(),crnt:l})}}else{alert(t+" bbb ");let c=We.clone(i),l=c.keyValue();for(let u=0;u<l.length;u++){let f=l[u];f.value=""}c.updateKevValue(l),c.id=fe.newid(),c.parent=n,n.addChild(c),this.rootUpdated.emit({root:this.data(),crnt:c})}}else{let a=n.parent;if(a){let c=a?.getChildren().indexOf(n);if(c&&c>=0){let l=We.clone(i),u=l.keyValue();for(let f=0;f<u.length;f++){let C=u[f];C.value=""}l.parent=a,l.updateKevValue(u),a?.insertChild(c+1,l),this.rootUpdated.emit({root:this.data(),crnt:l})}}else{alert(t+" When Do I come here ");let c=We.clone(i),l=c.keyValue();for(let u=0;u<l.length;u++){let f=l[u];f.value=""}c.updateKevValue(l),c.parent=n,n.addChild(c),this.rootUpdated.emit({root:this.data(),crnt:c})}}this.requestUpdate(),this.data().isExpanded=!0,this.flatten()}})}requestUpdate(){}closeDialog(){return W(this,null,function*(){this.dialog&&this.dialog.close()})}dragover(t){t.stopPropagation()}openDialog(t){t.stopPropagation(),t.preventDefault(),this.dialog&&this.dialog.showModal()}submited(){return W(this,null,function*(){this.dialog&&this.dialog.close();let t=this.current();if(t||(t=this.data()),t===this.data())this.sourceChanged.emit(t.source),alert("root");else{let i=t.source,n=Or.tokenize(i);if(!n.length){t.parent&&(t.parent.removeChild(t),this.rootUpdated.emit({root:this.data(),crnt:t.parent}),alert("deleted"));return}try{let a=Ar.parse(n);if(!a.length){alert("no asts");return}if(n.length===1){let c=a[0];t.updateKevValue(c.keyValue()),t.source=rn.convert(t),this.rootUpdated.emit({root:this.data(),crnt:t}),alert("updated")}else{let c=t.parent;if(c){c.removeChild(t);for(let l of a)l.parent=c,c.addChild(l);this.rootUpdated.emit({root:this.data(),crnt:c}),alert("updated"+a.length)}else alert("no parent not implemented")}}catch(a){alert(a)}}})}flatten(){if(this.data){this.flatt=this.data().flatten();for(let t of this.data().getChildren())t.parent=this.data();for(let t of this.flatt)t.isExpanded=!1;this.data().isExpanded=!0}}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["vanilla-builder"]],viewQuery:function(i,n){if(i&1&&Vr(ol,5),i&2){let a;en(a=tn())&&(n.element=a.first)}},hostBindings:function(i,n){i&1&&v("keydown.escape",function(c){return n.closeIfEscape(c)},!1,Tr)},inputs:{data:[1,"data"],current:[1,"current"],h:[1,"h"]},outputs:{itemChanged:"itemChanged",rootUpdated:"rootUpdated",sourceChanged:"sourceChanged"},standalone:!0,features:[X],decls:45,vars:14,consts:[["groupchipdialog",""],["csharpdialog",""],[1,"vanilla-builder","form",3,"contextmenu"],[1,"vanilla-header"],[1,"run",3,"click"],[1,"small-icon"],[1,"span"],[1,"vanilla-middle"],[3,"drop"],[3,"data","current","level"],[1,"vanilla-bottom"],[1,"token-adds"],[1,"adds"],[1,"textareawithbutton","form"],[1,"dialogcard"],[1,"el9"],[1,"dialogcard","form"],[1,"dialogcard-header"],[1,"closedialog",3,"click","title"],[1,"icon"],[1,"dialogcard-toolbar"],[1,"dialogcard-body"],["autofocus","true","autocomplete","off","autocapitalize","off",3,"rows","value","spellcheck"],[1,"dialogcard-footer"],[1,"image-btn",3,"click","title"],[3,"itemChanged","crud","data","current","level"],[1,"addtoken"],[1,"addtoken",3,"click"],[1,"opendialog",3,"click","title"],["autofocus","true","autocomplete","off","autocapitalize","off",3,"ngModelChange","rows","ngModel","spellcheck"],[1,"gobtn",3,"click","title"],["form","",1,"dialogcard-body"],[1,"dialogcard","form",3,"style"],[1,"row"],[1,"dialogcard-body",2,"height","215px"],[1,"tiles","padded"],[1,"image-btn",3,"click"],[1,"circle","red","col",3,"click"],[1,"circle","green","col",3,"click"],[3,"click"],[1,"circle",3,"title"]],template:function(i,n){if(i&1){let a=g();p(0,"div",2),v("contextmenu",function(l){return _(a),h(n.onContextMenu(l))}),p(1,"div",3)(2,"button",4),v("click",function(){return _(a),h(n.importFile())}),p(3,"span",5),x(4,"file_open"),d()(),p(5,"button",4),v("click",function(){return _(a),h(n.exportFile())}),p(6,"span",5),x(7,"save"),d()(),p(8,"button",4),v("click",function(){_(a);let l=nn(28);return h(l.showModal())}),p(9,"span",6),x(10,"c#"),d()()(),p(11,"div",7)(12,"div",8),v("drop",function(l){return _(a),h(n.dropped(l))}),O(13,sl,1,3,"ast-item",9),d()(),p(14,"div",10),Ce(15),p(16,"div",11)(17,"div"),O(18,ll,4,1),d(),p(19,"div",12),O(20,pl,2,0),d()(),p(21,"div",13),O(22,dl,7,5),d()(),p(23,"dialog",null,0),O(25,ul,16,6,"div",14),d(),O(26,yl,2,2),d(),p(27,"dialog",15,1)(29,"div",16)(30,"div",17)(31,"div"),x(32,"Generated C#"),d(),Z(33,"div"),p(34,"button",18),v("click",function(){_(a);let l=nn(28);return h(l.close())}),p(35,"span",19),x(36,"close"),d()()(),Z(37,"div",20),p(38,"div",21),Z(39,"textarea",22),d(),p(40,"div",23)(41,"button",24),v("click",function(){_(a);let l=nn(28);return n.exportGeneratedFile(),h(l.close())}),x(42," save and close "),p(43,"span",19),x(44,"save"),d()()()()()}if(i&2){j("height",n.h(),"px"),m(13),N(n.data()&&n.data().getChildren().length>0?13:-1),m(2);let a=ge(n.current()?n.current():void 0);m(3),N(a?18:-1),m(2),N(a?20:-1),m(2),N(a?22:-1),m(3),N(a?25:-1),m(),N(n.isContextMenuVisible()?26:-1),m(8),w("title","close without saving"),m(5),w("rows",56)("value",n.execute("c#"))("spellcheck",!1),m(2),w("title","save and close")}},dependencies:[ee,le,ce,pe,zr],styles:['.vanilla-builder[_ngcontent-%COMP%]{display:grid;grid-template-rows:max-content 290px auto;height:91%;gap:3px;width:100%;overflow:hidden;grid-template-areas:"vanilla-header" "vanilla-middle" "vanilla-bottom"}.vanilla-header[_ngcontent-%COMP%]{grid-area:vanilla-header;display:flex;margin-top:3px;margin-left:5px;gap:3px;justify-content:flex-start;flex-direction:row;flex-wrap:nowrap}.vanilla-middle[_ngcontent-%COMP%]{grid-area:vanilla-middle;overflow-y:scroll;margin-left:5px;overflow-x:hidden;padding-right:6px}.vanilla-bottom[_ngcontent-%COMP%]{grid-area:vanilla-bottom;overflow:hidden;display:grid;grid-template-rows:100px auto;row-gap:7px;border-style:none;padding-bottom:1px;padding-top:1px}.token-adds[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px auto;font-size:15px;margin-left:10px;margin-right:10px;padding-left:5px;border-style:solid;border-color:var(--tertiary-color);border-width:2px;overflow-y:auto;overflow-x:hidden;align-content:space-evenly;align-items:center}.textareawithbutton[_ngcontent-%COMP%]{display:grid;grid-template-columns:21px auto 21px;padding-top:2px;font-size:15px;margin-bottom:31px}.gobtn[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;width:25px;height:25px;margin-right:2px;margin-top:2px;background-color:green;color:#fff;text-align:center}.gobtn[_ngcontent-%COMP%]:hover{background-color:#000}.gobtn[_ngcontent-%COMP%]:active{background-color:red}.opendialog[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;width:25px;height:25px;margin-right:2px;margin-top:2px;background-color:green;color:var(--text-color);text-align:center}.opendialog[_ngcontent-%COMP%]:hover{background-color:#000}.opendialog[_ngcontent-%COMP%]:active{background-color:red}.closedialog[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;width:25px;height:25px;margin-right:2px;margin-top:2px;background-color:red;color:#fff;text-align:center}.opendialog[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#fff;font-size:20px}.run[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;margin-bottom:6px;background-color:green;text-align:center}.run[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.stop[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;margin-bottom:6px;background-color:red;text-align:center}.stop[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.adds[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:2px;overflow:hidden;flex-wrap:wrap;align-content:center}.addtoken[_ngcontent-%COMP%]{display:flex;grid-template-columns:auto 22px;border-style:solid;border-color:var(--focus-color);border-radius:var(--corner-radius);border-width:2px;font-size:13px;padding:2px;margin:1px;cursor:pointer}dialog[_ngcontent-%COMP%]{left:20%;width:80%!important;top:5%}']});let r=o;return r})();var wt=(()=>{let o=class o{constructor(){this.agents=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.planstatement=new He}setAgents(t){this.agents=t}getAgents(){let t=[];for(let i of this.agents)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.agents||[];return[new $({key:"Key",value:i,label:"Key",description:"unique name, which can be referenced as #key#",type:"UniqueKey",required:!0,order:1}),new $({key:"Agents",value:"ObjectTypes",label:"Agents",description:"A Collection of various Agents ",type:"ObjectTypes",required:!0,order:2,options:[...this.getAgents()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.planstatement.key=this.createdElements[0].value,this.planstatement}initialize(t){if(this.agents=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof Ke&&this.agents.push(n)}}toElements(t){this.planstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function vl(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function xl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function gl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Cl(r,o){if(r&1&&(p(0,"div",7),T(1,gl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function wl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Sl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function kl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Tl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function El(r,o){if(r&1&&(p(0,"div",7),T(1,Tl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function bl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Vl(r,o){if(r&1&&(p(0,"div",7),T(1,bl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Pl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Fl(r,o){if(r&1&&(p(0,"div",7),T(1,Pl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ml(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Dl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Il(r,o){if(r&1&&(p(0,"div",7),T(1,Dl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Nr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["planstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([wt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,vl,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,xl,1,5,"input",6)(12,Cl,3,0,"div",7)(13,wl,1,5,"input",6)(14,Sl,1,5,"input",6)(15,kl,1,5,"input",6)(16,El,3,0,"div",7)(17,Vl,3,0,"div",7)(18,Fl,3,0,"div",7)(19,Ml,1,4,"textarea",8)(20,Il,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var St=(()=>{let o=class o{constructor(){this.params=[],this.returns=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.agentstatement=new Ke}setParams(t){this.params=t}getParams(){let t=[];for(let i of this.params)t.push(new ae(i.key,i.key,"UniqueKey",i.foreignType,""));return t}setReturns(t){this.returns=t}getReturns(){let t=[];for(let i of this.returns)t.push(new ae(i.key,i.key,"UniqueKey",i.expression,""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.params||[],a=t?.returns||[];return[new $({key:"Key",value:i,label:"Key",description:"unique name, which can be referenced as #key#",type:"UniqueKey",required:!0,order:1}),new $({key:"Params",value:"ObjectTypes",label:"Params",description:"",type:"ObjectTypes",required:!0,order:2,options:[...this.getParams()]}),new $({key:"Returns",value:"ObjectTypes",label:"Returns",description:"",type:"ObjectTypes",required:!0,order:3,options:[...this.getReturns()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.agentstatement.key=this.createdElements[0].value,this.agentstatement}initialize(t){if(this.params=[],this.returns=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof it&&this.params.push(n),n instanceof nt&&this.returns.push(n)}}toElements(t){this.agentstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Kl(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Bl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $l(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ll(r,o){if(r&1&&(p(0,"div",7),T(1,$l,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Wl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Al(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ol(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function zl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Nl(r,o){if(r&1&&(p(0,"div",7),T(1,zl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Rl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ql(r,o){if(r&1&&(p(0,"div",7),T(1,Rl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function jl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ul(r,o){if(r&1&&(p(0,"div",7),T(1,jl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Gl(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Yl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Hl(r,o){if(r&1&&(p(0,"div",7),T(1,Yl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Rr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(St),I(K))},o.\u0275cmp=H({type:o,selectors:[["agentstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([St,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Kl,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Bl,1,5,"input",6)(12,Ll,3,0,"div",7)(13,Wl,1,5,"input",6)(14,Al,1,5,"input",6)(15,Ol,1,5,"input",6)(16,Nl,3,0,"div",7)(17,ql,3,0,"div",7)(18,Ul,3,0,"div",7)(19,Gl,1,4,"textarea",8)(20,Hl,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var kt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.declarestatement=new De}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.type||"",a=t?.foreignType||"",c=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"unique name, which can be referenced as #key#",type:"UniqueKey",required:!0,order:1}),new $({key:"Type",value:n,label:"Type",description:"What type of data does this hold",type:"StringEnum",required:!0,order:2,options:[{key:"GUID",value:"GUID"},{key:"AUTO",value:"AUTO"},{key:"STRING",value:"STRING"},{key:"NUM",value:"NUM"},{key:"BOOL",value:"BOOL"},{key:"ENUM",value:"ENUM"},{key:"IMAGE",value:"IMAGE"},{key:"DATE",value:"DATE"},{key:"COLOR",value:"COLOR"},{key:"EMAIL",value:"EMAIL"},{key:"PASSWORD",value:"PASSWORD"},{key:"TEL",value:"TEL"},{key:"URL",value:"URL"},{key:"WEEK",value:"WEEK"},{key:"TIME",value:"TIME"},{key:"OBJECT",value:"OBJECT"},{key:"OBJECTS",value:"OBJECTS"},{key:"ONE",value:"ONE"},{key:"MANY",value:"MANY"},{key:"COMPUTED",value:"COMPUTED"}]}),new $({key:"ForeignType",value:a,type:"StringType",label:"ForeignType",description:"Related Type",required:!1,order:3}),new $({key:"Expression",value:c,type:"StringType",label:"Expression",description:"Actual value of the Key",required:!0,order:4})]}create(){return{key:this.createdElements[0].value,type:this.createdElements[1].value,foreignType:this.createdElements[2].value,expression:this.createdElements[3].value}}update(){return this.declarestatement.key=this.createdElements[0].value,this.declarestatement.type=this.createdElements[1].value,this.declarestatement.foreignType=this.createdElements[2].value,this.declarestatement.expression=this.createdElements[3].value,this.declarestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.declarestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Xl(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Zl(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Jl(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ql(r,o){if(r&1&&(p(0,"div",7),T(1,Jl,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ec(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ic(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function nc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function rc(r,o){if(r&1&&(p(0,"div",7),T(1,nc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ac(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function oc(r,o){if(r&1&&(p(0,"div",7),T(1,ac,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function sc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function lc(r,o){if(r&1&&(p(0,"div",7),T(1,sc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function cc(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function pc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function dc(r,o){if(r&1&&(p(0,"div",7),T(1,pc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var qr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["declarestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([kt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Xl,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Zl,1,5,"input",6)(12,Ql,3,0,"div",7)(13,ec,1,5,"input",6)(14,tc,1,5,"input",6)(15,ic,1,5,"input",6)(16,rc,3,0,"div",7)(17,oc,3,0,"div",7)(18,lc,3,0,"div",7)(19,cc,1,4,"textarea",8)(20,dc,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Tt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.assignstatement=new Ti}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.parameters||[],a=t?.assignType||"",c=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Parameters",value:n.join(","),label:"Parameters",description:"Previously declared Keys",type:"Keys",required:!0,order:2,options:[...this.getdeclarestatements()]}),new $({key:"AssignType",value:a,label:"AssignType",description:"what to do when assigning",type:"StringEnum",required:!0,order:3,options:[{key:"DEFAULT",value:"DEFAULT"},{key:"APPEND",value:"APPEND"},{key:"UPDATE",value:"UPDATE"}]}),new $({key:"Expression",value:c,type:"StringType",label:"Expression",description:"Initialize a previously declared variable with a value",required:!0,order:4})]}create(){return{key:this.createdElements[0].value,parameters:this.createdElements[1].value.split(","),assignType:this.createdElements[2].value,expression:this.createdElements[3].value}}update(){return this.assignstatement.key=this.createdElements[0].value,this.assignstatement.parameters=this.createdElements[1].value.split(","),this.assignstatement.assignType=this.createdElements[2].value,this.assignstatement.expression=this.createdElements[3].value,this.assignstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.assignstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function uc(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function mc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function _c(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function hc(r,o){if(r&1&&(p(0,"div",7),T(1,_c,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function fc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function yc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function vc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function xc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function gc(r,o){if(r&1&&(p(0,"div",7),T(1,xc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Cc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function wc(r,o){if(r&1&&(p(0,"div",7),T(1,Cc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Sc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function kc(r,o){if(r&1&&(p(0,"div",7),T(1,Sc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Tc(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ec(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function bc(r,o){if(r&1&&(p(0,"div",7),T(1,Ec,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var jr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Tt),I(K))},o.\u0275cmp=H({type:o,selectors:[["assignstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Tt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,uc,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,mc,1,5,"input",6)(12,hc,3,0,"div",7)(13,fc,1,5,"input",6)(14,yc,1,5,"input",6)(15,vc,1,5,"input",6)(16,gc,3,0,"div",7)(17,wc,3,0,"div",7)(18,kc,3,0,"div",7)(19,Tc,1,4,"textarea",8)(20,bc,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Et=(()=>{let o=class o{constructor(){this.declarestatements=[],this.then=new Ye,this.elseIfs=[],this.elses=new Ge,this.elementW=122,this.elementH=27,this.createdElements=[],this.ifstatement=new st}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}setThen(t){this.then=t}getThen(){return[]}setElseIfs(t){this.elseIfs=t}getElseIfs(){let t=[];for(let i of this.elseIfs)t.push(new ae(i.expression,i.expression,"StringType","",""));return t}setElses(t){this.elses=t}getElses(){return[]}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate(),a=t?.then||new Ye,c=t?.elseIfs||[],l=t?.elses||new Ge;return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"Eq() NotEq() Ge() Le() ",required:!0,order:2}),new $({key:"Then",value:"ObjectType",label:"Then",description:"",type:"ObjectType",required:!1,order:3,options:[...this.getThen()]}),new $({key:"ElseIfs",value:"ObjectTypes",label:"ElseIfs",description:"",type:"ObjectTypes",required:!1,order:4,options:[...this.getElseIfs()]}),new $({key:"Elses",value:"ObjectType",label:"Elses",description:"",type:"ObjectType",required:!1,order:5,options:[...this.getElses()]})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.ifstatement.key=this.createdElements[0].value,this.ifstatement.expression=this.createdElements[1].value,this.ifstatement}initialize(t){if(this.elseIfs=[],t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a),a instanceof Ye&&(this.then=a),a instanceof Ue&&this.elseIfs.push(a),a instanceof Ge&&(this.elses=a);this.setDeclareStatements(n)}}}toElements(t){this.ifstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Vc(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Pc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Fc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Mc(r,o){if(r&1&&(p(0,"div",7),T(1,Fc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Dc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ic(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Kc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Bc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function $c(r,o){if(r&1&&(p(0,"div",7),T(1,Bc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Lc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Wc(r,o){if(r&1&&(p(0,"div",7),T(1,Lc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ac(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Oc(r,o){if(r&1&&(p(0,"div",7),T(1,Ac,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function zc(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Nc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Rc(r,o){if(r&1&&(p(0,"div",7),T(1,Nc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ur=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Et),I(K))},o.\u0275cmp=H({type:o,selectors:[["ifstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Et,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Vc,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Pc,1,5,"input",6)(12,Mc,3,0,"div",7)(13,Dc,1,5,"input",6)(14,Ic,1,5,"input",6)(15,Kc,1,5,"input",6)(16,$c,3,0,"div",7)(17,Wc,3,0,"div",7)(18,Oc,3,0,"div",7)(19,zc,1,4,"textarea",8)(20,Rc,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var bt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.thenstatement=new Ye}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){return[]}create(){return{}}update(){return this.thenstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.thenstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function qc(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function jc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Uc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Gc(r,o){if(r&1&&(p(0,"div",7),T(1,Uc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Yc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Hc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Xc(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Zc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Jc(r,o){if(r&1&&(p(0,"div",7),T(1,Zc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Qc(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ep(r,o){if(r&1&&(p(0,"div",7),T(1,Qc,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function tp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ip(r,o){if(r&1&&(p(0,"div",7),T(1,tp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function np(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function rp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ap(r,o){if(r&1&&(p(0,"div",7),T(1,rp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Gr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["thenstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([bt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,qc,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,jc,1,5,"input",6)(12,Gc,3,0,"div",7)(13,Yc,1,5,"input",6)(14,Hc,1,5,"input",6)(15,Xc,1,5,"input",6)(16,Jc,3,0,"div",7)(17,ep,3,0,"div",7)(18,ip,3,0,"div",7)(19,np,1,4,"textarea",8)(20,ap,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Vt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.elseifstatement=new Ue}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.expression||this.getHashTemplate();return[new $({key:"Expression",value:i,type:"StringType",label:"Expression",description:"Eq() NotEq() Ge() Le() ",required:!0,order:1})]}create(){return{expression:this.createdElements[0].value}}update(){return this.elseifstatement.expression=this.createdElements[0].value,this.elseifstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.elseifstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function op(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function sp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function lp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function cp(r,o){if(r&1&&(p(0,"div",7),T(1,lp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function pp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function dp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function up(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function mp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function _p(r,o){if(r&1&&(p(0,"div",7),T(1,mp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function hp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function fp(r,o){if(r&1&&(p(0,"div",7),T(1,hp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function yp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function vp(r,o){if(r&1&&(p(0,"div",7),T(1,yp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function xp(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function gp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Cp(r,o){if(r&1&&(p(0,"div",7),T(1,gp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Yr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Vt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elseifstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Vt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,op,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,sp,1,5,"input",6)(12,cp,3,0,"div",7)(13,pp,1,5,"input",6)(14,dp,1,5,"input",6)(15,up,1,5,"input",6)(16,_p,3,0,"div",7)(17,fp,3,0,"div",7)(18,vp,3,0,"div",7)(19,xp,1,4,"textarea",8)(20,Cp,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Pt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.elsestatement=new Ge}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){return[]}create(){return{}}update(){return this.elsestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.elsestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function wp(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Sp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function kp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Tp(r,o){if(r&1&&(p(0,"div",7),T(1,kp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ep(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function bp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Vp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Pp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Fp(r,o){if(r&1&&(p(0,"div",7),T(1,Pp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Mp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Dp(r,o){if(r&1&&(p(0,"div",7),T(1,Mp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ip(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Kp(r,o){if(r&1&&(p(0,"div",7),T(1,Ip,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Bp(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $p(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Lp(r,o){if(r&1&&(p(0,"div",7),T(1,$p,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Hr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Pt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elsestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Pt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,wp,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Sp,1,5,"input",6)(12,Tp,3,0,"div",7)(13,Ep,1,5,"input",6)(14,bp,1,5,"input",6)(15,Vp,1,5,"input",6)(16,Fp,3,0,"div",7)(17,Dp,3,0,"div",7)(18,Kp,3,0,"div",7)(19,Bp,1,4,"textarea",8)(20,Lp,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Ft=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.instatement=new Ei}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.label||"";return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Label",value:n,type:"StringType",label:"Label",description:"Hint for the user",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,label:this.createdElements[1].value}}update(){return this.instatement.key=this.createdElements[0].value,this.instatement.label=this.createdElements[1].value,this.instatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.instatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Wp(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Ap(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Op(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function zp(r,o){if(r&1&&(p(0,"div",7),T(1,Op,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Np(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Rp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function qp(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function jp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Up(r,o){if(r&1&&(p(0,"div",7),T(1,jp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Gp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Yp(r,o){if(r&1&&(p(0,"div",7),T(1,Gp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Hp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Xp(r,o){if(r&1&&(p(0,"div",7),T(1,Hp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Zp(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Jp(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Qp(r,o){if(r&1&&(p(0,"div",7),T(1,Jp,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Xr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ft),I(K))},o.\u0275cmp=H({type:o,selectors:[["instatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ft,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Wp,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Ap,1,5,"input",6)(12,zp,3,0,"div",7)(13,Np,1,5,"input",6)(14,Rp,1,5,"input",6)(15,qp,1,5,"input",6)(16,Up,3,0,"div",7)(17,Yp,3,0,"div",7)(18,Xp,3,0,"div",7)(19,Zp,1,4,"textarea",8)(20,Qp,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Mt=(()=>{let o=class o{constructor(){this.subs=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.pickstatement=new ve}setSubs(t){this.subs=t}getSubs(){let t=[];for(let i of this.subs)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.subs||[];return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"UniqueKey",required:!0,order:1}),new $({key:"Subs",value:"ObjectTypes",label:"Subs",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getSubs()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.pickstatement.key=this.createdElements[0].value,this.pickstatement}initialize(t){if(this.subs=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof ye&&this.subs.push(n)}}toElements(t){this.pickstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function ed(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function td(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function id(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function nd(r,o){if(r&1&&(p(0,"div",7),T(1,id,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function rd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ad(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function od(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function sd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ld(r,o){if(r&1&&(p(0,"div",7),T(1,sd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function cd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function pd(r,o){if(r&1&&(p(0,"div",7),T(1,cd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function dd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ud(r,o){if(r&1&&(p(0,"div",7),T(1,dd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function md(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function _d(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function hd(r,o){if(r&1&&(p(0,"div",7),T(1,_d,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Zr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Mt),I(K))},o.\u0275cmp=H({type:o,selectors:[["pickstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Mt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,ed,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,td,1,5,"input",6)(12,nd,3,0,"div",7)(13,rd,1,5,"input",6)(14,ad,1,5,"input",6)(15,od,1,5,"input",6)(16,ld,3,0,"div",7)(17,pd,3,0,"div",7)(18,ud,3,0,"div",7)(19,md,1,4,"textarea",8)(20,hd,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Dt=(()=>{let o=class o{constructor(){this.childs=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.substatement=new ye}setChilds(t){this.childs=t}getChilds(){let t=[];for(let i of this.childs)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.childs||[];return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"UniqueKey",required:!0,order:1}),new $({key:"Childs",value:"ObjectTypes",label:"Childs",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getChilds()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.substatement.key=this.createdElements[0].value,this.substatement}initialize(t){if(this.childs=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof bi&&this.childs.push(n)}}toElements(t){this.substatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function fd(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function yd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function vd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function xd(r,o){if(r&1&&(p(0,"div",7),T(1,vd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function gd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Cd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function wd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Sd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function kd(r,o){if(r&1&&(p(0,"div",7),T(1,Sd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Td(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ed(r,o){if(r&1&&(p(0,"div",7),T(1,Td,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function bd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Vd(r,o){if(r&1&&(p(0,"div",7),T(1,bd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Pd(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Fd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Md(r,o){if(r&1&&(p(0,"div",7),T(1,Fd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Jr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Dt),I(K))},o.\u0275cmp=H({type:o,selectors:[["substatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Dt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,fd,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,yd,1,5,"input",6)(12,xd,3,0,"div",7)(13,gd,1,5,"input",6)(14,Cd,1,5,"input",6)(15,wd,1,5,"input",6)(16,kd,3,0,"div",7)(17,Ed,3,0,"div",7)(18,Vd,3,0,"div",7)(19,Pd,1,4,"textarea",8)(20,Md,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var It=(()=>{let o=class o{constructor(){this.infants=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.childstatement=new bi}setInfants(t){this.infants=t}getInfants(){let t=[];for(let i of this.infants)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.infants||[];return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"UniqueKey",required:!0,order:1}),new $({key:"Infants",value:"ObjectTypes",label:"Infants",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getInfants()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.childstatement.key=this.createdElements[0].value,this.childstatement}initialize(t){if(this.infants=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof Vi&&this.infants.push(n)}}toElements(t){this.childstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Dd(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Id(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Kd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Bd(r,o){if(r&1&&(p(0,"div",7),T(1,Kd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function $d(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ld(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Wd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ad(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Od(r,o){if(r&1&&(p(0,"div",7),T(1,Ad,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function zd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Nd(r,o){if(r&1&&(p(0,"div",7),T(1,zd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Rd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function qd(r,o){if(r&1&&(p(0,"div",7),T(1,Rd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function jd(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ud(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Gd(r,o){if(r&1&&(p(0,"div",7),T(1,Ud,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Qr=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(It),I(K))},o.\u0275cmp=H({type:o,selectors:[["childstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([It,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Dd,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Id,1,5,"input",6)(12,Bd,3,0,"div",7)(13,$d,1,5,"input",6)(14,Ld,1,5,"input",6)(15,Wd,1,5,"input",6)(16,Od,3,0,"div",7)(17,Nd,3,0,"div",7)(18,qd,3,0,"div",7)(19,jd,1,4,"textarea",8)(20,Gd,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Kt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.infantstatement=new Vi}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"";return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"UniqueKey",required:!0,order:1})]}create(){return{key:this.createdElements[0].value}}update(){return this.infantstatement.key=this.createdElements[0].value,this.infantstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.infantstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Yd(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Hd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Xd(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Zd(r,o){if(r&1&&(p(0,"div",7),T(1,Xd,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Jd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Qd(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function eu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function iu(r,o){if(r&1&&(p(0,"div",7),T(1,tu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function nu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ru(r,o){if(r&1&&(p(0,"div",7),T(1,nu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function au(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ou(r,o){if(r&1&&(p(0,"div",7),T(1,au,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function su(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function lu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function cu(r,o){if(r&1&&(p(0,"div",7),T(1,lu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ea=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["infantstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Kt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Yd,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Hd,1,5,"input",6)(12,Zd,3,0,"div",7)(13,Jd,1,5,"input",6)(14,Qd,1,5,"input",6)(15,eu,1,5,"input",6)(16,iu,3,0,"div",7)(17,ru,3,0,"div",7)(18,ou,3,0,"div",7)(19,su,1,4,"textarea",8)(20,cu,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Bt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.outstatement=new Pi}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.parameters||[],a=t?.outType||"",c=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Parameters",value:n.join(","),label:"Parameters",description:"Previously declared Keys",type:"Keys",required:!0,order:2,options:[...this.getdeclarestatements()]}),new $({key:"OutType",value:a,label:"OutType",description:"what is the format of the output",type:"StringEnum",required:!0,order:3,options:[{key:"TEXT",value:"TEXT"},{key:"HTML",value:"HTML"},{key:"SVG",value:"SVG"},{key:"AST",value:"AST"},{key:"IMAGE",value:"IMAGE"},{key:"VIDEO",value:"VIDEO"},{key:"AUDIO",value:"AUDIO"}]}),new $({key:"Expression",value:c,type:"StringType",label:"Expression",description:"handlebar expession #DeclareKey# ",required:!0,order:4})]}create(){return{key:this.createdElements[0].value,parameters:this.createdElements[1].value.split(","),outType:this.createdElements[2].value,expression:this.createdElements[3].value}}update(){return this.outstatement.key=this.createdElements[0].value,this.outstatement.parameters=this.createdElements[1].value.split(","),this.outstatement.outType=this.createdElements[2].value,this.outstatement.expression=this.createdElements[3].value,this.outstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.outstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function pu(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function du(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function uu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function mu(r,o){if(r&1&&(p(0,"div",7),T(1,uu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function _u(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function hu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function fu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function yu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function vu(r,o){if(r&1&&(p(0,"div",7),T(1,yu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function xu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function gu(r,o){if(r&1&&(p(0,"div",7),T(1,xu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Cu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function wu(r,o){if(r&1&&(p(0,"div",7),T(1,Cu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Su(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ku(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Tu(r,o){if(r&1&&(p(0,"div",7),T(1,ku,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ta=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["outstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Bt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,pu,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,du,1,5,"input",6)(12,mu,3,0,"div",7)(13,_u,1,5,"input",6)(14,hu,1,5,"input",6)(15,fu,1,5,"input",6)(16,vu,3,0,"div",7)(17,gu,3,0,"div",7)(18,wu,3,0,"div",7)(19,Su,1,4,"textarea",8)(20,Tu,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var $t=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.remstatement=new Fi}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.expression||this.getHashTemplate();return[new $({key:"Expression",value:i,type:"StringType",label:"Expression",description:"A simple comment to explain a concept",required:!0,order:1})]}create(){return{expression:this.createdElements[0].value}}update(){return this.remstatement.expression=this.createdElements[0].value,this.remstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.remstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Eu(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function bu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Vu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Pu(r,o){if(r&1&&(p(0,"div",7),T(1,Vu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Fu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Mu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Du(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Iu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ku(r,o){if(r&1&&(p(0,"div",7),T(1,Iu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Bu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function $u(r,o){if(r&1&&(p(0,"div",7),T(1,Bu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Lu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Wu(r,o){if(r&1&&(p(0,"div",7),T(1,Lu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Au(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ou(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function zu(r,o){if(r&1&&(p(0,"div",7),T(1,Ou,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ia=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I($t),I(K))},o.\u0275cmp=H({type:o,selectors:[["remstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([$t,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Eu,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,bu,1,5,"input",6)(12,Pu,3,0,"div",7)(13,Fu,1,5,"input",6)(14,Mu,1,5,"input",6)(15,Du,1,5,"input",6)(16,Ku,3,0,"div",7)(17,$u,3,0,"div",7)(18,Wu,3,0,"div",7)(19,Au,1,4,"textarea",8)(20,zu,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Lt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.cases=[],this.defaults=new je,this.elementW=122,this.elementH=27,this.createdElements=[],this.switchstatement=new lt}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}setCases(t){this.cases=t}getCases(){let t=[];for(let i of this.cases)t.push(new ae(i.expression,i.expression,"StringType","",""));return t}setDefaults(t){this.defaults=t}getDefaults(){return[]}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.cases||[],a=t?.defaults||new je;return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Cases",value:"ObjectTypes",label:"Cases",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getCases()]}),new $({key:"Defaults",value:"ObjectType",label:"Defaults",description:"",type:"ObjectType",required:!1,order:3,options:[...this.getDefaults()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.switchstatement.key=this.createdElements[0].value,this.switchstatement}initialize(t){if(this.cases=[],t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a),a instanceof Qe&&this.cases.push(a),a instanceof je&&(this.defaults=a);this.setDeclareStatements(n)}}}toElements(t){this.switchstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Nu(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Ru(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function qu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ju(r,o){if(r&1&&(p(0,"div",7),T(1,qu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Uu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Gu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Yu(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Hu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Xu(r,o){if(r&1&&(p(0,"div",7),T(1,Hu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Zu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ju(r,o){if(r&1&&(p(0,"div",7),T(1,Zu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Qu(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function em(r,o){if(r&1&&(p(0,"div",7),T(1,Qu,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function tm(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function im(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function nm(r,o){if(r&1&&(p(0,"div",7),T(1,im,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var na=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Lt),I(K))},o.\u0275cmp=H({type:o,selectors:[["switchstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Lt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Nu,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Ru,1,5,"input",6)(12,ju,3,0,"div",7)(13,Uu,1,5,"input",6)(14,Gu,1,5,"input",6)(15,Yu,1,5,"input",6)(16,Xu,3,0,"div",7)(17,Ju,3,0,"div",7)(18,em,3,0,"div",7)(19,tm,1,4,"textarea",8)(20,nm,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Wt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.casestatement=new Qe}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.expression||this.getHashTemplate();return[new $({key:"Expression",value:i,type:"StringType",label:"Expression",description:"Matchable Value",required:!0,order:1})]}create(){return{expression:this.createdElements[0].value}}update(){return this.casestatement.expression=this.createdElements[0].value,this.casestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.casestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function rm(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function am(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function om(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function sm(r,o){if(r&1&&(p(0,"div",7),T(1,om,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function lm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function cm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function pm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function dm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function um(r,o){if(r&1&&(p(0,"div",7),T(1,dm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function mm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function _m(r,o){if(r&1&&(p(0,"div",7),T(1,mm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function hm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function fm(r,o){if(r&1&&(p(0,"div",7),T(1,hm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ym(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function vm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function xm(r,o){if(r&1&&(p(0,"div",7),T(1,vm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ra=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["casestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Wt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,rm,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,am,1,5,"input",6)(12,sm,3,0,"div",7)(13,lm,1,5,"input",6)(14,cm,1,5,"input",6)(15,pm,1,5,"input",6)(16,um,3,0,"div",7)(17,_m,3,0,"div",7)(18,fm,3,0,"div",7)(19,ym,1,4,"textarea",8)(20,xm,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var At=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.defaultstatement=new je}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){return[]}create(){return{}}update(){return this.defaultstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.defaultstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function gm(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Cm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function wm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Sm(r,o){if(r&1&&(p(0,"div",7),T(1,wm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function km(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Tm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Em(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function bm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Vm(r,o){if(r&1&&(p(0,"div",7),T(1,bm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Pm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Fm(r,o){if(r&1&&(p(0,"div",7),T(1,Pm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Mm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Dm(r,o){if(r&1&&(p(0,"div",7),T(1,Mm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Im(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Km(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Bm(r,o){if(r&1&&(p(0,"div",7),T(1,Km,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var aa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(At),I(K))},o.\u0275cmp=H({type:o,selectors:[["defaultstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([At,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,gm,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Cm,1,5,"input",6)(12,Sm,3,0,"div",7)(13,km,1,5,"input",6)(14,Tm,1,5,"input",6)(15,Em,1,5,"input",6)(16,Vm,3,0,"div",7)(17,Fm,3,0,"div",7)(18,Dm,3,0,"div",7)(19,Im,1,4,"textarea",8)(20,Bm,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Ot=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.forstatement=new wi}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.start||"",a=t?.increment||0,c=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Start",value:n,type:"StringType",label:"Start",description:"Inital value for the loop",required:!0,order:2}),new $({key:"Increment",value:a.toString(),type:"IntegerType",label:"Increment",description:"How much to increment each time",required:!0,order:3}),new $({key:"Expression",value:c,type:"StringType",label:"Expression",description:"Eq() NotEq() Ge() Le() ",required:!0,order:4})]}create(){return{key:this.createdElements[0].value,start:this.createdElements[1].value,increment:parseInt(this.createdElements[2].value),expression:this.createdElements[3].value}}update(){return this.forstatement.key=this.createdElements[0].value,this.forstatement.start=this.createdElements[1].value,this.forstatement.increment=parseInt(this.createdElements[2].value),this.forstatement.expression=this.createdElements[3].value,this.forstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.forstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function $m(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Lm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Wm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Am(r,o){if(r&1&&(p(0,"div",7),T(1,Wm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Om(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function zm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Nm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Rm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function qm(r,o){if(r&1&&(p(0,"div",7),T(1,Rm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function jm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Um(r,o){if(r&1&&(p(0,"div",7),T(1,jm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Gm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ym(r,o){if(r&1&&(p(0,"div",7),T(1,Gm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Hm(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Xm(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Zm(r,o){if(r&1&&(p(0,"div",7),T(1,Xm,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var oa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ot),I(K))},o.\u0275cmp=H({type:o,selectors:[["forstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ot,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,$m,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Lm,1,5,"input",6)(12,Am,3,0,"div",7)(13,Om,1,5,"input",6)(14,zm,1,5,"input",6)(15,Nm,1,5,"input",6)(16,qm,3,0,"div",7)(17,Um,3,0,"div",7)(18,Ym,3,0,"div",7)(19,Hm,1,4,"textarea",8)(20,Zm,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var zt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.foreachstatement=new Si}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"Condition",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.foreachstatement.key=this.createdElements[0].value,this.foreachstatement.expression=this.createdElements[1].value,this.foreachstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.foreachstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Jm(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Qm(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function e0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function t0(r,o){if(r&1&&(p(0,"div",7),T(1,e0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function i0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function n0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function r0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function a0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function o0(r,o){if(r&1&&(p(0,"div",7),T(1,a0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function s0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function l0(r,o){if(r&1&&(p(0,"div",7),T(1,s0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function c0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function p0(r,o){if(r&1&&(p(0,"div",7),T(1,c0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function d0(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function u0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function m0(r,o){if(r&1&&(p(0,"div",7),T(1,u0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var sa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["foreachstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([zt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Jm,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Qm,1,5,"input",6)(12,t0,3,0,"div",7)(13,i0,1,5,"input",6)(14,n0,1,5,"input",6)(15,r0,1,5,"input",6)(16,o0,3,0,"div",7)(17,l0,3,0,"div",7)(18,p0,3,0,"div",7)(19,d0,1,4,"textarea",8)(20,m0,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Nt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.whilestatement=new Ci}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"Eq() NotEq() Ge() Le() ",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.whilestatement.key=this.createdElements[0].value,this.whilestatement.expression=this.createdElements[1].value,this.whilestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.whilestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function _0(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function h0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function f0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function y0(r,o){if(r&1&&(p(0,"div",7),T(1,f0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function v0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function x0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function g0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function C0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function w0(r,o){if(r&1&&(p(0,"div",7),T(1,C0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function S0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function k0(r,o){if(r&1&&(p(0,"div",7),T(1,S0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function T0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function E0(r,o){if(r&1&&(p(0,"div",7),T(1,T0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function b0(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function V0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function P0(r,o){if(r&1&&(p(0,"div",7),T(1,V0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var la=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Nt),I(K))},o.\u0275cmp=H({type:o,selectors:[["whilestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Nt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,_0,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,h0,1,5,"input",6)(12,y0,3,0,"div",7)(13,v0,1,5,"input",6)(14,x0,1,5,"input",6)(15,g0,1,5,"input",6)(16,w0,3,0,"div",7)(17,k0,3,0,"div",7)(18,E0,3,0,"div",7)(19,b0,1,4,"textarea",8)(20,P0,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Rt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.dostatement=new ki}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"Eq() NotEq() Ge() Le() ",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.dostatement.key=this.createdElements[0].value,this.dostatement.expression=this.createdElements[1].value,this.dostatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.dostatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function F0(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function M0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function D0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function I0(r,o){if(r&1&&(p(0,"div",7),T(1,D0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function K0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function B0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function L0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function W0(r,o){if(r&1&&(p(0,"div",7),T(1,L0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function A0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function O0(r,o){if(r&1&&(p(0,"div",7),T(1,A0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function z0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function N0(r,o){if(r&1&&(p(0,"div",7),T(1,z0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function R0(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function q0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function j0(r,o){if(r&1&&(p(0,"div",7),T(1,q0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ca=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Rt),I(K))},o.\u0275cmp=H({type:o,selectors:[["dostatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Rt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,F0,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,M0,1,5,"input",6)(12,I0,3,0,"div",7)(13,K0,1,5,"input",6)(14,B0,1,5,"input",6)(15,$0,1,5,"input",6)(16,W0,3,0,"div",7)(17,O0,3,0,"div",7)(18,N0,3,0,"div",7)(19,R0,1,4,"textarea",8)(20,j0,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var qt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.agentstatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.callstatement=new vt}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}setAgentStatements(t){this.agentstatements=t}getagentstatements(){let t=[],i,n="";for(let a of this.agentstatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.toKey||"",a=t?.parameters||[],c=t?.agentType||"";return[new $({key:"Key",value:i,label:"Key",description:"Previously declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"ToKey",value:n,label:"ToKey",description:"Select the next functin to execute",type:"NextKey",required:!0,order:2,options:[...this.getagentstatements()]}),new $({key:"Parameters",value:a.join(","),label:"Parameters",description:"Parameters that are required by the call",type:"Keys",required:!0,order:3,options:[...this.getdeclarestatements()]}),new $({key:"AgentType",value:c,label:"AgentType",description:"",type:"StringEnum",required:!0,order:4,options:[{key:"UserDefined",value:"UserDefined"},{key:"Prebuilt",value:"Prebuilt"}]})]}create(){return{key:this.createdElements[0].value,toKey:this.createdElements[1].value,parameters:this.createdElements[2].value.split(","),agentType:this.createdElements[3].value}}update(){return this.callstatement.key=this.createdElements[0].value,this.callstatement.toKey=this.createdElements[1].value,this.callstatement.parameters=this.createdElements[2].value.split(","),this.callstatement.agentType=this.createdElements[3].value,this.callstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array;for(let c of i)c instanceof De&&n.push(c),c instanceof Ke&&a.push(c);this.setDeclareStatements(n),this.setAgentStatements(a)}}}toElements(t){this.callstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function U0(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function G0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Y0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function H0(r,o){if(r&1&&(p(0,"div",7),T(1,Y0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function X0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Z0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function J0(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Q0(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function e_(r,o){if(r&1&&(p(0,"div",7),T(1,Q0,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function t_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function i_(r,o){if(r&1&&(p(0,"div",7),T(1,t_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function n_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function r_(r,o){if(r&1&&(p(0,"div",7),T(1,n_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function a_(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function o_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function s_(r,o){if(r&1&&(p(0,"div",7),T(1,o_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var pa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["callstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([qt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,U0,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,G0,1,5,"input",6)(12,H0,3,0,"div",7)(13,X0,1,5,"input",6)(14,Z0,1,5,"input",6)(15,J0,1,5,"input",6)(16,e_,3,0,"div",7)(17,i_,3,0,"div",7)(18,r_,3,0,"div",7)(19,a_,1,4,"textarea",8)(20,s_,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var jt=(()=>{let o=class o{constructor(){this.lines=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.promptstatement=new Xe}setLines(t){this.lines=t}getLines(){let t=[];for(let i of this.lines)t.push(new ae(i.expression,i.expression,"StringType","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate(),a=t?.lines||[];return[new $({key:"Key",value:i,label:"Key",description:"Create a unique name which can be referenced",type:"UniqueKey",required:!0,order:1}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"Prompt Template",required:!0,order:2}),new $({key:"Lines",value:"ObjectTypes",label:"Lines",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getLines()]})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.promptstatement.key=this.createdElements[0].value,this.promptstatement.expression=this.createdElements[1].value,this.promptstatement}initialize(t){if(this.lines=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof ze&&this.lines.push(n)}}toElements(t){this.promptstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function l_(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function c_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function p_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function d_(r,o){if(r&1&&(p(0,"div",7),T(1,p_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function u_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function m_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function __(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function h_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function f_(r,o){if(r&1&&(p(0,"div",7),T(1,h_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function y_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function v_(r,o){if(r&1&&(p(0,"div",7),T(1,y_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function x_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function g_(r,o){if(r&1&&(p(0,"div",7),T(1,x_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function C_(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function w_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function S_(r,o){if(r&1&&(p(0,"div",7),T(1,w_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var da=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["promptstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([jt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,l_,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,c_,1,5,"input",6)(12,d_,3,0,"div",7)(13,u_,1,5,"input",6)(14,m_,1,5,"input",6)(15,__,1,5,"input",6)(16,f_,3,0,"div",7)(17,v_,3,0,"div",7)(18,g_,3,0,"div",7)(19,C_,1,4,"textarea",8)(20,S_,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Ut=(()=>{let o=class o{constructor(){this.declarestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.linestatement=new ze}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.role||"",n=t?.declares||[],a=t?.expression||this.getHashTemplate(),c=t?.score||"";return[new $({key:"Role",value:i,label:"Role",description:"",type:"StringEnum",required:!0,order:1,options:[{key:"system",value:"system"},{key:"user",value:"user"},{key:"assistant",value:"assistant"}]}),new $({key:"Declares",value:n.join(","),label:"Declares",description:"Previously declared Keys",type:"Keys",required:!0,order:2,options:[...this.getdeclarestatements()]}),new $({key:"Expression",value:a,type:"StringType",label:"Expression",description:"Prompt Template",required:!0,order:3}),new $({key:"Score",value:c,label:"Score",description:"Provide a score for the response",type:"StringEnum",required:!0,order:4,options:[{key:"notscored",value:"notscored"},{key:"good",value:"good"},{key:"average",value:"average"},{key:"bad",value:"bad"}]})]}create(){return{role:this.createdElements[0].value,declares:this.createdElements[1].value.split(","),expression:this.createdElements[2].value,score:this.createdElements[3].value}}update(){return this.linestatement.role=this.createdElements[0].value,this.linestatement.declares=this.createdElements[1].value.split(","),this.linestatement.expression=this.createdElements[2].value,this.linestatement.score=this.createdElements[3].value,this.linestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof De&&n.push(a);this.setDeclareStatements(n)}}}toElements(t){this.linestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function k_(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function T_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function E_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function b_(r,o){if(r&1&&(p(0,"div",7),T(1,E_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function V_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function P_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function F_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function M_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function D_(r,o){if(r&1&&(p(0,"div",7),T(1,M_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function I_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function K_(r,o){if(r&1&&(p(0,"div",7),T(1,I_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function B_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function $_(r,o){if(r&1&&(p(0,"div",7),T(1,B_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function L_(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function W_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function A_(r,o){if(r&1&&(p(0,"div",7),T(1,W_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ua=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ut),I(K))},o.\u0275cmp=H({type:o,selectors:[["linestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ut,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,k_,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,T_,1,5,"input",6)(12,b_,3,0,"div",7)(13,V_,1,5,"input",6)(14,P_,1,5,"input",6)(15,F_,1,5,"input",6)(16,D_,3,0,"div",7)(17,K_,3,0,"div",7)(18,$_,3,0,"div",7)(19,L_,1,4,"textarea",8)(20,A_,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Gt=(()=>{let o=class o{constructor(){this.declarestatements=[],this.historystatements=[],this.promptstatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.invokestatement=new xt}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}setHistoryStatements(t){this.historystatements=t}gethistorystatements(){let t=[],i,n="";for(let a of this.historystatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setPromptStatements(t){this.promptstatements=t}getpromptstatements(){let t=[],i,n="";for(let a of this.promptstatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.apiKey||"",a=t?.botType||"",c=t?.outType||"",l=t?.modelName||"",u=t?.endPoint||"",f=t?.histories||[],C=t?.prompts||[];return[new $({key:"Key",value:i,label:"Key",description:"Previously Declared Key",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"ApiKey",value:n,type:"StringType",label:"ApiKey",description:"",required:!0,order:2}),new $({key:"BotType",value:a,label:"BotType",description:"What service to use",type:"StringEnum",required:!0,order:3,options:[{key:"OpenAI",value:"OpenAI"},{key:"Gemini",value:"Gemini"},{key:"Claude",value:"Claude"},{key:"Groq",value:"Groq"},{key:"Local",value:"Local"}]}),new $({key:"OutType",value:c,label:"OutType",description:"",type:"StringEnum",required:!0,order:4,options:[{key:"TEXT",value:"TEXT"},{key:"HTML",value:"HTML"},{key:"SVG",value:"SVG"},{key:"AST",value:"AST"},{key:"IMAGE",value:"IMAGE"},{key:"VIDEO",value:"VIDEO"},{key:"AUDIO",value:"AUDIO"}]}),new $({key:"ModelName",value:l,type:"StringType",label:"ModelName",description:"Name of the model to call",required:!0,order:5}),new $({key:"EndPoint",value:u,type:"StringType",label:"EndPoint",description:"Endpoint URL",required:!0,order:6}),new $({key:"Histories",value:f.join(","),label:"Histories",description:"",type:"Keys",required:!0,order:7,options:[...this.gethistorystatements()]}),new $({key:"Prompts",value:C.join(","),label:"Prompts",description:"",type:"Keys",required:!0,order:8,options:[...this.getpromptstatements()]})]}create(){return{key:this.createdElements[0].value,apiKey:this.createdElements[1].value,botType:this.createdElements[2].value,outType:this.createdElements[3].value,modelName:this.createdElements[4].value,endPoint:this.createdElements[5].value,histories:this.createdElements[6].value.split(","),prompts:this.createdElements[7].value.split(",")}}update(){return this.invokestatement.key=this.createdElements[0].value,this.invokestatement.apiKey=this.createdElements[1].value,this.invokestatement.botType=this.createdElements[2].value,this.invokestatement.outType=this.createdElements[3].value,this.invokestatement.modelName=this.createdElements[4].value,this.invokestatement.endPoint=this.createdElements[5].value,this.invokestatement.histories=this.createdElements[6].value.split(","),this.invokestatement.prompts=this.createdElements[7].value.split(","),this.invokestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array,c=new Array;for(let l of i)l instanceof De&&n.push(l),l instanceof Je&&a.push(l),l instanceof Xe&&c.push(l);this.setDeclareStatements(n),this.setHistoryStatements(a),this.setPromptStatements(c)}}}toElements(t){this.invokestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function O_(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function z_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function N_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function R_(r,o){if(r&1&&(p(0,"div",7),T(1,N_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function q_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function j_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function U_(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function G_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Y_(r,o){if(r&1&&(p(0,"div",7),T(1,G_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function H_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function X_(r,o){if(r&1&&(p(0,"div",7),T(1,H_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Z_(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function J_(r,o){if(r&1&&(p(0,"div",7),T(1,Z_,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Q_(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function eh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function th(r,o){if(r&1&&(p(0,"div",7),T(1,eh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ma=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Gt),I(K))},o.\u0275cmp=H({type:o,selectors:[["invokestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Gt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,O_,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,z_,1,5,"input",6)(12,R_,3,0,"div",7)(13,q_,1,5,"input",6)(14,j_,1,5,"input",6)(15,U_,1,5,"input",6)(16,Y_,3,0,"div",7)(17,X_,3,0,"div",7)(18,J_,3,0,"div",7)(19,Q_,1,4,"textarea",8)(20,th,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Yt=(()=>{let o=class o{constructor(){this.plan=[],this.schema=[],this.seed=[],this.api=[],this.design=[],this.code=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.projectstatement=new zi}setPlan(t){this.plan=t}getPlan(){let t=[];for(let i of this.plan)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setSchema(t){this.schema=t}getSchema(){let t=[];for(let i of this.schema)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setSeed(t){this.seed=t}getSeed(){let t=[];for(let i of this.seed)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setApi(t){this.api=t}getApi(){let t=[];for(let i of this.api)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setDesign(t){this.design=t}getDesign(){let t=[];for(let i of this.design)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setCode(t){this.code=t}getCode(){let t=[];for(let i of this.code)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.plan||[],a=t?.schema||[],c=t?.seed||[],l=t?.api||[],u=t?.design||[],f=t?.code||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Plan",value:"ObjectTypes",label:"Plan",description:"",type:"ObjectTypes",required:!0,order:2,options:[...this.getPlan()]}),new $({key:"Schema",value:"ObjectTypes",label:"Schema",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getSchema()]}),new $({key:"Seed",value:"ObjectTypes",label:"Seed",description:"",type:"ObjectTypes",required:!1,order:4,options:[...this.getSeed()]}),new $({key:"Api",value:"ObjectTypes",label:"Api",description:"",type:"ObjectTypes",required:!1,order:5,options:[...this.getApi()]}),new $({key:"Design",value:"ObjectTypes",label:"Design",description:"",type:"ObjectTypes",required:!1,order:6,options:[...this.getDesign()]}),new $({key:"Code",value:"ObjectTypes",label:"Code",description:"",type:"ObjectTypes",required:!0,order:7,options:[...this.getCode()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.projectstatement.key=this.createdElements[0].value,this.projectstatement}initialize(t){if(this.plan=[],this.schema=[],this.seed=[],this.api=[],this.design=[],this.code=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof He&&this.plan.push(n),n instanceof Ne&&this.schema.push(n),n instanceof dt&&this.seed.push(n),n instanceof et&&this.api.push(n),n instanceof gt&&this.design.push(n),n instanceof _t&&this.code.push(n)}}toElements(t){this.projectstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function ih(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function nh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function rh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ah(r,o){if(r&1&&(p(0,"div",7),T(1,rh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function oh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function sh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function lh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ch(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ph(r,o){if(r&1&&(p(0,"div",7),T(1,ch,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function dh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function uh(r,o){if(r&1&&(p(0,"div",7),T(1,dh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function mh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function _h(r,o){if(r&1&&(p(0,"div",7),T(1,mh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function hh(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function fh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function yh(r,o){if(r&1&&(p(0,"div",7),T(1,fh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var _a=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Yt),I(K))},o.\u0275cmp=H({type:o,selectors:[["projectstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Yt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,ih,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,nh,1,5,"input",6)(12,ah,3,0,"div",7)(13,oh,1,5,"input",6)(14,sh,1,5,"input",6)(15,lh,1,5,"input",6)(16,ph,3,0,"div",7)(17,uh,3,0,"div",7)(18,_h,3,0,"div",7)(19,hh,1,4,"textarea",8)(20,yh,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Ht=(()=>{let o=class o{constructor(){this.tables=[],this.enums=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.schemastatement=new Ne}setTables(t){this.tables=t}getTables(){let t=[];for(let i of this.tables)t.push(new ae(i.key,i.key,"UniqueKey",i.plural,""));return t}setEnums(t){this.enums=t}getEnums(){let t=[];for(let i of this.enums)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.tables||[],a=t?.enums||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Tables",value:"ObjectTypes",label:"Tables",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getTables()]}),new $({key:"Enums",value:"ObjectTypes",label:"Enums",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getEnums()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.schemastatement.key=this.createdElements[0].value,this.schemastatement}initialize(t){if(this.tables=[],this.enums=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof Oe&&this.tables.push(n),n instanceof ct&&this.enums.push(n)}}toElements(t){this.schemastatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function vh(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function xh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function gh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ch(r,o){if(r&1&&(p(0,"div",7),T(1,gh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function wh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Sh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function kh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Th(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Eh(r,o){if(r&1&&(p(0,"div",7),T(1,Th,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function bh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Vh(r,o){if(r&1&&(p(0,"div",7),T(1,bh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ph(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Fh(r,o){if(r&1&&(p(0,"div",7),T(1,Ph,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Mh(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Dh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ih(r,o){if(r&1&&(p(0,"div",7),T(1,Dh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ha=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ht),I(K))},o.\u0275cmp=H({type:o,selectors:[["schemastatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ht,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,vh,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,xh,1,5,"input",6)(12,Ch,3,0,"div",7)(13,wh,1,5,"input",6)(14,Sh,1,5,"input",6)(15,kh,1,5,"input",6)(16,Eh,3,0,"div",7)(17,Vh,3,0,"div",7)(18,Fh,3,0,"div",7)(19,Mh,1,4,"textarea",8)(20,Ih,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Xt=(()=>{let o=class o{constructor(){this.columns=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.tablestatement=new Oe}setColumns(t){this.columns=t}getColumns(){let t=[];for(let i of this.columns)t.push(new ae(i.key,i.key,"UniqueKey",i.type,""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.plural||"",a=t?.columns||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Plural",value:n,type:"StringType",label:"Plural",description:"Plural",required:!0,order:2}),new $({key:"Columns",value:"ObjectTypes",label:"Columns",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getColumns()]})]}create(){return{key:this.createdElements[0].value,plural:this.createdElements[1].value}}update(){return this.tablestatement.key=this.createdElements[0].value,this.tablestatement.plural=this.createdElements[1].value,this.tablestatement}initialize(t){if(this.columns=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof qe&&this.columns.push(n)}}toElements(t){this.tablestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Kh(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Bh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $h(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Lh(r,o){if(r&1&&(p(0,"div",7),T(1,$h,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Wh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ah(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Oh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function zh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Nh(r,o){if(r&1&&(p(0,"div",7),T(1,zh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Rh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function qh(r,o){if(r&1&&(p(0,"div",7),T(1,Rh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function jh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Uh(r,o){if(r&1&&(p(0,"div",7),T(1,jh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Gh(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Yh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Hh(r,o){if(r&1&&(p(0,"div",7),T(1,Yh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var fa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Xt),I(K))},o.\u0275cmp=H({type:o,selectors:[["tablestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Xt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Kh,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Bh,1,5,"input",6)(12,Lh,3,0,"div",7)(13,Wh,1,5,"input",6)(14,Ah,1,5,"input",6)(15,Oh,1,5,"input",6)(16,Nh,3,0,"div",7)(17,qh,3,0,"div",7)(18,Uh,3,0,"div",7)(19,Gh,1,4,"textarea",8)(20,Hh,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Zt=(()=>{let o=class o{constructor(){this.tablestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.columnstatement=new qe}setTableStatements(t){this.tablestatements=t}gettablestatements(){let t=[],i,n="";for(let a of this.tablestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.type||"",a=t?.annotation||"",c=t?.foreignType||"";return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Type",value:n,label:"Type",description:"",type:"StringEnum",required:!0,order:2,options:[{key:"GUID",value:"GUID"},{key:"AUTO",value:"AUTO"},{key:"STRING",value:"STRING"},{key:"NUM",value:"NUM"},{key:"BOOL",value:"BOOL"},{key:"ENUM",value:"ENUM"},{key:"IMAGE",value:"IMAGE"},{key:"DATE",value:"DATE"},{key:"COLOR",value:"COLOR"},{key:"EMAIL",value:"EMAIL"},{key:"PASSWORD",value:"PASSWORD"},{key:"TEL",value:"TEL"},{key:"URL",value:"URL"},{key:"WEEK",value:"WEEK"},{key:"TIME",value:"TIME"},{key:"OBJECT",value:"OBJECT"},{key:"OBJECTS",value:"OBJECTS"},{key:"ONE",value:"ONE"},{key:"MANY",value:"MANY"},{key:"COMPUTED",value:"COMPUTED"}]}),new $({key:"Annotation",value:a,label:"Annotation",description:"",type:"StringEnum",required:!1,order:3,options:[{key:"USER_HISTORY",value:"USER_HISTORY"},{key:"USER_RATING",value:"USER_RATING"},{key:"REQUIRED",value:"REQUIRED"},{key:"UNIQUE",value:"UNIQUE"},{key:"MIN_LENGTH_and_MAX_LENGTH",value:"MIN_LENGTH and MAX_LENGTH"},{key:"RANGE_To_enforce_numerical_ranges_",value:"RANGE To enforce numerical ranges."},{key:"SEARCHABLE",value:"SEARCHABLE"},{key:"FILTERABLE",value:"FILTERABLE"},{key:"USAGE_STATS",value:"USAGE_STATS"},{key:"TRENDING",value:"TRENDING"},{key:"USER_FEEDBACK",value:"USER_FEEDBACK"},{key:"TRANSLATABLE",value:"TRANSLATABLE"},{key:"CURRENCY",value:"CURRENCY"},{key:"PREDICTION",value:"PREDICTION"},{key:"IMAGE_RECOGNITION",value:"IMAGE_RECOGNITION"},{key:"ENCRYPTED",value:"ENCRYPTED"},{key:"ANONYMIZED",value:"ANONYMIZED"},{key:"INDEXED",value:"INDEXED"},{key:"CACHEABLE",value:"CACHEABLE"}]}),new $({key:"ForeignType",value:c,label:"ForeignType",description:"",type:"ParentKey",required:!1,order:4,options:[...this.gettablestatements()]})]}create(){return{key:this.createdElements[0].value,type:this.createdElements[1].value,annotation:this.createdElements[2].value,foreignType:this.createdElements[3].value}}update(){return this.columnstatement.key=this.createdElements[0].value,this.columnstatement.type=this.createdElements[1].value,this.columnstatement.annotation=this.createdElements[2].value,this.columnstatement.foreignType=this.createdElements[3].value,this.columnstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof Oe&&n.push(a);this.setTableStatements(n)}}}toElements(t){this.columnstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Xh(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Zh(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Jh(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Qh(r,o){if(r&1&&(p(0,"div",7),T(1,Jh,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ef(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function nf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function rf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function af(r,o){if(r&1&&(p(0,"div",7),T(1,rf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function of(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function sf(r,o){if(r&1&&(p(0,"div",7),T(1,of,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function lf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function cf(r,o){if(r&1&&(p(0,"div",7),T(1,lf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function pf(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function df(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function uf(r,o){if(r&1&&(p(0,"div",7),T(1,df,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ya=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["columnstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Zt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Xh,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Zh,1,5,"input",6)(12,Qh,3,0,"div",7)(13,ef,1,5,"input",6)(14,tf,1,5,"input",6)(15,nf,1,5,"input",6)(16,af,3,0,"div",7)(17,sf,3,0,"div",7)(18,cf,3,0,"div",7)(19,pf,1,4,"textarea",8)(20,uf,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Jt=(()=>{let o=class o{constructor(){this.values=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.enumstatement=new ct}setValues(t){this.values=t}getValues(){let t=[];for(let i of this.values)t.push(new ae(i.key,i.key,"UniqueKey",i.content,""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.values||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Values",value:"ObjectTypes",label:"Values",description:"",type:"ObjectTypes",required:!1,order:2,options:[...this.getValues()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.enumstatement.key=this.createdElements[0].value,this.enumstatement}initialize(t){if(this.values=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof pt&&this.values.push(n)}}toElements(t){this.enumstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function mf(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function _f(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function hf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ff(r,o){if(r&1&&(p(0,"div",7),T(1,hf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function yf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function vf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function xf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function gf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Cf(r,o){if(r&1&&(p(0,"div",7),T(1,gf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function wf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Sf(r,o){if(r&1&&(p(0,"div",7),T(1,wf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function kf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Tf(r,o){if(r&1&&(p(0,"div",7),T(1,kf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ef(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function bf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Vf(r,o){if(r&1&&(p(0,"div",7),T(1,bf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var va=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["enumstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Jt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,mf,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,_f,1,5,"input",6)(12,ff,3,0,"div",7)(13,yf,1,5,"input",6)(14,vf,1,5,"input",6)(15,xf,1,5,"input",6)(16,Cf,3,0,"div",7)(17,Sf,3,0,"div",7)(18,Tf,3,0,"div",7)(19,Ef,1,4,"textarea",8)(20,Vf,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var Qt=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.valuestatement=new pt}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.content||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Content",value:n,type:"StringType",label:"Content",description:"Provide the Content for the Value Key",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,content:this.createdElements[1].value}}update(){return this.valuestatement.key=this.createdElements[0].value,this.valuestatement.content=this.createdElements[1].value,this.valuestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.valuestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Pf(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Ff(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Mf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Df(r,o){if(r&1&&(p(0,"div",7),T(1,Mf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function If(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Kf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Bf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $f(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Lf(r,o){if(r&1&&(p(0,"div",7),T(1,$f,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Wf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Af(r,o){if(r&1&&(p(0,"div",7),T(1,Wf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Of(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function zf(r,o){if(r&1&&(p(0,"div",7),T(1,Of,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Nf(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Rf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function qf(r,o){if(r&1&&(p(0,"div",7),T(1,Rf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var xa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["valuestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Qt,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Pf,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Ff,1,5,"input",6)(12,Df,3,0,"div",7)(13,If,1,5,"input",6)(14,Kf,1,5,"input",6)(15,Bf,1,5,"input",6)(16,Lf,3,0,"div",7)(17,Af,3,0,"div",7)(18,zf,3,0,"div",7)(19,Nf,1,4,"textarea",8)(20,qf,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ei=(()=>{let o=class o{constructor(){this.schemastatements=[],this.records=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.seedstatement=new dt}setSchemaStatements(t){this.schemastatements=t}getschemastatements(){let t=[],i,n="";for(let a of this.schemastatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setRecords(t){this.records=t}getRecords(){let t=[];for(let i of this.records)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.schemaKey||"",a=t?.recordsCount||0,c=t?.records||[];return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"SchemaKey",value:n,label:"SchemaKey",description:"which schema do you  wish to use",type:"ParentKey",required:!0,order:2,options:[...this.getschemastatements()]}),new $({key:"RecordsCount",value:a.toString(),type:"IntegerType",label:"RecordsCount",description:"How many records do you want to create for each table",required:!0,order:3}),new $({key:"Records",value:"ObjectTypes",label:"Records",description:"",type:"ObjectTypes",required:!1,order:4,options:[...this.getRecords()]})]}create(){return{key:this.createdElements[0].value,schemaKey:this.createdElements[1].value,recordsCount:parseInt(this.createdElements[2].value)}}update(){return this.seedstatement.key=this.createdElements[0].value,this.seedstatement.schemaKey=this.createdElements[1].value,this.seedstatement.recordsCount=parseInt(this.createdElements[2].value),this.seedstatement}initialize(t){if(this.records=[],t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof Ne&&n.push(a),a instanceof ut&&this.records.push(a);this.setSchemaStatements(n)}}}toElements(t){this.seedstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function jf(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Uf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Gf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Yf(r,o){if(r&1&&(p(0,"div",7),T(1,Gf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Hf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Xf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Zf(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Jf(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Qf(r,o){if(r&1&&(p(0,"div",7),T(1,Jf,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ey(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ty(r,o){if(r&1&&(p(0,"div",7),T(1,ey,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function iy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ny(r,o){if(r&1&&(p(0,"div",7),T(1,iy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ry(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ay(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function oy(r,o){if(r&1&&(p(0,"div",7),T(1,ay,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ga=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ei),I(K))},o.\u0275cmp=H({type:o,selectors:[["seedstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ei,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,jf,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Uf,1,5,"input",6)(12,Yf,3,0,"div",7)(13,Hf,1,5,"input",6)(14,Xf,1,5,"input",6)(15,Zf,1,5,"input",6)(16,Qf,3,0,"div",7)(17,ty,3,0,"div",7)(18,ny,3,0,"div",7)(19,ry,1,4,"textarea",8)(20,oy,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ti=(()=>{let o=class o{constructor(){this.tablestatements=[],this.fields=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.recordstatement=new ut}setTableStatements(t){this.tablestatements=t}gettablestatements(){let t=[],i,n="";for(let a of this.tablestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setFields(t){this.fields=t}getFields(){let t=[];for(let i of this.fields)t.push(new ae(i.key,i.key,"UniqueKey",i.content,""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.tableKey||"",a=t?.fields||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"TableKey",value:n,label:"TableKey",description:"which table are you using to create a record",type:"ParentKey",required:!0,order:2,options:[...this.gettablestatements()]}),new $({key:"Fields",value:"ObjectTypes",label:"Fields",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getFields()]})]}create(){return{key:this.createdElements[0].value,tableKey:this.createdElements[1].value}}update(){return this.recordstatement.key=this.createdElements[0].value,this.recordstatement.tableKey=this.createdElements[1].value,this.recordstatement}initialize(t){if(this.fields=[],t){let i=t.flatten();if(i.length>0){let n=new Array;for(let a of i)a instanceof Oe&&n.push(a),a instanceof mt&&this.fields.push(a);this.setTableStatements(n)}}}toElements(t){this.recordstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function sy(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function ly(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function cy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function py(r,o){if(r&1&&(p(0,"div",7),T(1,cy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function dy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function uy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function my(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function _y(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function hy(r,o){if(r&1&&(p(0,"div",7),T(1,_y,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function fy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function yy(r,o){if(r&1&&(p(0,"div",7),T(1,fy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function vy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function xy(r,o){if(r&1&&(p(0,"div",7),T(1,vy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function gy(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Cy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function wy(r,o){if(r&1&&(p(0,"div",7),T(1,Cy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ca=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ti),I(K))},o.\u0275cmp=H({type:o,selectors:[["recordstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ti,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,sy,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,ly,1,5,"input",6)(12,py,3,0,"div",7)(13,dy,1,5,"input",6)(14,uy,1,5,"input",6)(15,my,1,5,"input",6)(16,hy,3,0,"div",7)(17,yy,3,0,"div",7)(18,xy,3,0,"div",7)(19,gy,1,4,"textarea",8)(20,wy,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ii=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.fieldstatement=new mt}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.content||this.getHashTemplate(),a=t?.type||"",c=t?.foreignType||"";return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"Content",value:n,type:"StringType",label:"Content",description:"what is the actual value you want to store",required:!0,order:2}),new $({key:"Type",value:a,label:"Type",description:"",type:"StringEnum",required:!0,order:3,options:[{key:"GUID",value:"GUID"},{key:"AUTO",value:"AUTO"},{key:"STRING",value:"STRING"},{key:"NUM",value:"NUM"},{key:"BOOL",value:"BOOL"},{key:"ENUM",value:"ENUM"},{key:"IMAGE",value:"IMAGE"},{key:"DATE",value:"DATE"},{key:"COLOR",value:"COLOR"},{key:"EMAIL",value:"EMAIL"},{key:"PASSWORD",value:"PASSWORD"},{key:"TEL",value:"TEL"},{key:"URL",value:"URL"},{key:"WEEK",value:"WEEK"},{key:"TIME",value:"TIME"},{key:"OBJECT",value:"OBJECT"},{key:"OBJECTS",value:"OBJECTS"},{key:"ONE",value:"ONE"},{key:"MANY",value:"MANY"},{key:"COMPUTED",value:"COMPUTED"}]}),new $({key:"ForeignType",value:c,type:"StringType",label:"ForeignType",description:"",required:!1,order:4})]}create(){return{key:this.createdElements[0].value,content:this.createdElements[1].value,type:this.createdElements[2].value,foreignType:this.createdElements[3].value}}update(){return this.fieldstatement.key=this.createdElements[0].value,this.fieldstatement.content=this.createdElements[1].value,this.fieldstatement.type=this.createdElements[2].value,this.fieldstatement.foreignType=this.createdElements[3].value,this.fieldstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.fieldstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Sy(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function ky(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ty(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ey(r,o){if(r&1&&(p(0,"div",7),T(1,Ty,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function by(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Vy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Py(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Fy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function My(r,o){if(r&1&&(p(0,"div",7),T(1,Fy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Dy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Iy(r,o){if(r&1&&(p(0,"div",7),T(1,Dy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ky(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function By(r,o){if(r&1&&(p(0,"div",7),T(1,Ky,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function $y(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ly(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Wy(r,o){if(r&1&&(p(0,"div",7),T(1,Ly,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var wa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ii),I(K))},o.\u0275cmp=H({type:o,selectors:[["fieldstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ii,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Sy,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,ky,1,5,"input",6)(12,Ey,3,0,"div",7)(13,by,1,5,"input",6)(14,Vy,1,5,"input",6)(15,Py,1,5,"input",6)(16,My,3,0,"div",7)(17,Iy,3,0,"div",7)(18,By,3,0,"div",7)(19,$y,1,4,"textarea",8)(20,Wy,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ni=(()=>{let o=class o{constructor(){this.schemastatements=[],this.routestatements=[],this.routes=[],this.routeHelpers=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.apistatement=new et}setSchemaStatements(t){this.schemastatements=t}getschemastatements(){let t=[],i,n="";for(let a of this.schemastatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setRouteStatements(t){this.routestatements=t}getroutestatements(){let t=[],i,n="";for(let a of this.routestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setRoutes(t){this.routes=t}getRoutes(){let t=[];for(let i of this.routes)t.push(new ae(i.key,i.key,"UniqueKey",i.path,""));return t}setRouteHelpers(t){this.routeHelpers=t}getRouteHelpers(){let t=[];for(let i of this.routeHelpers)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.schemaKey||"",a=t?.routes||[],c=t?.links||[],l=t?.routeHelpers||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"SchemaKey",value:n,label:"SchemaKey",description:"which schema do you  wish to use",type:"ParentKey",required:!0,order:2,options:[...this.getschemastatements()]}),new $({key:"Routes",value:"ObjectTypes",label:"Routes",description:"",type:"ObjectTypes",required:!1,order:3,options:[...this.getRoutes()]}),new $({key:"Links",value:c.join(","),label:"Links",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:4,options:[...this.getroutestatements()]}),new $({key:"RouteHelpers",value:"ObjectTypes",label:"RouteHelpers",description:"",type:"ObjectTypes",required:!0,order:5,options:[...this.getRouteHelpers()]})]}create(){return{key:this.createdElements[0].value,schemaKey:this.createdElements[1].value,links:this.createdElements[2].value.split(",")}}update(){return this.apistatement.key=this.createdElements[0].value,this.apistatement.schemaKey=this.createdElements[1].value,this.apistatement.links=this.createdElements[2].value.split(","),this.apistatement}initialize(t){if(this.routes=[],this.routeHelpers=[],t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array;for(let c of i)c instanceof Ne&&n.push(c),c instanceof Ze&&this.routes.push(c),c instanceof Ze&&a.push(c),c instanceof Ke&&this.routeHelpers.push(c);this.setSchemaStatements(n),this.setRouteStatements(a)}}}toElements(t){this.apistatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Ay(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Oy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function zy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ny(r,o){if(r&1&&(p(0,"div",7),T(1,zy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ry(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function qy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function jy(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Uy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Gy(r,o){if(r&1&&(p(0,"div",7),T(1,Uy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Yy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Hy(r,o){if(r&1&&(p(0,"div",7),T(1,Yy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Xy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Zy(r,o){if(r&1&&(p(0,"div",7),T(1,Xy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Jy(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Qy(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ev(r,o){if(r&1&&(p(0,"div",7),T(1,Qy,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Sa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ni),I(K))},o.\u0275cmp=H({type:o,selectors:[["apistatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ni,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Ay,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Oy,1,5,"input",6)(12,Ny,3,0,"div",7)(13,Ry,1,5,"input",6)(14,qy,1,5,"input",6)(15,jy,1,5,"input",6)(16,Gy,3,0,"div",7)(17,Hy,3,0,"div",7)(18,Zy,3,0,"div",7)(19,Jy,1,4,"textarea",8)(20,ev,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ri=(()=>{let o=class o{constructor(){this.tablestatements=[],this.columnstatements=[],this.routestatements=[],this.agentstatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.routestatement=new Ze}setTableStatements(t){this.tablestatements=t}gettablestatements(){let t=[],i,n="";for(let a of this.tablestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setColumnStatements(t){this.columnstatements=t}getcolumnstatements(){let t=[],i,n="";for(let a of this.columnstatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,n+"."+a.key,a.type,n,a.foreignType)));return t}setRouteStatements(t){this.routestatements=t}getroutestatements(){let t=[],i,n="";for(let a of this.routestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setAgentStatements(t){this.agentstatements=t}getagentstatements(){let t=[],i,n="";for(let a of this.agentstatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.path||"",a=t?.verb||"",c=t?.tableKey||"",l=t?.requestKeys||[],u=t?.responseKeys||[],f=t?.payloadKeys||[],C=t?.orderBy||[],y=t?.responseType||"",B=t?.searchRoute||"",k=t?.agentRoute||[],A=t?.navRoutes||[],Y=t?.filterRoutes||[],z=t?.providerRoutes||[],Pe=t?.childRoutes||[];return[new $({key:"Key",value:i,label:"Key",description:"Provide a name,which can be looked elsewhere",type:"UniqueKey",required:!0,order:1}),new $({key:"Path",value:n,type:"StringType",label:"Path",description:"this will be auto generated",required:!0,order:2}),new $({key:"Verb",value:a,label:"Verb",description:"Does this route get or push data",type:"StringEnum",required:!0,order:3,options:[{key:"FetchMany",value:"FetchMany"},{key:"FetchManyByFk",value:"FetchManyByFk"},{key:"KeysProvider",value:"KeysProvider"},{key:"FetchOne",value:"FetchOne"},{key:"FetchOneFk",value:"FetchOneFk"},{key:"Create",value:"Create"},{key:"CreateByFk",value:"CreateByFk"},{key:"Search",value:"Search"},{key:"Filter",value:"Filter"},{key:"Agent",value:"Agent"},{key:"Update",value:"Update"},{key:"UpdateByFk",value:"UpdateByFk"},{key:"Delete",value:"Delete"},{key:"DeleteByFk",value:"DeleteByFk"}]}),new $({key:"TableKey",value:c,label:"TableKey",description:"what table do you wish to use in building the route",type:"ParentKey",required:!0,order:4,options:[...this.gettablestatements()]}),new $({key:"RequestKeys",value:l.join(","),label:"RequestKeys",description:"select required keys",type:"Keys",required:!0,order:5,options:[...this.getcolumnstatements()]}),new $({key:"ResponseKeys",value:u.join(","),label:"ResponseKeys",description:"select required keys for response",type:"Keys",required:!0,order:6,options:[...this.getcolumnstatements()]}),new $({key:"PayloadKeys",value:f.join(","),label:"PayloadKeys",description:"select required keys for upload",type:"Keys",required:!0,order:7,options:[...this.getcolumnstatements()]}),new $({key:"OrderBy",value:C.join(","),label:"OrderBy",description:"select a key to order data upon",type:"Keys",required:!0,order:8,options:[...this.getcolumnstatements()]}),new $({key:"ResponseType",value:y,label:"ResponseType",description:"does this data return data or just a status message",type:"StringEnum",required:!1,order:9,options:[{key:"ObjectType",value:"ObjectType"},{key:"ObjectTypes",value:"ObjectTypes"},{key:"HttpStatusCode",value:"HttpStatusCode"}]}),new $({key:"SearchRoute",value:B,label:"SearchRoute",description:"what other pages can this page navigate to",type:"ParentKey",required:!0,order:10,options:[...this.getroutestatements()]}),new $({key:"AgentRoute",value:k.join(","),label:"AgentRoute",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:11,options:[...this.getagentstatements()]}),new $({key:"NavRoutes",value:A.join(","),label:"NavRoutes",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:12,options:[...this.getroutestatements()]}),new $({key:"FilterRoutes",value:Y.join(","),label:"FilterRoutes",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:13,options:[...this.getroutestatements()]}),new $({key:"ProviderRoutes",value:z.join(","),label:"ProviderRoutes",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:14,options:[...this.getroutestatements()]}),new $({key:"ChildRoutes",value:Pe.join(","),label:"ChildRoutes",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:15,options:[...this.getroutestatements()]})]}create(){return{key:this.createdElements[0].value,path:this.createdElements[1].value,verb:this.createdElements[2].value,tableKey:this.createdElements[3].value,requestKeys:this.createdElements[4].value.split(","),responseKeys:this.createdElements[5].value.split(","),payloadKeys:this.createdElements[6].value.split(","),orderBy:this.createdElements[7].value.split(","),responseType:this.createdElements[8].value,searchRoute:this.createdElements[9].value,agentRoute:this.createdElements[10].value.split(","),navRoutes:this.createdElements[11].value.split(","),filterRoutes:this.createdElements[12].value.split(","),providerRoutes:this.createdElements[13].value.split(","),childRoutes:this.createdElements[14].value.split(",")}}update(){return this.routestatement.key=this.createdElements[0].value,this.routestatement.path=this.createdElements[1].value,this.routestatement.verb=this.createdElements[2].value,this.routestatement.tableKey=this.createdElements[3].value,this.routestatement.requestKeys=this.createdElements[4].value.split(","),this.routestatement.responseKeys=this.createdElements[5].value.split(","),this.routestatement.payloadKeys=this.createdElements[6].value.split(","),this.routestatement.orderBy=this.createdElements[7].value.split(","),this.routestatement.responseType=this.createdElements[8].value,this.routestatement.searchRoute=this.createdElements[9].value,this.routestatement.agentRoute=this.createdElements[10].value.split(","),this.routestatement.navRoutes=this.createdElements[11].value.split(","),this.routestatement.filterRoutes=this.createdElements[12].value.split(","),this.routestatement.providerRoutes=this.createdElements[13].value.split(","),this.routestatement.childRoutes=this.createdElements[14].value.split(","),this.routestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array,c=new Array,l=new Array;for(let u of i)u instanceof Oe&&n.push(u),u instanceof qe&&a.push(u),u instanceof Ze&&c.push(u),u instanceof Ke&&l.push(u);this.setTableStatements(n),this.setColumnStatements(a),this.setRouteStatements(c),this.setAgentStatements(l)}}}toElements(t){this.routestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function tv(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function iv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function nv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function rv(r,o){if(r&1&&(p(0,"div",7),T(1,nv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function av(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ov(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function sv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function lv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function cv(r,o){if(r&1&&(p(0,"div",7),T(1,lv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function pv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function dv(r,o){if(r&1&&(p(0,"div",7),T(1,pv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function uv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function mv(r,o){if(r&1&&(p(0,"div",7),T(1,uv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function _v(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function hv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function fv(r,o){if(r&1&&(p(0,"div",7),T(1,hv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ka=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ri),I(K))},o.\u0275cmp=H({type:o,selectors:[["routestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ri,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,tv,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,iv,1,5,"input",6)(12,rv,3,0,"div",7)(13,av,1,5,"input",6)(14,ov,1,5,"input",6)(15,sv,1,5,"input",6)(16,cv,3,0,"div",7)(17,dv,3,0,"div",7)(18,mv,3,0,"div",7)(19,_v,1,4,"textarea",8)(20,fv,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ai=(()=>{let o=class o{constructor(){this.schemastatements=[],this.apistatements=[],this.pages=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.designstatement=new gt}setSchemaStatements(t){this.schemastatements=t}getschemastatements(){let t=[],i,n="";for(let a of this.schemastatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setApiStatements(t){this.apistatements=t}getapistatements(){let t=[],i,n="";for(let a of this.apistatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setPages(t){this.pages=t}getPages(){let t=[];for(let i of this.pages)t.push(new ae(i.key,i.key,"UniqueKey",i.pageType,""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.schemaKey||"",a=t?.apiKey||"",c=t?.pages||[];return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"SchemaKey",value:n,label:"SchemaKey",description:"which schema do you  wish to use",type:"ParentKey",required:!0,order:2,options:[...this.getschemastatements()]}),new $({key:"ApiKey",value:a,label:"ApiKey",description:"which api do you  wish to use",type:"ParentKey",required:!0,order:3,options:[...this.getapistatements()]}),new $({key:"Pages",value:"ObjectTypes",label:"Pages",description:"",type:"ObjectTypes",required:!0,order:4,options:[...this.getPages()]})]}create(){return{key:this.createdElements[0].value,schemaKey:this.createdElements[1].value,apiKey:this.createdElements[2].value}}update(){return this.designstatement.key=this.createdElements[0].value,this.designstatement.schemaKey=this.createdElements[1].value,this.designstatement.apiKey=this.createdElements[2].value,this.designstatement}initialize(t){if(this.pages=[],t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array;for(let c of i)c instanceof Ne&&n.push(c),c instanceof et&&a.push(c),c instanceof rt&&this.pages.push(c);this.setSchemaStatements(n),this.setApiStatements(a)}}}toElements(t){this.designstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function yv(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function vv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function xv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function gv(r,o){if(r&1&&(p(0,"div",7),T(1,xv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Cv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function wv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Sv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function kv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Tv(r,o){if(r&1&&(p(0,"div",7),T(1,kv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ev(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function bv(r,o){if(r&1&&(p(0,"div",7),T(1,Ev,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Vv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Pv(r,o){if(r&1&&(p(0,"div",7),T(1,Vv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Fv(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Mv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Dv(r,o){if(r&1&&(p(0,"div",7),T(1,Mv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ta=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ai),I(K))},o.\u0275cmp=H({type:o,selectors:[["designstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ai,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,yv,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,vv,1,5,"input",6)(12,gv,3,0,"div",7)(13,Cv,1,5,"input",6)(14,wv,1,5,"input",6)(15,Sv,1,5,"input",6)(16,Tv,3,0,"div",7)(17,bv,3,0,"div",7)(18,Pv,3,0,"div",7)(19,Fv,1,4,"textarea",8)(20,Dv,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var oi=(()=>{let o=class o{constructor(){this.routestatements=[],this.tablestatements=[],this.columnstatements=[],this.pagestatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.pagestatement=new rt}setRouteStatements(t){this.routestatements=t}getroutestatements(){let t=[],i,n="";for(let a of this.routestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setTableStatements(t){this.tablestatements=t}gettablestatements(){let t=[],i,n="";for(let a of this.tablestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}setColumnStatements(t){this.columnstatements=t}getcolumnstatements(){let t=[],i,n="";for(let a of this.columnstatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,n+"."+a.key,a.type,n,a.foreignType)));return t}setPageStatements(t){this.pagestatements=t}getpagestatements(){let t=[],i,n="";for(let a of this.pagestatements)t.find(l=>l.key===a.key)||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.pageType||"",a=t?.routeKey||"",c=t?.tableKey||"",l=t?.displayType||"",u=t?.idKeys||[],f=t?.headerKeys||[],C=t?.imageKeys||[],y=t?.contentKeys||[],B=t?.footerKeys||[],k=t?.pickerKeys||[],A=t?.rangeKeys||[],Y=t?.inputKeys||[],z=t?.booleanKeys||[],Pe=t?.textKeys||[],Ve=t?.toggleKeys||[],Fe=t?.selectKeys||[],Ie=t?.dateKeys||[],$i=t?.navPages||[],Me=t?.searchPage||"",$e=t?.filterPages||[],cn=t?.providerPages||[],pn=t?.components||[],dn=t?.agentPages||[];return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"PageType",value:n,label:"PageType",description:"",type:"StringEnum",required:!0,order:2,options:[{key:"DetailPage",value:"DetailPage"},{key:"ListPage",value:"ListPage"},{key:"DetailFkPage",value:"DetailFkPage"},{key:"MasterDetailPage",value:"MasterDetailPage"},{key:"MasterDetailFkPage",value:"MasterDetailFkPage"},{key:"CreatePage",value:"CreatePage"},{key:"CreateFkPage",value:"CreateFkPage"},{key:"UpdatePage",value:"UpdatePage"},{key:"UpdateFkPage",value:"UpdateFkPage"},{key:"Components",value:"Components"},{key:"Pickers",value:"Pickers"},{key:"Modals",value:"Modals"},{key:"Filters",value:"Filters"},{key:"AgentPage",value:"AgentPage"},{key:"SearchPage",value:"SearchPage"}]}),new $({key:"RouteKey",value:a,label:"RouteKey",description:"",type:"ParentKey",required:!0,order:3,options:[...this.getroutestatements()]}),new $({key:"TableKey",value:c,label:"TableKey",description:"",type:"ParentKey",required:!1,order:4,options:[...this.gettablestatements()]}),new $({key:"DisplayType",value:l,label:"DisplayType",description:"what do you want your page to look like",type:"StringEnum",required:!0,order:5,options:[{key:"Chip",value:"Chip"},{key:"Card",value:"Card"},{key:"Table",value:"Table"},{key:"List",value:"List"},{key:"Slider",value:"Slider"}]}),new $({key:"IdKeys",value:u.join(","),label:"IdKeys",description:"card or other type header",type:"Keys",required:!0,order:6,options:[...this.getcolumnstatements()]}),new $({key:"HeaderKeys",value:f.join(","),label:"HeaderKeys",description:"card or other type header",type:"Keys",required:!0,order:7,options:[...this.getcolumnstatements()]}),new $({key:"ImageKeys",value:C.join(","),label:"ImageKeys",description:"card or other type images",type:"Keys",required:!0,order:8,options:[...this.getcolumnstatements()]}),new $({key:"ContentKeys",value:y.join(","),label:"ContentKeys",description:"card or other type content",type:"Keys",required:!0,order:9,options:[...this.getcolumnstatements()]}),new $({key:"FooterKeys",value:B.join(","),label:"FooterKeys",description:"card or other type footer",type:"Keys",required:!0,order:10,options:[...this.getcolumnstatements()]}),new $({key:"PickerKeys",value:k.join(","),label:"PickerKeys",description:"card or other type header",type:"Keys",required:!0,order:11,options:[...this.getcolumnstatements()]}),new $({key:"RangeKeys",value:A.join(","),label:"RangeKeys",description:"card or other type images",type:"Keys",required:!0,order:12,options:[...this.getcolumnstatements()]}),new $({key:"InputKeys",value:Y.join(","),label:"InputKeys",description:"card or other type images",type:"Keys",required:!0,order:13,options:[...this.getcolumnstatements()]}),new $({key:"BooleanKeys",value:z.join(","),label:"BooleanKeys",description:"card or other type images",type:"Keys",required:!0,order:14,options:[...this.getcolumnstatements()]}),new $({key:"TextKeys",value:Pe.join(","),label:"TextKeys",description:"card or other type images",type:"Keys",required:!0,order:15,options:[...this.getcolumnstatements()]}),new $({key:"ToggleKeys",value:Ve.join(","),label:"ToggleKeys",description:"card or other type images",type:"Keys",required:!0,order:16,options:[...this.getcolumnstatements()]}),new $({key:"SelectKeys",value:Fe.join(","),label:"SelectKeys",description:"card or other type images",type:"Keys",required:!0,order:17,options:[...this.getcolumnstatements()]}),new $({key:"DateKeys",value:Ie.join(","),label:"DateKeys",description:"card or other type images",type:"Keys",required:!0,order:18,options:[...this.getcolumnstatements()]}),new $({key:"NavPages",value:$i.join(","),label:"NavPages",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:19,options:[...this.getpagestatements()]}),new $({key:"SearchPage",value:Me,label:"SearchPage",description:"what other pages can this page navigate to",type:"ParentKey",required:!0,order:20,options:[...this.getpagestatements()]}),new $({key:"FilterPages",value:$e.join(","),label:"FilterPages",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:21,options:[...this.getpagestatements()]}),new $({key:"ProviderPages",value:cn.join(","),label:"ProviderPages",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:22,options:[...this.getpagestatements()]}),new $({key:"Components",value:pn.join(","),label:"Components",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:23,options:[...this.getpagestatements()]}),new $({key:"AgentPages",value:dn.join(","),label:"AgentPages",description:"what other pages can this page navigate to",type:"Keys",required:!0,order:24,options:[...this.getpagestatements()]})]}create(){return{key:this.createdElements[0].value,pageType:this.createdElements[1].value,routeKey:this.createdElements[2].value,tableKey:this.createdElements[3].value,displayType:this.createdElements[4].value,idKeys:this.createdElements[5].value.split(","),headerKeys:this.createdElements[6].value.split(","),imageKeys:this.createdElements[7].value.split(","),contentKeys:this.createdElements[8].value.split(","),footerKeys:this.createdElements[9].value.split(","),pickerKeys:this.createdElements[10].value.split(","),rangeKeys:this.createdElements[11].value.split(","),inputKeys:this.createdElements[12].value.split(","),booleanKeys:this.createdElements[13].value.split(","),textKeys:this.createdElements[14].value.split(","),toggleKeys:this.createdElements[15].value.split(","),selectKeys:this.createdElements[16].value.split(","),dateKeys:this.createdElements[17].value.split(","),navPages:this.createdElements[18].value.split(","),searchPage:this.createdElements[19].value,filterPages:this.createdElements[20].value.split(","),providerPages:this.createdElements[21].value.split(","),components:this.createdElements[22].value.split(","),agentPages:this.createdElements[23].value.split(",")}}update(){return this.pagestatement.key=this.createdElements[0].value,this.pagestatement.pageType=this.createdElements[1].value,this.pagestatement.routeKey=this.createdElements[2].value,this.pagestatement.tableKey=this.createdElements[3].value,this.pagestatement.displayType=this.createdElements[4].value,this.pagestatement.idKeys=this.createdElements[5].value.split(","),this.pagestatement.headerKeys=this.createdElements[6].value.split(","),this.pagestatement.imageKeys=this.createdElements[7].value.split(","),this.pagestatement.contentKeys=this.createdElements[8].value.split(","),this.pagestatement.footerKeys=this.createdElements[9].value.split(","),this.pagestatement.pickerKeys=this.createdElements[10].value.split(","),this.pagestatement.rangeKeys=this.createdElements[11].value.split(","),this.pagestatement.inputKeys=this.createdElements[12].value.split(","),this.pagestatement.booleanKeys=this.createdElements[13].value.split(","),this.pagestatement.textKeys=this.createdElements[14].value.split(","),this.pagestatement.toggleKeys=this.createdElements[15].value.split(","),this.pagestatement.selectKeys=this.createdElements[16].value.split(","),this.pagestatement.dateKeys=this.createdElements[17].value.split(","),this.pagestatement.navPages=this.createdElements[18].value.split(","),this.pagestatement.searchPage=this.createdElements[19].value,this.pagestatement.filterPages=this.createdElements[20].value.split(","),this.pagestatement.providerPages=this.createdElements[21].value.split(","),this.pagestatement.components=this.createdElements[22].value.split(","),this.pagestatement.agentPages=this.createdElements[23].value.split(","),this.pagestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0){let n=new Array,a=new Array,c=new Array,l=new Array;for(let u of i)u instanceof Ze&&n.push(u),u instanceof Oe&&a.push(u),u instanceof qe&&c.push(u),u instanceof rt&&l.push(u);this.setRouteStatements(n),this.setTableStatements(a),this.setColumnStatements(c),this.setPageStatements(l)}}}toElements(t){this.pagestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Iv(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Kv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Bv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function $v(r,o){if(r&1&&(p(0,"div",7),T(1,Bv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Lv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Wv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Av(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ov(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function zv(r,o){if(r&1&&(p(0,"div",7),T(1,Ov,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Nv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Rv(r,o){if(r&1&&(p(0,"div",7),T(1,Nv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function qv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function jv(r,o){if(r&1&&(p(0,"div",7),T(1,qv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Uv(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Gv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Yv(r,o){if(r&1&&(p(0,"div",7),T(1,Gv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ea=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(oi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pagestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([oi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Iv,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Kv,1,5,"input",6)(12,$v,3,0,"div",7)(13,Lv,1,5,"input",6)(14,Wv,1,5,"input",6)(15,Av,1,5,"input",6)(16,zv,3,0,"div",7)(17,Rv,3,0,"div",7)(18,jv,3,0,"div",7)(19,Uv,1,4,"textarea",8)(20,Yv,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var si=(()=>{let o=class o{constructor(){this.folders=[],this.codeHelpers=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.codestatement=new _t}setFolders(t){this.folders=t}getFolders(){let t=[];for(let i of this.folders)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}setCodeHelpers(t){this.codeHelpers=t}getCodeHelpers(){let t=[];for(let i of this.codeHelpers)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.folders||[],a=t?.codeHelpers||[];return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"Folders",value:"ObjectTypes",label:"Folders",description:"",type:"ObjectTypes",required:!0,order:2,options:[...this.getFolders()]}),new $({key:"CodeHelpers",value:"ObjectTypes",label:"CodeHelpers",description:"",type:"ObjectTypes",required:!0,order:3,options:[...this.getCodeHelpers()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.codestatement.key=this.createdElements[0].value,this.codestatement}initialize(t){if(this.folders=[],this.codeHelpers=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof tt&&this.folders.push(n),n instanceof Ke&&this.codeHelpers.push(n)}}toElements(t){this.codestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Hv(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Xv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Zv(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Jv(r,o){if(r&1&&(p(0,"div",7),T(1,Zv,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Qv(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ex(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ix(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function nx(r,o){if(r&1&&(p(0,"div",7),T(1,ix,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function rx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function ax(r,o){if(r&1&&(p(0,"div",7),T(1,rx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ox(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function sx(r,o){if(r&1&&(p(0,"div",7),T(1,ox,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function lx(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function cx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function px(r,o){if(r&1&&(p(0,"div",7),T(1,cx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var ba=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(si),I(K))},o.\u0275cmp=H({type:o,selectors:[["codestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([si,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Hv,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Xv,1,5,"input",6)(12,Jv,3,0,"div",7)(13,Qv,1,5,"input",6)(14,ex,1,5,"input",6)(15,tx,1,5,"input",6)(16,nx,3,0,"div",7)(17,ax,3,0,"div",7)(18,sx,3,0,"div",7)(19,lx,1,4,"textarea",8)(20,px,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var li=(()=>{let o=class o{constructor(){this.files=[],this.folders=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.folderstatement=new tt}setFiles(t){this.files=t}getFiles(){let t=[];for(let i of this.files)t.push(new ae(i.key,i.key,"UniqueKey",i.content,""));return t}setFolders(t){this.folders=t}getFolders(){let t=[];for(let i of this.folders)t.push(new ae(i.key,i.key,"UniqueKey","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.files||[],a=t?.folders||[];return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"Files",value:"ObjectTypes",label:"Files",description:"",type:"ObjectTypes",required:!0,order:2,options:[...this.getFiles()]}),new $({key:"Folders",value:"ObjectTypes",label:"Folders",description:"",type:"ObjectTypes",required:!0,order:3,options:[...this.getFolders()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.folderstatement.key=this.createdElements[0].value,this.folderstatement}initialize(t){if(this.files=[],this.folders=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof ht&&this.files.push(n),n instanceof tt&&this.folders.push(n)}}toElements(t){this.folderstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function dx(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function ux(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function mx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function _x(r,o){if(r&1&&(p(0,"div",7),T(1,mx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function hx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function fx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function yx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function vx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function xx(r,o){if(r&1&&(p(0,"div",7),T(1,vx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function gx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Cx(r,o){if(r&1&&(p(0,"div",7),T(1,gx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function wx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Sx(r,o){if(r&1&&(p(0,"div",7),T(1,wx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function kx(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Tx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ex(r,o){if(r&1&&(p(0,"div",7),T(1,Tx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Va=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(li),I(K))},o.\u0275cmp=H({type:o,selectors:[["folderstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([li,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,dx,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,ux,1,5,"input",6)(12,_x,3,0,"div",7)(13,hx,1,5,"input",6)(14,fx,1,5,"input",6)(15,yx,1,5,"input",6)(16,xx,3,0,"div",7)(17,Cx,3,0,"div",7)(18,Sx,3,0,"div",7)(19,kx,1,4,"textarea",8)(20,Ex,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ci=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.filestatement=new ht}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.content||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"Content",value:n,type:"StringType",label:"Content",description:"",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,content:this.createdElements[1].value}}update(){return this.filestatement.key=this.createdElements[0].value,this.filestatement.content=this.createdElements[1].value,this.filestatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.filestatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function bx(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Vx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Px(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Fx(r,o){if(r&1&&(p(0,"div",7),T(1,Px,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Mx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Dx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ix(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Kx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Bx(r,o){if(r&1&&(p(0,"div",7),T(1,Kx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function $x(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Lx(r,o){if(r&1&&(p(0,"div",7),T(1,$x,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Wx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ax(r,o){if(r&1&&(p(0,"div",7),T(1,Wx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ox(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function zx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Nx(r,o){if(r&1&&(p(0,"div",7),T(1,zx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Pa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ci),I(K))},o.\u0275cmp=H({type:o,selectors:[["filestatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ci,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,bx,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Vx,1,5,"input",6)(12,Fx,3,0,"div",7)(13,Mx,1,5,"input",6)(14,Dx,1,5,"input",6)(15,Ix,1,5,"input",6)(16,Bx,3,0,"div",7)(17,Lx,3,0,"div",7)(18,Ax,3,0,"div",7)(19,Ox,1,4,"textarea",8)(20,Nx,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var pi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.paramstatement=new it}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.type||"",a=t?.foreignType||"",c=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"The name of the variable",type:"UniqueKey",required:!0,order:1}),new $({key:"Type",value:n,label:"Type",description:"What type of data is this",type:"StringEnum",required:!0,order:2,options:[{key:"GUID",value:"GUID"},{key:"AUTO",value:"AUTO"},{key:"STRING",value:"STRING"},{key:"NUM",value:"NUM"},{key:"BOOL",value:"BOOL"},{key:"ENUM",value:"ENUM"},{key:"IMAGE",value:"IMAGE"},{key:"DATE",value:"DATE"},{key:"COLOR",value:"COLOR"},{key:"EMAIL",value:"EMAIL"},{key:"PASSWORD",value:"PASSWORD"},{key:"TEL",value:"TEL"},{key:"URL",value:"URL"},{key:"WEEK",value:"WEEK"},{key:"TIME",value:"TIME"},{key:"OBJECT",value:"OBJECT"},{key:"OBJECTS",value:"OBJECTS"},{key:"ONE",value:"ONE"},{key:"MANY",value:"MANY"},{key:"COMPUTED",value:"COMPUTED"}]}),new $({key:"ForeignType",value:a,type:"StringType",label:"ForeignType",description:"Related Type",required:!0,order:3}),new $({key:"Expression",value:c,type:"StringType",label:"Expression",description:"Actual value of the Key",required:!0,order:4})]}create(){return{key:this.createdElements[0].value,type:this.createdElements[1].value,foreignType:this.createdElements[2].value,expression:this.createdElements[3].value}}update(){return this.paramstatement.key=this.createdElements[0].value,this.paramstatement.type=this.createdElements[1].value,this.paramstatement.foreignType=this.createdElements[2].value,this.paramstatement.expression=this.createdElements[3].value,this.paramstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.paramstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Rx(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function qx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function jx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ux(r,o){if(r&1&&(p(0,"div",7),T(1,jx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Gx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Yx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Hx(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Xx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Zx(r,o){if(r&1&&(p(0,"div",7),T(1,Xx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Jx(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Qx(r,o){if(r&1&&(p(0,"div",7),T(1,Jx,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function e1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function t1(r,o){if(r&1&&(p(0,"div",7),T(1,e1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function i1(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function n1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function r1(r,o){if(r&1&&(p(0,"div",7),T(1,n1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Fa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(pi),I(K))},o.\u0275cmp=H({type:o,selectors:[["paramstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([pi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Rx,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,qx,1,5,"input",6)(12,Ux,3,0,"div",7)(13,Gx,1,5,"input",6)(14,Yx,1,5,"input",6)(15,Hx,1,5,"input",6)(16,Zx,3,0,"div",7)(17,Qx,3,0,"div",7)(18,t1,3,0,"div",7)(19,i1,1,4,"textarea",8)(20,r1,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var di=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.returnstatement=new nt}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate();return[new $({key:"Key",value:i,label:"Key",description:"Previously Declared Key",type:"UniqueKey",required:!0,order:1}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"handlebar expession #DeclareKey# ",required:!0,order:2})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value}}update(){return this.returnstatement.key=this.createdElements[0].value,this.returnstatement.expression=this.createdElements[1].value,this.returnstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.returnstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function a1(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function o1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function s1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function l1(r,o){if(r&1&&(p(0,"div",7),T(1,s1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function c1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function p1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function d1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function u1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function m1(r,o){if(r&1&&(p(0,"div",7),T(1,u1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function _1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function h1(r,o){if(r&1&&(p(0,"div",7),T(1,_1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function f1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function y1(r,o){if(r&1&&(p(0,"div",7),T(1,f1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function v1(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function x1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function g1(r,o){if(r&1&&(p(0,"div",7),T(1,x1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ma=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(di),I(K))},o.\u0275cmp=H({type:o,selectors:[["returnstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([di,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,a1,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,o1,1,5,"input",6)(12,l1,3,0,"div",7)(13,c1,1,5,"input",6)(14,p1,1,5,"input",6)(15,d1,1,5,"input",6)(16,m1,3,0,"div",7)(17,h1,3,0,"div",7)(18,y1,3,0,"div",7)(19,v1,1,4,"textarea",8)(20,g1,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var ui=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.branchstatement=new oe}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"";return[new $({key:"Key",value:i,label:"Key",description:"Variable that you are repeating",type:"UniqueKey",required:!0,order:1})]}create(){return{key:this.createdElements[0].value}}update(){return this.branchstatement.key=this.createdElements[0].value,this.branchstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.branchstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function C1(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function w1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function S1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function k1(r,o){if(r&1&&(p(0,"div",7),T(1,S1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function T1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function E1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function b1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function V1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function P1(r,o){if(r&1&&(p(0,"div",7),T(1,V1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function F1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function M1(r,o){if(r&1&&(p(0,"div",7),T(1,F1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function D1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function I1(r,o){if(r&1&&(p(0,"div",7),T(1,D1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function K1(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function B1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function $1(r,o){if(r&1&&(p(0,"div",7),T(1,B1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Da=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ui),I(K))},o.\u0275cmp=H({type:o,selectors:[["branchstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ui,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,C1,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,w1,1,5,"input",6)(12,k1,3,0,"div",7)(13,T1,1,5,"input",6)(14,E1,1,5,"input",6)(15,b1,1,5,"input",6)(16,P1,3,0,"div",7)(17,M1,3,0,"div",7)(18,I1,3,0,"div",7)(19,K1,1,4,"textarea",8)(20,$1,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var mi=(()=>{let o=class o{constructor(){this.lines=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.historystatement=new Je}setLines(t){this.lines=t}getLines(){let t=[];for(let i of this.lines)t.push(new ae(i.expression,i.expression,"StringType","",""));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.lines||[];return[new $({key:"Key",value:i,label:"Key",description:"Create a unique name which can be referenced",type:"UniqueKey",required:!0,order:1}),new $({key:"Lines",value:"ObjectTypes",label:"Lines",description:"",type:"ObjectTypes",required:!0,order:2,options:[...this.getLines()]})]}create(){return{key:this.createdElements[0].value}}update(){return this.historystatement.key=this.createdElements[0].value,this.historystatement}initialize(t){if(this.lines=[],t){let i=t.flatten();if(i.length>0)for(let n of i)n instanceof ze&&this.lines.push(n)}}toElements(t){this.historystatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function L1(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function W1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function A1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function O1(r,o){if(r&1&&(p(0,"div",7),T(1,A1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function z1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function N1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function R1(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function q1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function j1(r,o){if(r&1&&(p(0,"div",7),T(1,q1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function U1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function G1(r,o){if(r&1&&(p(0,"div",7),T(1,U1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Y1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function H1(r,o){if(r&1&&(p(0,"div",7),T(1,Y1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function X1(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Z1(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function J1(r,o){if(r&1&&(p(0,"div",7),T(1,Z1,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ia=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(mi),I(K))},o.\u0275cmp=H({type:o,selectors:[["historystatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([mi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,L1,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,W1,1,5,"input",6)(12,O1,3,0,"div",7)(13,z1,1,5,"input",6)(14,N1,1,5,"input",6)(15,R1,1,5,"input",6)(16,j1,3,0,"div",7)(17,G1,3,0,"div",7)(18,H1,3,0,"div",7)(19,X1,1,4,"textarea",8)(20,J1,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var _i=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.eventstatement=new Ki}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"";return[new $({key:"Key",value:i,label:"Key",description:"Variable that you are repeating",type:"UniqueKey",required:!0,order:1})]}create(){return{key:this.createdElements[0].value}}update(){return this.eventstatement.key=this.createdElements[0].value,this.eventstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.eventstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Q1(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function eg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function ig(r,o){if(r&1&&(p(0,"div",7),T(1,tg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ng(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function rg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function ag(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function og(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function sg(r,o){if(r&1&&(p(0,"div",7),T(1,og,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function lg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function cg(r,o){if(r&1&&(p(0,"div",7),T(1,lg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function pg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function dg(r,o){if(r&1&&(p(0,"div",7),T(1,pg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function ug(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function mg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function _g(r,o){if(r&1&&(p(0,"div",7),T(1,mg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ka=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(_i),I(K))},o.\u0275cmp=H({type:o,selectors:[["eventstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([_i,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Q1,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,eg,1,5,"input",6)(12,ig,3,0,"div",7)(13,ng,1,5,"input",6)(14,rg,1,5,"input",6)(15,ag,1,5,"input",6)(16,sg,3,0,"div",7)(17,cg,3,0,"div",7)(18,dg,3,0,"div",7)(19,ug,1,4,"textarea",8)(20,_g,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var hi=(()=>{let o=class o{constructor(){this.declarestatements=[],this.aststatements=[],this.elementW=122,this.elementH=27,this.createdElements=[],this.dispatchstatement=new Ct}setDeclareStatements(t){this.declarestatements=t}getdeclarestatements(){let t=[],i,n="";for(let a of this.declarestatements)t.find(l=>l.key===a.key)||(i=a.parent,n="",i&&(n=i.getValue("Key"),n||(n="")),t.push(new ae(a.key,a.key,a.type,n,a.foreignType)));return t}setAstStatements(t){this.aststatements=t}getaststatements(){let t=[],i,n="";for(let a of this.aststatements)t.find(l=>l.key===a.getValue("Key"))||t.push(new ae(a.getValue("Key"),a.getValue("Key")));return t}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.fromKey||"",n=t?.toKey||"";return[new $({key:"FromKey",value:i,label:"FromKey",description:"Variable that you are repeating",type:"ParentKey",required:!0,order:1,options:[...this.getdeclarestatements()]}),new $({key:"ToKey",value:n,label:"ToKey",description:"DataType",type:"ParentKey",required:!0,order:2,options:[...this.getaststatements()]})]}create(){return{fromKey:this.createdElements[0].value,toKey:this.createdElements[1].value}}update(){return this.dispatchstatement.fromKey=this.createdElements[0].value,this.dispatchstatement.toKey=this.createdElements[1].value,this.dispatchstatement}initialize(t){if(t){let n=t.flatten();if(n.length>0){let c=new Array;for(let l of n)l instanceof De&&c.push(l);this.setDeclareStatements(c)}let a=new Array;for(let c of n){var i=c.keyValue();for(let l of i)if(l.key==="Key"){if(l.value===void 0||a.includes(c))continue;a.push(c)}}this.setAstStatements(a)}}toElements(t){this.dispatchstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function hg(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function fg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function yg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function vg(r,o){if(r&1&&(p(0,"div",7),T(1,yg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function xg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function gg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Cg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function wg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Sg(r,o){if(r&1&&(p(0,"div",7),T(1,wg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function kg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Tg(r,o){if(r&1&&(p(0,"div",7),T(1,kg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Eg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function bg(r,o){if(r&1&&(p(0,"div",7),T(1,Eg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Vg(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Pg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Fg(r,o){if(r&1&&(p(0,"div",7),T(1,Pg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Ba=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(hi),I(K))},o.\u0275cmp=H({type:o,selectors:[["dispatchstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([hi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,hg,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,fg,1,5,"input",6)(12,vg,3,0,"div",7)(13,xg,1,5,"input",6)(14,gg,1,5,"input",6)(15,Cg,1,5,"input",6)(16,Sg,3,0,"div",7)(17,Tg,3,0,"div",7)(18,bg,3,0,"div",7)(19,Vg,1,4,"textarea",8)(20,Fg,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var fi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.actionstatement=new Bi}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"";return[new $({key:"Key",value:i,label:"Key",description:"Variable that you are repeating",type:"UniqueKey",required:!0,order:1})]}create(){return{key:this.createdElements[0].value}}update(){return this.actionstatement.key=this.createdElements[0].value,this.actionstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.actionstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Mg(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Dg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Ig(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Kg(r,o){if(r&1&&(p(0,"div",7),T(1,Ig,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Bg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function $g(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Lg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Wg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Ag(r,o){if(r&1&&(p(0,"div",7),T(1,Wg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Og(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function zg(r,o){if(r&1&&(p(0,"div",7),T(1,Og,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Ng(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Rg(r,o){if(r&1&&(p(0,"div",7),T(1,Ng,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function qg(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function jg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Ug(r,o){if(r&1&&(p(0,"div",7),T(1,jg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var $a=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(fi),I(K))},o.\u0275cmp=H({type:o,selectors:[["actionstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([fi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Mg,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Dg,1,5,"input",6)(12,Kg,3,0,"div",7)(13,Bg,1,5,"input",6)(14,$g,1,5,"input",6)(15,Lg,1,5,"input",6)(16,Ag,3,0,"div",7)(17,zg,3,0,"div",7)(18,Rg,3,0,"div",7)(19,qg,1,4,"textarea",8)(20,Ug,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var yi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.awaitstatement=new Mi}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"";return[new $({key:"Key",value:i,label:"Key",description:"Variable that you are repeating",type:"UniqueKey",required:!0,order:1})]}create(){return{key:this.createdElements[0].value}}update(){return this.awaitstatement.key=this.createdElements[0].value,this.awaitstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.awaitstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function Gg(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function Yg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Hg(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function Xg(r,o){if(r&1&&(p(0,"div",7),T(1,Hg,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function Zg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Jg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Qg(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function e2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function t2(r,o){if(r&1&&(p(0,"div",7),T(1,e2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function i2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function n2(r,o){if(r&1&&(p(0,"div",7),T(1,i2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function r2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function a2(r,o){if(r&1&&(p(0,"div",7),T(1,r2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function o2(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function s2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function l2(r,o){if(r&1&&(p(0,"div",7),T(1,s2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var La=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(yi),I(K))},o.\u0275cmp=H({type:o,selectors:[["awaitstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([yi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,Gg,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,Yg,1,5,"input",6)(12,Xg,3,0,"div",7)(13,Zg,1,5,"input",6)(14,Jg,1,5,"input",6)(15,Qg,1,5,"input",6)(16,t2,3,0,"div",7)(17,n2,3,0,"div",7)(18,a2,3,0,"div",7)(19,o2,1,4,"textarea",8)(20,l2,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var vi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.endstatement=new Wi}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.fromKey||"",n=t?.comment||"";return[new $({key:"FromKey",value:i,type:"StringType",label:"FromKey",description:"",required:!0,order:1}),new $({key:"Comment",value:n,type:"StringType",label:"Comment",description:"",required:!0,order:2})]}create(){return{fromKey:this.createdElements[0].value,comment:this.createdElements[1].value}}update(){return this.endstatement.fromKey=this.createdElements[0].value,this.endstatement.comment=this.createdElements[1].value,this.endstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.endstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function c2(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function p2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function d2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function u2(r,o){if(r&1&&(p(0,"div",7),T(1,d2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function m2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function _2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function h2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function f2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function y2(r,o){if(r&1&&(p(0,"div",7),T(1,f2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function v2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function x2(r,o){if(r&1&&(p(0,"div",7),T(1,v2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function g2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function C2(r,o){if(r&1&&(p(0,"div",7),T(1,g2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function w2(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function S2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function k2(r,o){if(r&1&&(p(0,"div",7),T(1,S2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Wa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(vi),I(K))},o.\u0275cmp=H({type:o,selectors:[["endstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([vi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,c2,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,p2,1,5,"input",6)(12,u2,3,0,"div",7)(13,m2,1,5,"input",6)(14,_2,1,5,"input",6)(15,h2,1,5,"input",6)(16,y2,3,0,"div",7)(17,x2,3,0,"div",7)(18,C2,3,0,"div",7)(19,w2,1,4,"textarea",8)(20,k2,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var xi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.linkstatement=new Le}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.fromKey||"",n=t?.toKey||"",a=t?.type||"",c=t?.toType||"",l=t?.x||0,u=t?.y||0,f=t?.w||0,C=t?.h||0,y=t?.where||"",B=t?.name||"",k=t?.content||this.getHashTemplate();return[new $({key:"FromKey",value:i,label:"FromKey",description:"",type:"UniqueKey",required:!0,order:1}),new $({key:"ToKey",value:n,label:"ToKey",description:"",type:"UniqueKey",required:!0,order:2}),new $({key:"Type",value:a,type:"StringType",label:"Type",description:"",required:!1,order:3}),new $({key:"ToType",value:c,type:"StringType",label:"ToType",description:"",required:!0,order:4}),new $({key:"X",value:l.toString(),type:"DoubleType",label:"X",description:"",required:!0,order:5}),new $({key:"Y",value:u.toString(),type:"DoubleType",label:"Y",description:"",required:!0,order:6}),new $({key:"W",value:f.toString(),type:"DoubleType",label:"W",description:"",required:!0,order:7}),new $({key:"H",value:C.toString(),type:"DoubleType",label:"H",description:"",required:!0,order:8}),new $({key:"Where",value:y,label:"Where",description:"",type:"StringEnum",required:!0,order:9,options:[{key:"RightMiddleToTopMiddle",value:"RightMiddleToTopMiddle"},{key:"RightMiddleToTopLeft",value:"RightMiddleToTopLeft"},{key:"RightMiddleToTopRight",value:"RightMiddleToTopRight"},{key:"RightMiddleToRightMiddle",value:"RightMiddleToRightMiddle"},{key:"LeftMiddleToTopMiddle",value:"LeftMiddleToTopMiddle"},{key:"LeftMiddleToTopLeft",value:"LeftMiddleToTopLeft"},{key:"LeftMiddleToTopRight",value:"LeftMiddleToTopRight"},{key:"LeftMiddleToLeftMiddle",value:"LeftMiddleToLeftMiddle"},{key:"BottomMiddleToTopMiddle",value:"BottomMiddleToTopMiddle"},{key:"BottomMiddleToTopLeft",value:"BottomMiddleToTopLeft"},{key:"BottomMiddleToTopRight",value:"BottomMiddleToTopRight"},{key:"BottomMiddleToLeftMiddle",value:"BottomMiddleToLeftMiddle"},{key:"RightMiddleToLeftMiddle",value:"RightMiddleToLeftMiddle"}]}),new $({key:"Name",value:B,type:"StringType",label:"Name",description:"",required:!0,order:10}),new $({key:"Content",value:k,type:"StringType",label:"Content",description:"",required:!0,order:11})]}create(){return{fromKey:this.createdElements[0].value,toKey:this.createdElements[1].value,type:this.createdElements[2].value,toType:this.createdElements[3].value,x:parseInt(this.createdElements[4].value),y:parseInt(this.createdElements[5].value),w:parseInt(this.createdElements[6].value),h:parseInt(this.createdElements[7].value),where:this.createdElements[8].value,name:this.createdElements[9].value,content:this.createdElements[10].value}}update(){return this.linkstatement.fromKey=this.createdElements[0].value,this.linkstatement.toKey=this.createdElements[1].value,this.linkstatement.type=this.createdElements[2].value,this.linkstatement.toType=this.createdElements[3].value,this.linkstatement.x=parseInt(this.createdElements[4].value),this.linkstatement.y=parseInt(this.createdElements[5].value),this.linkstatement.w=parseInt(this.createdElements[6].value),this.linkstatement.h=parseInt(this.createdElements[7].value),this.linkstatement.where=this.createdElements[8].value,this.linkstatement.name=this.createdElements[9].value,this.linkstatement.content=this.createdElements[10].value,this.linkstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.linkstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function T2(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function E2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function b2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function V2(r,o){if(r&1&&(p(0,"div",7),T(1,b2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function P2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function F2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function M2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function D2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function I2(r,o){if(r&1&&(p(0,"div",7),T(1,D2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function K2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function B2(r,o){if(r&1&&(p(0,"div",7),T(1,K2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function $2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function L2(r,o){if(r&1&&(p(0,"div",7),T(1,$2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function W2(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function A2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function O2(r,o){if(r&1&&(p(0,"div",7),T(1,A2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Aa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(xi),I(K))},o.\u0275cmp=H({type:o,selectors:[["linkstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([xi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,T2,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,E2,1,5,"input",6)(12,V2,3,0,"div",7)(13,P2,1,5,"input",6)(14,F2,1,5,"input",6)(15,M2,1,5,"input",6)(16,I2,3,0,"div",7)(17,B2,3,0,"div",7)(18,L2,3,0,"div",7)(19,W2,1,4,"textarea",8)(20,O2,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();var gi=(()=>{let o=class o{constructor(){this.elementW=122,this.elementH=27,this.createdElements=[],this.pairstatement=new Ai}getHashTemplate(){let t="",i=new Array;for(let n of i)t+=`#${n.key}# `;return t}createElements(t){let i=t?.key||"",n=t?.expression||this.getHashTemplate(),a=t?.type||"";return[new $({key:"Key",value:i,label:"Key",description:"Variable that you are repeating",type:"UniqueKey",required:!0,order:1}),new $({key:"Expression",value:n,type:"StringType",label:"Expression",description:"",required:!0,order:2}),new $({key:"Type",value:a,type:"StringType",label:"Type",description:"",required:!1,order:3})]}create(){return{key:this.createdElements[0].value,expression:this.createdElements[1].value,type:this.createdElements[2].value}}update(){return this.pairstatement.key=this.createdElements[0].value,this.pairstatement.expression=this.createdElements[1].value,this.pairstatement.type=this.createdElements[2].value,this.pairstatement}initialize(t){if(t){let i=t.flatten();if(i.length>0)for(let n of i);}}toElements(t){this.pairstatement=t;let i=this.createElements(t);return this.createdElements=i,i}getElements(){return this.createElements()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=Se({token:o,factory:o.\u0275fac});let r=o;return r})();function z2(r,o){if(r&1){let e=g();p(0,"div",9),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(1),d(),p(2,"div",10),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setElement(i))}),x(3),d()}if(r&2){let e=o.$implicit,t=s();S("active",e===t.current),m(),V("enter: ",e.label,""),m(),S("active",e===t.current),m(),q(e.value?e.value:"...")}}function N2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function R2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function q2(r,o){if(r&1&&(p(0,"div",7),T(1,R2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function j2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","text"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function U2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function G2(r,o){if(r&1){let e=g();p(0,"input",11),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1)("type","number"),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function Y2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function H2(r,o){if(r&1&&(p(0,"div",7),T(1,Y2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function X2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Z2(r,o){if(r&1&&(p(0,"div",7),T(1,X2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function J2(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.hasValue(t.data,t.current,e)),m(),V(" ",e.key," ")}}function Q2(r,o){if(r&1&&(p(0,"div",7),T(1,J2,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}function eC(r,o){if(r&1){let e=g();p(0,"textarea",14),D("ngModelChange",function(i){_(e);let n=s();return M(n.current.value,i)||(n.current.value=i),h(i)}),d()}if(r&2){let e=s();w("id",e.current.value)("spellcheck",!1),F("ngModel",e.current.value),w("placeholder",e.current.label)}}function tC(r,o){if(r&1){let e=g();p(0,"div",13),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.updateValue(n.data,n.current,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2);S("active",t.current.value===e.value),m(),V(" ",e.key," ")}}function iC(r,o){if(r&1&&(p(0,"div",7),T(1,tC,2,3,"div",12,b),d()),r&2){let e=s();m(),E(e.current.options)}}var Oa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(gi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pairstatement-chat"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([gi,K]),X],decls:21,vars:7,consts:[[1,"builder","form"],[1,"builder-top"],[1,"bubbles"],[1,"builder-label"],[1,"update",3,"click"],[1,"builder-bottom"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[1,"bubble","bubble-start",3,"click"],[1,"bubble","bubble-end",3,"click"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),T(3,z2,4,6,null,null,b),d()(),p(5,"div",3)(6,"label"),x(7),d(),p(8,"button",4),v("click",function(){return n.onSubmit()}),x(9,"Update"),d()(),p(10,"div",5),O(11,N2,1,5,"input",6)(12,q2,3,0,"div",7)(13,j2,1,5,"input",6)(14,U2,1,5,"input",6)(15,G2,1,5,"input",6)(16,H2,3,0,"div",7)(17,Z2,3,0,"div",7)(18,Q2,3,0,"div",7)(19,eC,1,4,"textarea",8)(20,iC,3,0,"div",7),d()()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px"),m(3),E(n.elements()),m(4),xe("",n.current.label," : ",n.current.description,""),m(4),N(n.current.type==="StringType"?11:n.current.type==="StringEnum"?12:n.current.type==="UniqueKey"||n.current.type==="GuidKeyType"||n.current.type==="NumericKeyType"?13:n.current.type==="BooleanType"?14:n.current.type==="IntegerType"||n.current.type==="DoubleType"?15:n.current.type==="ParentKey"?16:n.current.type==="Keys"?17:n.current.type==="NextKey"?18:n.current.type==="SourceCode"?19:n.current.type==="ObjectTypes"||n.current.type==="ObjectType"?20:-1))},dependencies:[J,ne,le,ce,ee,pe],encapsulation:2});let r=o;return r})();function nC(r,o){if(r&1){let e=g();p(0,"planstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function rC(r,o){if(r&1){let e=g();p(0,"agentstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function aC(r,o){if(r&1){let e=g();p(0,"declarestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function oC(r,o){if(r&1){let e=g();p(0,"assignstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function sC(r,o){if(r&1){let e=g();p(0,"ifstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function lC(r,o){if(r&1){let e=g();p(0,"thenstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function cC(r,o){if(r&1){let e=g();p(0,"elseifstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function pC(r,o){if(r&1){let e=g();p(0,"elsestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function dC(r,o){if(r&1){let e=g();p(0,"instatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function uC(r,o){if(r&1){let e=g();p(0,"pickstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function mC(r,o){if(r&1){let e=g();p(0,"substatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function _C(r,o){if(r&1){let e=g();p(0,"childstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function hC(r,o){if(r&1){let e=g();p(0,"infantstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function fC(r,o){if(r&1){let e=g();p(0,"outstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function yC(r,o){if(r&1){let e=g();p(0,"remstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function vC(r,o){if(r&1){let e=g();p(0,"switchstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function xC(r,o){if(r&1){let e=g();p(0,"casestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function gC(r,o){if(r&1){let e=g();p(0,"defaultstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function CC(r,o){if(r&1){let e=g();p(0,"forstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function wC(r,o){if(r&1){let e=g();p(0,"foreachstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function SC(r,o){if(r&1){let e=g();p(0,"whilestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function kC(r,o){if(r&1){let e=g();p(0,"dostatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function TC(r,o){if(r&1){let e=g();p(0,"callstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function EC(r,o){if(r&1){let e=g();p(0,"promptstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function bC(r,o){if(r&1){let e=g();p(0,"linestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function VC(r,o){if(r&1){let e=g();p(0,"invokestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function PC(r,o){if(r&1){let e=g();p(0,"projectstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function FC(r,o){if(r&1){let e=g();p(0,"schemastatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function MC(r,o){if(r&1){let e=g();p(0,"tablestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function DC(r,o){if(r&1){let e=g();p(0,"columnstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function IC(r,o){if(r&1){let e=g();p(0,"enumstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function KC(r,o){if(r&1){let e=g();p(0,"valuestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function BC(r,o){if(r&1){let e=g();p(0,"seedstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function $C(r,o){if(r&1){let e=g();p(0,"recordstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function LC(r,o){if(r&1){let e=g();p(0,"fieldstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function WC(r,o){if(r&1){let e=g();p(0,"apistatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function AC(r,o){if(r&1){let e=g();p(0,"routestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function OC(r,o){if(r&1){let e=g();p(0,"designstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function zC(r,o){if(r&1){let e=g();p(0,"pagestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function NC(r,o){if(r&1){let e=g();p(0,"codestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function RC(r,o){if(r&1){let e=g();p(0,"folderstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function qC(r,o){if(r&1){let e=g();p(0,"filestatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function jC(r,o){if(r&1){let e=g();p(0,"paramstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function UC(r,o){if(r&1){let e=g();p(0,"returnstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function GC(r,o){if(r&1){let e=g();p(0,"branchstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function YC(r,o){if(r&1){let e=g();p(0,"historystatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function HC(r,o){if(r&1){let e=g();p(0,"eventstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function XC(r,o){if(r&1){let e=g();p(0,"dispatchstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function ZC(r,o){if(r&1){let e=g();p(0,"actionstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function JC(r,o){if(r&1){let e=g();p(0,"awaitstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function QC(r,o){if(r&1){let e=g();p(0,"endstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function ew(r,o){if(r&1){let e=g();p(0,"linkstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function tw(r,o){if(r&1){let e=g();p(0,"pairstatement-chat",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}var za=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data?this.editing=this._data:this._data={}}constructor(t){this.store=t,this.w=L.required(),this.h=L.required(),this.dataEdited=new Q,this.editing={},this._data={}}ngOnInit(){}loadAssets(){return W(this,null,function*(){})}onInputChange(){this.dataEdited.emit(this.data)}};o.\u0275fac=function(i){return new(i||o)(I(te))},o.\u0275cmp=H({type:o,selectors:[["chat-forms"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[X],decls:53,vars:1,consts:[[3,"data","root","w","h"],[3,"dataEdited","data","root","w","h"]],template:function(i,n){i&1&&O(0,nC,1,4,"planstatement-chat",0)(1,rC,1,4,"agentstatement-chat",0)(2,aC,1,4,"declarestatement-chat",0)(3,oC,1,4,"assignstatement-chat",0)(4,sC,1,4,"ifstatement-chat",0)(5,lC,1,4,"thenstatement-chat",0)(6,cC,1,4,"elseifstatement-chat",0)(7,pC,1,4,"elsestatement-chat",0)(8,dC,1,4,"instatement-chat",0)(9,uC,1,4,"pickstatement-chat",0)(10,mC,1,4,"substatement-chat",0)(11,_C,1,4,"childstatement-chat",0)(12,hC,1,4,"infantstatement-chat",0)(13,fC,1,4,"outstatement-chat",0)(14,yC,1,4,"remstatement-chat",0)(15,vC,1,4,"switchstatement-chat",0)(16,xC,1,4,"casestatement-chat",0)(17,gC,1,4,"defaultstatement-chat",0)(18,CC,1,4,"forstatement-chat",0)(19,wC,1,4,"foreachstatement-chat",0)(20,SC,1,4,"whilestatement-chat",0)(21,kC,1,4,"dostatement-chat",0)(22,TC,1,4,"callstatement-chat",0)(23,EC,1,4,"promptstatement-chat",0)(24,bC,1,4,"linestatement-chat",0)(25,VC,1,4,"invokestatement-chat",0)(26,PC,1,4,"projectstatement-chat",0)(27,FC,1,4,"schemastatement-chat",0)(28,MC,1,4,"tablestatement-chat",0)(29,DC,1,4,"columnstatement-chat",0)(30,IC,1,4,"enumstatement-chat",0)(31,KC,1,4,"valuestatement-chat",0)(32,BC,1,4,"seedstatement-chat",0)(33,$C,1,4,"recordstatement-chat",0)(34,LC,1,4,"fieldstatement-chat",0)(35,WC,1,4,"apistatement-chat",0)(36,AC,1,4,"routestatement-chat",0)(37,OC,1,4,"designstatement-chat",0)(38,zC,1,4,"pagestatement-chat",0)(39,NC,1,4,"codestatement-chat",0)(40,RC,1,4,"folderstatement-chat",0)(41,qC,1,4,"filestatement-chat",0)(42,jC,1,4,"paramstatement-chat",0)(43,UC,1,4,"returnstatement-chat",0)(44,GC,1,4,"branchstatement-chat",0)(45,YC,1,4,"historystatement-chat",0)(46,HC,1,4,"eventstatement-chat",0)(47,XC,1,4,"dispatchstatement-chat",0)(48,ZC,1,4,"actionstatement-chat",0)(49,JC,1,4,"awaitstatement-chat",0)(50,QC,1,4,"endstatement-chat",0)(51,ew,1,4,"linkstatement-chat",0)(52,tw,1,4,"pairstatement-chat",0),i&2&&N(n.editing.builderType==="PlanStatement"?0:n.editing.builderType==="AgentStatement"?1:n.editing.builderType==="DeclareStatement"?2:n.editing.builderType==="AssignStatement"?3:n.editing.builderType==="IfStatement"?4:n.editing.builderType==="ThenStatement"?5:n.editing.builderType==="ElseIfStatement"?6:n.editing.builderType==="ElseStatement"?7:n.editing.builderType==="InStatement"?8:n.editing.builderType==="PickStatement"?9:n.editing.builderType==="SubStatement"?10:n.editing.builderType==="ChildStatement"?11:n.editing.builderType==="InfantStatement"?12:n.editing.builderType==="OutStatement"?13:n.editing.builderType==="RemStatement"?14:n.editing.builderType==="SwitchStatement"?15:n.editing.builderType==="CaseStatement"?16:n.editing.builderType==="DefaultStatement"?17:n.editing.builderType==="ForStatement"?18:n.editing.builderType==="ForEachStatement"?19:n.editing.builderType==="WhileStatement"?20:n.editing.builderType==="DoStatement"?21:n.editing.builderType==="CallStatement"?22:n.editing.builderType==="PromptStatement"?23:n.editing.builderType==="LineStatement"?24:n.editing.builderType==="InvokeStatement"?25:n.editing.builderType==="ProjectStatement"?26:n.editing.builderType==="SchemaStatement"?27:n.editing.builderType==="TableStatement"?28:n.editing.builderType==="ColumnStatement"?29:n.editing.builderType==="EnumStatement"?30:n.editing.builderType==="ValueStatement"?31:n.editing.builderType==="SeedStatement"?32:n.editing.builderType==="RecordStatement"?33:n.editing.builderType==="FieldStatement"?34:n.editing.builderType==="ApiStatement"?35:n.editing.builderType==="RouteStatement"?36:n.editing.builderType==="DesignStatement"?37:n.editing.builderType==="PageStatement"?38:n.editing.builderType==="CodeStatement"?39:n.editing.builderType==="FolderStatement"?40:n.editing.builderType==="FileStatement"?41:n.editing.builderType==="ParamStatement"?42:n.editing.builderType==="ReturnStatement"?43:n.editing.builderType==="BranchStatement"?44:n.editing.builderType==="HistoryStatement"?45:n.editing.builderType==="EventStatement"?46:n.editing.builderType==="DispatchStatement"?47:n.editing.builderType==="ActionStatement"?48:n.editing.builderType==="AwaitStatement"?49:n.editing.builderType==="EndStatement"?50:n.editing.builderType==="LinkStatement"?51:n.editing.builderType==="PairStatement"?52:-1)},dependencies:[J,ee,Nr,Rr,qr,jr,Ur,Gr,Yr,Hr,Xr,Zr,Jr,Qr,ea,ta,ia,na,ra,aa,oa,sa,la,ca,pa,da,ua,ma,_a,ha,fa,ya,va,xa,ga,Ca,wa,Sa,ka,Ta,Ea,ba,Va,Pa,Fa,Ma,Da,Ia,Ka,Ba,$a,La,Wa,Aa,Oa]});let r=o;return r})();var vr=class r{constructor(o,e,t,i,n,a,c){this.id=o,this.x=e,this.y=t,this.w=i,this.h=n,this.radius=a,this.children=c}static convertToNode(o){let e=new r(o.id,o.shape.x,o.shape.y,o.shape.width,o.shape.height,o.shape.radius,[]);for(let t of o.getChildren())e.children.push(r.convertToNode(t));return e}static flatten(o,e){for(let t of o){let i=new r(t.data.id,t.data.x,t.data.y,t.data.w,t.data.h,t.data.radius,[]);e.push(i),t.children&&r.flatten(t.children,e)}}},xr=class{constructor(){this.CENTER_X=600,this.CENTER_Y=600}arrangeNodes(o){o.shape.x=this.CENTER_X,o.shape.y=this.CENTER_Y,o.shape.radius=this.getNodeSizeForLevel(1);let e=o.getChildren(),t=2*Math.PI/e.length;e.forEach((i,n)=>{let a=n*t-Math.PI/2;this.arrangeChild(i,a,2)})}arrangeChild(o,e,t){let i=this.getNodeSizeForLevel(t)*2,n=this.CENTER_X+i*Math.cos(e),a=this.CENTER_Y+i*Math.sin(e);o.shape.x=n,o.shape.y=a,o.shape.radius=this.getNodeSizeForLevel(t);let c=o.getChildren(),l=2*Math.PI/c.length;c.forEach((u,f)=>{let C=e+f*l;this.arrangeChild(u,C,t+1)})}getNodeSizeForLevel(o){switch(o){case 1:return 50;case 2:return 40;case 3:return 30;case 4:return 20;default:return 10}}},ke=new xr,gr=class{constructor(){this.nodes=[]}placeRadially(o,e,t){if(!o||!o.shape)return;this.initializeRootPosition(o,e,t);let n=this.getMaxChildren(o)*6,a=o.getChildren();this.placeChildrenRadially(o,a.length,e,t,1,o.shape.radius,0,2*Math.PI,n)}initializeRootPosition(o,e,t){o.shape.x=e/2,o.shape.y=t/2,o.shape.radius=this.calculateNodeRadius(o.heading,o.getChildren().length),this.nodes.push({x:o.shape.x,y:o.shape.y,radius:o.shape.radius})}getMaxChildren(o){let e=o.getChildren().length;return o.getChildren().forEach(t=>{e=Math.max(e,this.getMaxChildren(t))}),e}placeChildrenRadially(o,e,t,i,n,a,c,l,u){let f=o.getChildren();if(f.length===0)return;let y=(l-c)/e;f.forEach((B,k)=>{this.placeChild(o,B,k,y,u,a,c,t,i,n)})}placeChild(o,e,t,i,n,a,c,l,u,f){let C=c+t*i,y=a+n,B=o.shape.x+y*Math.cos(C),k=o.shape.y+y*Math.sin(C),A=this.calculateNodeRadius(e.heading,o.getChildren().length);if(this.checkOverlap(B,k,A)&&(B=this.adjustX(B,o.shape.x,y,C),k=this.adjustY(k,o.shape.y,y,C)),e.shape.angle=C,e.shape.x=B,e.shape.y=k,e.shape.radius=A,this.nodes.push({x:B,y:k,radius:A}),e.getChildren().length>0){let Y=C-i/2,z=C+i/2;this.placeChildrenRadially(e,e.getChildren().length,l,u,f+1,y,Y,z,n)}else this.placeLeaf(e,t,o.getChildren().length)}placeLeaf(o,e,t){let i=2*Math.PI/t,n=e*i,a=32;o.shape.x+=a*Math.cos(n),o.shape.y+=a*Math.sin(n),o.shape.radius=32}calculateNodeRadius(o,e){return 40}checkOverlap(o,e,t){return this.nodes.some(i=>{let n=i.x-o,a=i.y-e;return Math.sqrt(n*n+a*a)<i.radius+t})}adjustX(o,e,t,i){return o+t*.1*Math.cos(i)}adjustY(o,e,t,i){return o+t*.1*Math.sin(i)}applyForceDirectedAlgorithm(){for(let i=0;i<10;i++)this.nodes.forEach((n,a)=>{let c=0,l=0;this.nodes.forEach((u,f)=>{if(a!==f){let C=n.x-u.x,y=n.y-u.y,B=Math.sqrt(C*C+y*y);if(B<n.radius+u.radius){let k=1e3/(B*B);c+=k*(C/B),l+=k*(y/B)}}}),n.x+=c*2.51,n.y+=l*2.51})}},Te=new gr,Cr=class{arrangeRootGroup(o,e,t,i=212){o.shape.x=e,o.shape.y=t,o.shape.radius=30;let n=o.flatten();for(let a of n)(a.shape.radius===void 0||a.shape.radius===0||a.shape.radius===null||isNaN(a.shape.radius))&&(a.shape.radius=30);this.arrangeGroup(o,e,t,i,0,360)}arrangeGroup(o,e,t,i,n,a){(o.shape.radius===void 0||o.shape.radius===0||o.shape.radius===null||isNaN(o.shape.radius))&&(o.shape.radius=30);let c=(a-n)/(o.groups.length+1),l=n+c;o.shape.angle=l;let u=0;for(let f of o.groups){(f.shape.radius===void 0||f.shape.radius===0||f.shape.radius===null||isNaN(f.shape.radius))&&(f.shape.radius=30);let C=2;if(f.groups.length===0){u++,C=o.shape.radius*2*u;let y=o.shape.angle*Math.PI/180,B=Math.cos(y)*C,k=Math.sin(y)*C;f.shape.x=o.shape.x+B,f.shape.y=o.shape.y+k,f.shape.angle=o.shape.angle}else{let y=l*Math.PI/180,B=e+Math.cos(y)*i,k=t+Math.sin(y)*i;f.shape.x=B,f.shape.y=k,this.arrangeGroup(f,B,k,i/2,l-c/2,l+c/2),l+=c,f.shape.angle=l}}}arrangeNodesRadially(o,e,t,i=212){o.shape.x=e,o.shape.y=t;let n=o.flatten();for(let a of n)(a.shape.radius===void 0||a.shape.radius===0||a.shape.radius===null||isNaN(a.shape.radius))&&(a.shape.radius=50);this.arrangeNode(o,e,t,i,0,360)}arrangeNode(o,e,t,i,n,a){let c=(a-n)/(o.getChildren().length+1),l=n+c;o.shape.angle=l;let u=0,f=o.getChildren();for(let C of f){let y=2;if(C.getChildren().length===0){u++,y=o.shape.radius*u;let B=o.shape.angle*Math.PI/180,k=Math.cos(B)*y,A=Math.sin(B)*y;C.shape.x=o.shape.x+k,C.shape.y=o.shape.y+A,C.shape.angle=o.shape.angle}else{let B=l*Math.PI/180,k=e+Math.cos(B)*i,A=t+Math.sin(B)*i;C.shape.x=k,C.shape.y=A,this.arrangeNode(C,k,A,i/2,l-c/2,l+c/2),l+=c,C.shape.angle=l}}}},Ee=new Cr,wr=class{generate(o,e,t,i,n){let a=vr.convertToNode(t),c=$r(a,u=>u.children),l=t.flatten();o===1?(Lr().size([i,n]).padding(3).radius(f=>50)(c),this.updateNodeCoordinates(c,e,l)):o===2?(Wr().size([i,n])(c),this.updateNodeCoordinates(c,e,l)):o===3&&(Br().size([i,n]).separation((f,C)=>(f.parent===C.parent?1:2)/f.depth)(c),this.updateNodeCoordinates(c,e,l))}updateNodeCoordinates(o,e,t){for(let n of o.descendants()){var i=t.find(a=>a.id===n.data.id);i?e===0?(i.shape.x=n.y,i.shape.y=n.x):(i.shape.x=n.x,i.shape.y=n.y):console.log("not found",n.data.id)}}},de=new wr;function iw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function nw(r,o){if(r&1&&O(0,iw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function rw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,nw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function aw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function ow(r,o){if(r&1&&O(0,aw,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function sw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,ow,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function lw(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,rw,3,7,null,null,b),d(),p(3,"g"),T(4,sw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Na=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.planstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.planstatement()||!this.planstatement().key||!a.length)return;let c=new oe;c.from=this.planstatement(),c.key=this.planstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.planstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["planstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([wt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"planstatement"],[1,"planstatement-header"],[1,"very-small-button",3,"click"],[1,"planstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,lw,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.planstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"planstatement-header" "planstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.planstatement-header[_ngcontent-%COMP%]{grid-area:planstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.planstatement-right-top[_ngcontent-%COMP%]{grid-area:planstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function cw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function pw(r,o){if(r&1&&O(0,cw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function dw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,pw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function uw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function mw(r,o){if(r&1&&O(0,uw,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function _w(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,mw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function hw(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,dw,3,7,null,null,b),d(),p(3,"g"),T(4,_w,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ra=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.agentstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.agentstatement()||!this.agentstatement().key||!a.length)return;let c=new oe;c.from=this.agentstatement(),c.key=this.agentstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.agentstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(St),I(K))},o.\u0275cmp=H({type:o,selectors:[["agentstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([St,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"agentstatement"],[1,"agentstatement-header"],[1,"very-small-button",3,"click"],[1,"agentstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,hw,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.agentstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"agentstatement-header" "agentstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.agentstatement-header[_ngcontent-%COMP%]{grid-area:agentstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.agentstatement-right-top[_ngcontent-%COMP%]{grid-area:agentstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function fw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function yw(r,o){if(r&1&&O(0,fw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function vw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,yw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function xw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function gw(r,o){if(r&1&&O(0,xw,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Cw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,gw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function ww(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,vw,3,7,null,null,b),d(),p(3,"g"),T(4,Cw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var qa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.declarestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.declarestatement()||!this.declarestatement().key||!a.length)return;let c=new oe;c.from=this.declarestatement(),c.key=this.declarestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.declarestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["declarestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([kt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"declarestatement"],[1,"declarestatement-header"],[1,"very-small-button",3,"click"],[1,"declarestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,ww,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.declarestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"declarestatement-header" "declarestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.declarestatement-header[_ngcontent-%COMP%]{grid-area:declarestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.declarestatement-right-top[_ngcontent-%COMP%]{grid-area:declarestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Sw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function kw(r,o){if(r&1&&O(0,Sw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Tw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,kw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Ew(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function bw(r,o){if(r&1&&O(0,Ew,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Vw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,bw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Pw(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Tw,3,7,null,null,b),d(),p(3,"g"),T(4,Vw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var ja=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.assignstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.assignstatement()||!a.length)return;let c=new oe;c.from=this.assignstatement(),c.key="assignstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.assignstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Tt),I(K))},o.\u0275cmp=H({type:o,selectors:[["assignstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Tt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"assignstatement"],[1,"assignstatement-header"],[1,"very-small-button",3,"click"],[1,"assignstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Pw,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.assignstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"assignstatement-header" "assignstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.assignstatement-header[_ngcontent-%COMP%]{grid-area:assignstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.assignstatement-right-top[_ngcontent-%COMP%]{grid-area:assignstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Fw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Mw(r,o){if(r&1&&O(0,Fw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Dw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Mw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Iw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Kw(r,o){if(r&1&&O(0,Iw,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Bw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Kw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function $w(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Dw,3,7,null,null,b),d(),p(3,"g"),T(4,Bw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ua=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.ifstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.ifstatement()||!a.length)return;let c=new oe;c.from=this.ifstatement(),c.key="ifstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.ifstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Et),I(K))},o.\u0275cmp=H({type:o,selectors:[["ifstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Et,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"ifstatement"],[1,"ifstatement-header"],[1,"very-small-button",3,"click"],[1,"ifstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,$w,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.ifstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"ifstatement-header" "ifstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.ifstatement-header[_ngcontent-%COMP%]{grid-area:ifstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.ifstatement-right-top[_ngcontent-%COMP%]{grid-area:ifstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Lw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Ww(r,o){if(r&1&&O(0,Lw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Aw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Ww,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Ow(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function zw(r,o){if(r&1&&O(0,Ow,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Nw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,zw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Rw(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Aw,3,7,null,null,b),d(),p(3,"g"),T(4,Nw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ga=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.thenstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.thenstatement()||!a.length)return;let c=new oe;c.from=this.thenstatement(),c.key="thenstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.thenstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["thenstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([bt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"thenstatement"],[1,"thenstatement-header"],[1,"very-small-button",3,"click"],[1,"thenstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Rw,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.thenstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"thenstatement-header" "thenstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.thenstatement-header[_ngcontent-%COMP%]{grid-area:thenstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.thenstatement-right-top[_ngcontent-%COMP%]{grid-area:thenstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function qw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function jw(r,o){if(r&1&&O(0,qw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Uw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,jw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Gw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Yw(r,o){if(r&1&&O(0,Gw,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Hw(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Yw,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Xw(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Uw,3,7,null,null,b),d(),p(3,"g"),T(4,Hw,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ya=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.elseifstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.elseifstatement()||!a.length)return;let c=new oe;c.from=this.elseifstatement(),c.key="elseifstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.elseifstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Vt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elseifstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Vt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"elseifstatement"],[1,"elseifstatement-header"],[1,"very-small-button",3,"click"],[1,"elseifstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Xw,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.elseifstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"elseifstatement-header" "elseifstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.elseifstatement-header[_ngcontent-%COMP%]{grid-area:elseifstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.elseifstatement-right-top[_ngcontent-%COMP%]{grid-area:elseifstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Zw(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Jw(r,o){if(r&1&&O(0,Zw,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Qw(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Jw,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function eS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function tS(r,o){if(r&1&&O(0,eS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function iS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,tS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function nS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Qw,3,7,null,null,b),d(),p(3,"g"),T(4,iS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ha=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.elsestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.elsestatement()||!a.length)return;let c=new oe;c.from=this.elsestatement(),c.key="elsestatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.elsestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Pt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elsestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Pt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"elsestatement"],[1,"elsestatement-header"],[1,"very-small-button",3,"click"],[1,"elsestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,nS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.elsestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"elsestatement-header" "elsestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.elsestatement-header[_ngcontent-%COMP%]{grid-area:elsestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.elsestatement-right-top[_ngcontent-%COMP%]{grid-area:elsestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function rS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function aS(r,o){if(r&1&&O(0,rS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function oS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,aS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function sS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function lS(r,o){if(r&1&&O(0,sS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function cS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,lS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function pS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,oS,3,7,null,null,b),d(),p(3,"g"),T(4,cS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Xa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.instatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.instatement()||!a.length)return;let c=new oe;c.from=this.instatement(),c.key="instatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.instatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ft),I(K))},o.\u0275cmp=H({type:o,selectors:[["instatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ft,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"instatement"],[1,"instatement-header"],[1,"very-small-button",3,"click"],[1,"instatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,pS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.instatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"instatement-header" "instatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.instatement-header[_ngcontent-%COMP%]{grid-area:instatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.instatement-right-top[_ngcontent-%COMP%]{grid-area:instatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function dS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function uS(r,o){if(r&1&&O(0,dS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function mS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,uS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function _S(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function hS(r,o){if(r&1&&O(0,_S,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function fS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,hS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function yS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,mS,3,7,null,null,b),d(),p(3,"g"),T(4,fS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Za=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.pickstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.pickstatement()||!this.pickstatement().key||!a.length)return;let c=new oe;c.from=this.pickstatement(),c.key=this.pickstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.pickstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Mt),I(K))},o.\u0275cmp=H({type:o,selectors:[["pickstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Mt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"pickstatement"],[1,"pickstatement-header"],[1,"very-small-button",3,"click"],[1,"pickstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,yS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.pickstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"pickstatement-header" "pickstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.pickstatement-header[_ngcontent-%COMP%]{grid-area:pickstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.pickstatement-right-top[_ngcontent-%COMP%]{grid-area:pickstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function vS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function xS(r,o){if(r&1&&O(0,vS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function gS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,xS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function CS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function wS(r,o){if(r&1&&O(0,CS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function SS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,wS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function kS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,gS,3,7,null,null,b),d(),p(3,"g"),T(4,SS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ja=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.substatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.substatement()||!this.substatement().key||!a.length)return;let c=new oe;c.from=this.substatement(),c.key=this.substatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.substatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Dt),I(K))},o.\u0275cmp=H({type:o,selectors:[["substatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Dt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"substatement"],[1,"substatement-header"],[1,"very-small-button",3,"click"],[1,"substatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,kS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.substatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"substatement-header" "substatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.substatement-header[_ngcontent-%COMP%]{grid-area:substatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.substatement-right-top[_ngcontent-%COMP%]{grid-area:substatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function TS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function ES(r,o){if(r&1&&O(0,TS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function bS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,ES,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function VS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function PS(r,o){if(r&1&&O(0,VS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function FS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,PS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function MS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,bS,3,7,null,null,b),d(),p(3,"g"),T(4,FS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Qa=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.childstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.childstatement()||!this.childstatement().key||!a.length)return;let c=new oe;c.from=this.childstatement(),c.key=this.childstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.childstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(It),I(K))},o.\u0275cmp=H({type:o,selectors:[["childstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([It,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"childstatement"],[1,"childstatement-header"],[1,"very-small-button",3,"click"],[1,"childstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,MS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.childstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"childstatement-header" "childstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.childstatement-header[_ngcontent-%COMP%]{grid-area:childstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.childstatement-right-top[_ngcontent-%COMP%]{grid-area:childstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function DS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function IS(r,o){if(r&1&&O(0,DS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function KS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,IS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function BS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function $S(r,o){if(r&1&&O(0,BS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function LS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,$S,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function WS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,KS,3,7,null,null,b),d(),p(3,"g"),T(4,LS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var eo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.infantstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.infantstatement()||!this.infantstatement().key||!a.length)return;let c=new oe;c.from=this.infantstatement(),c.key=this.infantstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.infantstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["infantstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Kt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"infantstatement"],[1,"infantstatement-header"],[1,"very-small-button",3,"click"],[1,"infantstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,WS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.infantstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"infantstatement-header" "infantstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.infantstatement-header[_ngcontent-%COMP%]{grid-area:infantstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.infantstatement-right-top[_ngcontent-%COMP%]{grid-area:infantstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function AS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function OS(r,o){if(r&1&&O(0,AS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function zS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,OS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function NS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function RS(r,o){if(r&1&&O(0,NS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function qS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,RS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function jS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,zS,3,7,null,null,b),d(),p(3,"g"),T(4,qS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var to=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.outstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.outstatement()||!a.length)return;let c=new oe;c.from=this.outstatement(),c.key="outstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.outstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["outstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Bt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"outstatement"],[1,"outstatement-header"],[1,"very-small-button",3,"click"],[1,"outstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,jS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.outstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"outstatement-header" "outstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.outstatement-header[_ngcontent-%COMP%]{grid-area:outstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.outstatement-right-top[_ngcontent-%COMP%]{grid-area:outstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function US(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function GS(r,o){if(r&1&&O(0,US,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function YS(r,o){if(r&1&&(G(),Z(0,"line"),T(1,GS,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function HS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function XS(r,o){if(r&1&&O(0,HS,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function ZS(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,XS,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function JS(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,YS,3,7,null,null,b),d(),p(3,"g"),T(4,ZS,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var io=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.remstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.remstatement()||!a.length)return;let c=new oe;c.from=this.remstatement(),c.key="remstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.remstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I($t),I(K))},o.\u0275cmp=H({type:o,selectors:[["remstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([$t,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"remstatement"],[1,"remstatement-header"],[1,"very-small-button",3,"click"],[1,"remstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,JS,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.remstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"remstatement-header" "remstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.remstatement-header[_ngcontent-%COMP%]{grid-area:remstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.remstatement-right-top[_ngcontent-%COMP%]{grid-area:remstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function QS(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function ek(r,o){if(r&1&&O(0,QS,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function tk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,ek,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function ik(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function nk(r,o){if(r&1&&O(0,ik,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function rk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,nk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function ak(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,tk,3,7,null,null,b),d(),p(3,"g"),T(4,rk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var no=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.switchstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.switchstatement()||!a.length)return;let c=new oe;c.from=this.switchstatement(),c.key="switchstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.switchstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Lt),I(K))},o.\u0275cmp=H({type:o,selectors:[["switchstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Lt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"switchstatement"],[1,"switchstatement-header"],[1,"very-small-button",3,"click"],[1,"switchstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,ak,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.switchstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"switchstatement-header" "switchstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.switchstatement-header[_ngcontent-%COMP%]{grid-area:switchstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.switchstatement-right-top[_ngcontent-%COMP%]{grid-area:switchstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function ok(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function sk(r,o){if(r&1&&O(0,ok,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function lk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,sk,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function ck(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function pk(r,o){if(r&1&&O(0,ck,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function dk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,pk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function uk(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,lk,3,7,null,null,b),d(),p(3,"g"),T(4,dk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var ro=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.casestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.casestatement()||!a.length)return;let c=new oe;c.from=this.casestatement(),c.key="casestatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.casestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["casestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Wt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"casestatement"],[1,"casestatement-header"],[1,"very-small-button",3,"click"],[1,"casestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,uk,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.casestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"casestatement-header" "casestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.casestatement-header[_ngcontent-%COMP%]{grid-area:casestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.casestatement-right-top[_ngcontent-%COMP%]{grid-area:casestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function mk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function _k(r,o){if(r&1&&O(0,mk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function hk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,_k,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function fk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function yk(r,o){if(r&1&&O(0,fk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function vk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,yk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function xk(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,hk,3,7,null,null,b),d(),p(3,"g"),T(4,vk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var ao=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.defaultstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.defaultstatement()||!a.length)return;let c=new oe;c.from=this.defaultstatement(),c.key="defaultstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.defaultstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(At),I(K))},o.\u0275cmp=H({type:o,selectors:[["defaultstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([At,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"defaultstatement"],[1,"defaultstatement-header"],[1,"very-small-button",3,"click"],[1,"defaultstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,xk,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.defaultstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"defaultstatement-header" "defaultstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.defaultstatement-header[_ngcontent-%COMP%]{grid-area:defaultstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.defaultstatement-right-top[_ngcontent-%COMP%]{grid-area:defaultstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function gk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Ck(r,o){if(r&1&&O(0,gk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function wk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Ck,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Sk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function kk(r,o){if(r&1&&O(0,Sk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Tk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,kk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Ek(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,wk,3,7,null,null,b),d(),p(3,"g"),T(4,Tk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var oo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.forstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.forstatement()||!a.length)return;let c=new oe;c.from=this.forstatement(),c.key="forstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.forstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ot),I(K))},o.\u0275cmp=H({type:o,selectors:[["forstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ot,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"forstatement"],[1,"forstatement-header"],[1,"very-small-button",3,"click"],[1,"forstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Ek,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.forstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"forstatement-header" "forstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.forstatement-header[_ngcontent-%COMP%]{grid-area:forstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.forstatement-right-top[_ngcontent-%COMP%]{grid-area:forstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function bk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Vk(r,o){if(r&1&&O(0,bk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Pk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Vk,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Fk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Mk(r,o){if(r&1&&O(0,Fk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Dk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Mk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Ik(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Pk,3,7,null,null,b),d(),p(3,"g"),T(4,Dk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var so=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.foreachstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.foreachstatement()||!a.length)return;let c=new oe;c.from=this.foreachstatement(),c.key="foreachstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.foreachstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["foreachstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([zt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"foreachstatement"],[1,"foreachstatement-header"],[1,"very-small-button",3,"click"],[1,"foreachstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Ik,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.foreachstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"foreachstatement-header" "foreachstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.foreachstatement-header[_ngcontent-%COMP%]{grid-area:foreachstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.foreachstatement-right-top[_ngcontent-%COMP%]{grid-area:foreachstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Kk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Bk(r,o){if(r&1&&O(0,Kk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function $k(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Bk,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Lk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Wk(r,o){if(r&1&&O(0,Lk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Ak(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Wk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Ok(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,$k,3,7,null,null,b),d(),p(3,"g"),T(4,Ak,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var lo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.whilestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.whilestatement()||!a.length)return;let c=new oe;c.from=this.whilestatement(),c.key="whilestatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.whilestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Nt),I(K))},o.\u0275cmp=H({type:o,selectors:[["whilestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Nt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"whilestatement"],[1,"whilestatement-header"],[1,"very-small-button",3,"click"],[1,"whilestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Ok,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.whilestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"whilestatement-header" "whilestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.whilestatement-header[_ngcontent-%COMP%]{grid-area:whilestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.whilestatement-right-top[_ngcontent-%COMP%]{grid-area:whilestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function zk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Nk(r,o){if(r&1&&O(0,zk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Rk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Nk,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function qk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function jk(r,o){if(r&1&&O(0,qk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Uk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,jk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Gk(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Rk,3,7,null,null,b),d(),p(3,"g"),T(4,Uk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var co=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.dostatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.dostatement()||!a.length)return;let c=new oe;c.from=this.dostatement(),c.key="dostatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.dostatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Rt),I(K))},o.\u0275cmp=H({type:o,selectors:[["dostatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Rt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"dostatement"],[1,"dostatement-header"],[1,"very-small-button",3,"click"],[1,"dostatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Gk,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.dostatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"dostatement-header" "dostatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.dostatement-header[_ngcontent-%COMP%]{grid-area:dostatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.dostatement-right-top[_ngcontent-%COMP%]{grid-area:dostatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Yk(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Hk(r,o){if(r&1&&O(0,Yk,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Xk(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Hk,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Zk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Jk(r,o){if(r&1&&O(0,Zk,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Qk(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Jk,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function eT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Xk,3,7,null,null,b),d(),p(3,"g"),T(4,Qk,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var po=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.callstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.callstatement()||!a.length)return;let c=new oe;c.from=this.callstatement(),c.key="callstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.callstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["callstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([qt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"callstatement"],[1,"callstatement-header"],[1,"very-small-button",3,"click"],[1,"callstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,eT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.callstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"callstatement-header" "callstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.callstatement-header[_ngcontent-%COMP%]{grid-area:callstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.callstatement-right-top[_ngcontent-%COMP%]{grid-area:callstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function tT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function iT(r,o){if(r&1&&O(0,tT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function nT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,iT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function rT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function aT(r,o){if(r&1&&O(0,rT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function oT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,aT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function sT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,nT,3,7,null,null,b),d(),p(3,"g"),T(4,oT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var uo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.promptstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.promptstatement()||!this.promptstatement().key||!a.length)return;let c=new oe;c.from=this.promptstatement(),c.key=this.promptstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.promptstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["promptstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([jt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"promptstatement"],[1,"promptstatement-header"],[1,"very-small-button",3,"click"],[1,"promptstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,sT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.promptstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"promptstatement-header" "promptstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.promptstatement-header[_ngcontent-%COMP%]{grid-area:promptstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.promptstatement-right-top[_ngcontent-%COMP%]{grid-area:promptstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function lT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function cT(r,o){if(r&1&&O(0,lT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function pT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,cT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function dT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function uT(r,o){if(r&1&&O(0,dT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function mT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,uT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function _T(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,pT,3,7,null,null,b),d(),p(3,"g"),T(4,mT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var mo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.linestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.linestatement()||!a.length)return;let c=new oe;c.from=this.linestatement(),c.key="linestatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.linestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ut),I(K))},o.\u0275cmp=H({type:o,selectors:[["linestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ut,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"linestatement"],[1,"linestatement-header"],[1,"very-small-button",3,"click"],[1,"linestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,_T,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.linestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"linestatement-header" "linestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.linestatement-header[_ngcontent-%COMP%]{grid-area:linestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.linestatement-right-top[_ngcontent-%COMP%]{grid-area:linestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function hT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function fT(r,o){if(r&1&&O(0,hT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function yT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,fT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function vT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function xT(r,o){if(r&1&&O(0,vT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function gT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,xT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function CT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,yT,3,7,null,null,b),d(),p(3,"g"),T(4,gT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var _o=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.invokestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.invokestatement()||!a.length)return;let c=new oe;c.from=this.invokestatement(),c.key="invokestatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.invokestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Gt),I(K))},o.\u0275cmp=H({type:o,selectors:[["invokestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Gt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"invokestatement"],[1,"invokestatement-header"],[1,"very-small-button",3,"click"],[1,"invokestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,CT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.invokestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"invokestatement-header" "invokestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.invokestatement-header[_ngcontent-%COMP%]{grid-area:invokestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.invokestatement-right-top[_ngcontent-%COMP%]{grid-area:invokestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function wT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function ST(r,o){if(r&1&&O(0,wT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function kT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,ST,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function TT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function ET(r,o){if(r&1&&O(0,TT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function bT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,ET,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function VT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,kT,3,7,null,null,b),d(),p(3,"g"),T(4,bT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var ho=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.projectstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.projectstatement()||!this.projectstatement().key||!a.length)return;let c=new oe;c.from=this.projectstatement(),c.key=this.projectstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.projectstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Yt),I(K))},o.\u0275cmp=H({type:o,selectors:[["projectstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Yt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"projectstatement"],[1,"projectstatement-header"],[1,"very-small-button",3,"click"],[1,"projectstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,VT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.projectstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"projectstatement-header" "projectstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.projectstatement-header[_ngcontent-%COMP%]{grid-area:projectstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.projectstatement-right-top[_ngcontent-%COMP%]{grid-area:projectstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function PT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function FT(r,o){if(r&1&&O(0,PT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function MT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,FT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function DT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function IT(r,o){if(r&1&&O(0,DT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function KT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,IT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function BT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,MT,3,7,null,null,b),d(),p(3,"g"),T(4,KT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var fo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.schemastatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.schemastatement()||!this.schemastatement().key||!a.length)return;let c=new oe;c.from=this.schemastatement(),c.key=this.schemastatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.schemastatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ht),I(K))},o.\u0275cmp=H({type:o,selectors:[["schemastatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ht,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"schemastatement"],[1,"schemastatement-header"],[1,"very-small-button",3,"click"],[1,"schemastatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,BT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.schemastatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"schemastatement-header" "schemastatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.schemastatement-header[_ngcontent-%COMP%]{grid-area:schemastatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.schemastatement-right-top[_ngcontent-%COMP%]{grid-area:schemastatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function $T(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function LT(r,o){if(r&1&&O(0,$T,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function WT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,LT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function AT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function OT(r,o){if(r&1&&O(0,AT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function zT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,OT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function NT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,WT,3,7,null,null,b),d(),p(3,"g"),T(4,zT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var yo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.tablestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.tablestatement()||!this.tablestatement().key||!a.length)return;let c=new oe;c.from=this.tablestatement(),c.key=this.tablestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.tablestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Xt),I(K))},o.\u0275cmp=H({type:o,selectors:[["tablestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Xt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"tablestatement"],[1,"tablestatement-header"],[1,"very-small-button",3,"click"],[1,"tablestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,NT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.tablestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"tablestatement-header" "tablestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.tablestatement-header[_ngcontent-%COMP%]{grid-area:tablestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.tablestatement-right-top[_ngcontent-%COMP%]{grid-area:tablestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function RT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function qT(r,o){if(r&1&&O(0,RT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function jT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,qT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function UT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function GT(r,o){if(r&1&&O(0,UT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function YT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,GT,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function HT(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,jT,3,7,null,null,b),d(),p(3,"g"),T(4,YT,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var vo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.columnstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.columnstatement()||!this.columnstatement().key||!a.length)return;let c=new oe;c.from=this.columnstatement(),c.key=this.columnstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.columnstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["columnstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Zt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"columnstatement"],[1,"columnstatement-header"],[1,"very-small-button",3,"click"],[1,"columnstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,HT,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.columnstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"columnstatement-header" "columnstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.columnstatement-header[_ngcontent-%COMP%]{grid-area:columnstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.columnstatement-right-top[_ngcontent-%COMP%]{grid-area:columnstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function XT(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function ZT(r,o){if(r&1&&O(0,XT,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function JT(r,o){if(r&1&&(G(),Z(0,"line"),T(1,ZT,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function QT(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function eE(r,o){if(r&1&&O(0,QT,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function tE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,eE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function iE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,JT,3,7,null,null,b),d(),p(3,"g"),T(4,tE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var xo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.enumstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.enumstatement()||!this.enumstatement().key||!a.length)return;let c=new oe;c.from=this.enumstatement(),c.key=this.enumstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.enumstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["enumstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Jt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"enumstatement"],[1,"enumstatement-header"],[1,"very-small-button",3,"click"],[1,"enumstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,iE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.enumstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"enumstatement-header" "enumstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.enumstatement-header[_ngcontent-%COMP%]{grid-area:enumstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.enumstatement-right-top[_ngcontent-%COMP%]{grid-area:enumstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function nE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function rE(r,o){if(r&1&&O(0,nE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function aE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,rE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function oE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function sE(r,o){if(r&1&&O(0,oE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function lE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,sE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function cE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,aE,3,7,null,null,b),d(),p(3,"g"),T(4,lE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var go=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.valuestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.valuestatement()||!this.valuestatement().key||!a.length)return;let c=new oe;c.from=this.valuestatement(),c.key=this.valuestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.valuestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["valuestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Qt,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"valuestatement"],[1,"valuestatement-header"],[1,"very-small-button",3,"click"],[1,"valuestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,cE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.valuestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"valuestatement-header" "valuestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.valuestatement-header[_ngcontent-%COMP%]{grid-area:valuestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.valuestatement-right-top[_ngcontent-%COMP%]{grid-area:valuestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function pE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function dE(r,o){if(r&1&&O(0,pE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function uE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,dE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function mE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function _E(r,o){if(r&1&&O(0,mE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function hE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,_E,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function fE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,uE,3,7,null,null,b),d(),p(3,"g"),T(4,hE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Co=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.seedstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.seedstatement()||!this.seedstatement().key||!a.length)return;let c=new oe;c.from=this.seedstatement(),c.key=this.seedstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.seedstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ei),I(K))},o.\u0275cmp=H({type:o,selectors:[["seedstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ei,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"seedstatement"],[1,"seedstatement-header"],[1,"very-small-button",3,"click"],[1,"seedstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,fE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.seedstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"seedstatement-header" "seedstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.seedstatement-header[_ngcontent-%COMP%]{grid-area:seedstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.seedstatement-right-top[_ngcontent-%COMP%]{grid-area:seedstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function yE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function vE(r,o){if(r&1&&O(0,yE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function xE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,vE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function gE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function CE(r,o){if(r&1&&O(0,gE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function wE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,CE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function SE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,xE,3,7,null,null,b),d(),p(3,"g"),T(4,wE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var wo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.recordstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.recordstatement()||!this.recordstatement().key||!a.length)return;let c=new oe;c.from=this.recordstatement(),c.key=this.recordstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.recordstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ti),I(K))},o.\u0275cmp=H({type:o,selectors:[["recordstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ti,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"recordstatement"],[1,"recordstatement-header"],[1,"very-small-button",3,"click"],[1,"recordstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,SE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.recordstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"recordstatement-header" "recordstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.recordstatement-header[_ngcontent-%COMP%]{grid-area:recordstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.recordstatement-right-top[_ngcontent-%COMP%]{grid-area:recordstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function kE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function TE(r,o){if(r&1&&O(0,kE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function EE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,TE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function bE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function VE(r,o){if(r&1&&O(0,bE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function PE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,VE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function FE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,EE,3,7,null,null,b),d(),p(3,"g"),T(4,PE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var So=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.fieldstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.fieldstatement()||!this.fieldstatement().key||!a.length)return;let c=new oe;c.from=this.fieldstatement(),c.key=this.fieldstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.fieldstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ii),I(K))},o.\u0275cmp=H({type:o,selectors:[["fieldstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ii,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"fieldstatement"],[1,"fieldstatement-header"],[1,"very-small-button",3,"click"],[1,"fieldstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,FE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.fieldstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"fieldstatement-header" "fieldstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.fieldstatement-header[_ngcontent-%COMP%]{grid-area:fieldstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.fieldstatement-right-top[_ngcontent-%COMP%]{grid-area:fieldstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function ME(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function DE(r,o){if(r&1&&O(0,ME,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function IE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,DE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function KE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function BE(r,o){if(r&1&&O(0,KE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function $E(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,BE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function LE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,IE,3,7,null,null,b),d(),p(3,"g"),T(4,$E,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var ko=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.apistatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.apistatement()||!this.apistatement().key||!a.length)return;let c=new oe;c.from=this.apistatement(),c.key=this.apistatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.apistatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ni),I(K))},o.\u0275cmp=H({type:o,selectors:[["apistatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ni,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"apistatement"],[1,"apistatement-header"],[1,"very-small-button",3,"click"],[1,"apistatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,LE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.apistatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"apistatement-header" "apistatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.apistatement-header[_ngcontent-%COMP%]{grid-area:apistatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.apistatement-right-top[_ngcontent-%COMP%]{grid-area:apistatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function WE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function AE(r,o){if(r&1&&O(0,WE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function OE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,AE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function zE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function NE(r,o){if(r&1&&O(0,zE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function RE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,NE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function qE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,OE,3,7,null,null,b),d(),p(3,"g"),T(4,RE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var To=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.routestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.routestatement()||!this.routestatement().key||!a.length)return;let c=new oe;c.from=this.routestatement(),c.key=this.routestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.routestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ri),I(K))},o.\u0275cmp=H({type:o,selectors:[["routestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ri,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"routestatement"],[1,"routestatement-header"],[1,"very-small-button",3,"click"],[1,"routestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,qE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.routestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"routestatement-header" "routestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.routestatement-header[_ngcontent-%COMP%]{grid-area:routestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.routestatement-right-top[_ngcontent-%COMP%]{grid-area:routestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function jE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function UE(r,o){if(r&1&&O(0,jE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function GE(r,o){if(r&1&&(G(),Z(0,"line"),T(1,UE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function YE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function HE(r,o){if(r&1&&O(0,YE,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function XE(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,HE,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function ZE(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,GE,3,7,null,null,b),d(),p(3,"g"),T(4,XE,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Eo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.designstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.designstatement()||!this.designstatement().key||!a.length)return;let c=new oe;c.from=this.designstatement(),c.key=this.designstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.designstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ai),I(K))},o.\u0275cmp=H({type:o,selectors:[["designstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ai,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"designstatement"],[1,"designstatement-header"],[1,"very-small-button",3,"click"],[1,"designstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,ZE,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.designstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"designstatement-header" "designstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.designstatement-header[_ngcontent-%COMP%]{grid-area:designstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.designstatement-right-top[_ngcontent-%COMP%]{grid-area:designstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function JE(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function QE(r,o){if(r&1&&O(0,JE,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function eb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,QE,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function tb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function ib(r,o){if(r&1&&O(0,tb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function nb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,ib,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function rb(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,eb,3,7,null,null,b),d(),p(3,"g"),T(4,nb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var bo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.pagestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.pagestatement()||!this.pagestatement().key||!a.length)return;let c=new oe;c.from=this.pagestatement(),c.key=this.pagestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.pagestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(oi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pagestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([oi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"pagestatement"],[1,"pagestatement-header"],[1,"very-small-button",3,"click"],[1,"pagestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,rb,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.pagestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"pagestatement-header" "pagestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.pagestatement-header[_ngcontent-%COMP%]{grid-area:pagestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.pagestatement-right-top[_ngcontent-%COMP%]{grid-area:pagestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function ab(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function ob(r,o){if(r&1&&O(0,ab,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function sb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,ob,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function lb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function cb(r,o){if(r&1&&O(0,lb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function pb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,cb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function db(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,sb,3,7,null,null,b),d(),p(3,"g"),T(4,pb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Vo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.codestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.codestatement()||!this.codestatement().key||!a.length)return;let c=new oe;c.from=this.codestatement(),c.key=this.codestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.codestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(si),I(K))},o.\u0275cmp=H({type:o,selectors:[["codestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([si,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"codestatement"],[1,"codestatement-header"],[1,"very-small-button",3,"click"],[1,"codestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,db,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.codestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"codestatement-header" "codestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.codestatement-header[_ngcontent-%COMP%]{grid-area:codestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.codestatement-right-top[_ngcontent-%COMP%]{grid-area:codestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function ub(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function mb(r,o){if(r&1&&O(0,ub,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function _b(r,o){if(r&1&&(G(),Z(0,"line"),T(1,mb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function hb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function fb(r,o){if(r&1&&O(0,hb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function yb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,fb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function vb(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,_b,3,7,null,null,b),d(),p(3,"g"),T(4,yb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Po=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.folderstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.folderstatement()||!this.folderstatement().key||!a.length)return;let c=new oe;c.from=this.folderstatement(),c.key=this.folderstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.folderstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(li),I(K))},o.\u0275cmp=H({type:o,selectors:[["folderstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([li,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"folderstatement"],[1,"folderstatement-header"],[1,"very-small-button",3,"click"],[1,"folderstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,vb,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.folderstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"folderstatement-header" "folderstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.folderstatement-header[_ngcontent-%COMP%]{grid-area:folderstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.folderstatement-right-top[_ngcontent-%COMP%]{grid-area:folderstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function xb(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function gb(r,o){if(r&1&&O(0,xb,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Cb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,gb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function wb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Sb(r,o){if(r&1&&O(0,wb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function kb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Sb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Tb(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Cb,3,7,null,null,b),d(),p(3,"g"),T(4,kb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Fo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.filestatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.filestatement()||!this.filestatement().key||!a.length)return;let c=new oe;c.from=this.filestatement(),c.key=this.filestatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.filestatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ci),I(K))},o.\u0275cmp=H({type:o,selectors:[["filestatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ci,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"filestatement"],[1,"filestatement-header"],[1,"very-small-button",3,"click"],[1,"filestatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Tb,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.filestatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"filestatement-header" "filestatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.filestatement-header[_ngcontent-%COMP%]{grid-area:filestatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.filestatement-right-top[_ngcontent-%COMP%]{grid-area:filestatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Eb(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function bb(r,o){if(r&1&&O(0,Eb,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Vb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,bb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Pb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Fb(r,o){if(r&1&&O(0,Pb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Mb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Fb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Db(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Vb,3,7,null,null,b),d(),p(3,"g"),T(4,Mb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Mo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.paramstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.paramstatement()||!this.paramstatement().key||!a.length)return;let c=new oe;c.from=this.paramstatement(),c.key=this.paramstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.paramstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(pi),I(K))},o.\u0275cmp=H({type:o,selectors:[["paramstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([pi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"paramstatement"],[1,"paramstatement-header"],[1,"very-small-button",3,"click"],[1,"paramstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Db,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.paramstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"paramstatement-header" "paramstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.paramstatement-header[_ngcontent-%COMP%]{grid-area:paramstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.paramstatement-right-top[_ngcontent-%COMP%]{grid-area:paramstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Ib(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Kb(r,o){if(r&1&&O(0,Ib,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Bb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Kb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function $b(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Lb(r,o){if(r&1&&O(0,$b,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Wb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Lb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Ab(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Bb,3,7,null,null,b),d(),p(3,"g"),T(4,Wb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Do=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.returnstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.returnstatement()||!this.returnstatement().key||!a.length)return;let c=new oe;c.from=this.returnstatement(),c.key=this.returnstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.returnstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(di),I(K))},o.\u0275cmp=H({type:o,selectors:[["returnstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([di,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"returnstatement"],[1,"returnstatement-header"],[1,"very-small-button",3,"click"],[1,"returnstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Ab,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.returnstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"returnstatement-header" "returnstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.returnstatement-header[_ngcontent-%COMP%]{grid-area:returnstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.returnstatement-right-top[_ngcontent-%COMP%]{grid-area:returnstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Ob(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function zb(r,o){if(r&1&&O(0,Ob,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Nb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,zb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Rb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function qb(r,o){if(r&1&&O(0,Rb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function jb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,qb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Ub(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Nb,3,7,null,null,b),d(),p(3,"g"),T(4,jb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Io=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.branchstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.branchstatement()||!this.branchstatement().key||!a.length)return;let c=new oe;c.from=this.branchstatement(),c.key=this.branchstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.branchstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ui),I(K))},o.\u0275cmp=H({type:o,selectors:[["branchstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ui,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"branchstatement"],[1,"branchstatement-header"],[1,"very-small-button",3,"click"],[1,"branchstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Ub,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.branchstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"branchstatement-header" "branchstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.branchstatement-header[_ngcontent-%COMP%]{grid-area:branchstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.branchstatement-right-top[_ngcontent-%COMP%]{grid-area:branchstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function Gb(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function Yb(r,o){if(r&1&&O(0,Gb,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Hb(r,o){if(r&1&&(G(),Z(0,"line"),T(1,Yb,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function Xb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function Zb(r,o){if(r&1&&O(0,Xb,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function Jb(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,Zb,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function Qb(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,Hb,3,7,null,null,b),d(),p(3,"g"),T(4,Jb,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ko=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.historystatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.historystatement()||!this.historystatement().key||!a.length)return;let c=new oe;c.from=this.historystatement(),c.key=this.historystatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.historystatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(mi),I(K))},o.\u0275cmp=H({type:o,selectors:[["historystatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([mi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"historystatement"],[1,"historystatement-header"],[1,"very-small-button",3,"click"],[1,"historystatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,Qb,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.historystatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"historystatement-header" "historystatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.historystatement-header[_ngcontent-%COMP%]{grid-area:historystatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.historystatement-right-top[_ngcontent-%COMP%]{grid-area:historystatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function eV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function tV(r,o){if(r&1&&O(0,eV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function iV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,tV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function nV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function rV(r,o){if(r&1&&O(0,nV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function aV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,rV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function oV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,iV,3,7,null,null,b),d(),p(3,"g"),T(4,aV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Bo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.eventstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.eventstatement()||!this.eventstatement().key||!a.length)return;let c=new oe;c.from=this.eventstatement(),c.key=this.eventstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.eventstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(_i),I(K))},o.\u0275cmp=H({type:o,selectors:[["eventstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([_i,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"eventstatement"],[1,"eventstatement-header"],[1,"very-small-button",3,"click"],[1,"eventstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,oV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.eventstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"eventstatement-header" "eventstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.eventstatement-header[_ngcontent-%COMP%]{grid-area:eventstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.eventstatement-right-top[_ngcontent-%COMP%]{grid-area:eventstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function sV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function lV(r,o){if(r&1&&O(0,sV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function cV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,lV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function pV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function dV(r,o){if(r&1&&O(0,pV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function uV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,dV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function mV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,cV,3,7,null,null,b),d(),p(3,"g"),T(4,uV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var $o=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.dispatchstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.dispatchstatement()||!a.length)return;let c=new oe;c.from=this.dispatchstatement(),c.key="dispatchstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.dispatchstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(hi),I(K))},o.\u0275cmp=H({type:o,selectors:[["dispatchstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([hi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"dispatchstatement"],[1,"dispatchstatement-header"],[1,"very-small-button",3,"click"],[1,"dispatchstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,mV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.dispatchstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"dispatchstatement-header" "dispatchstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.dispatchstatement-header[_ngcontent-%COMP%]{grid-area:dispatchstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.dispatchstatement-right-top[_ngcontent-%COMP%]{grid-area:dispatchstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function _V(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function hV(r,o){if(r&1&&O(0,_V,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function fV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,hV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function yV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function vV(r,o){if(r&1&&O(0,yV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function xV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,vV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function gV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,fV,3,7,null,null,b),d(),p(3,"g"),T(4,xV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Lo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.actionstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.actionstatement()||!this.actionstatement().key||!a.length)return;let c=new oe;c.from=this.actionstatement(),c.key=this.actionstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.actionstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(fi),I(K))},o.\u0275cmp=H({type:o,selectors:[["actionstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([fi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"actionstatement"],[1,"actionstatement-header"],[1,"very-small-button",3,"click"],[1,"actionstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,gV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.actionstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"actionstatement-header" "actionstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.actionstatement-header[_ngcontent-%COMP%]{grid-area:actionstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.actionstatement-right-top[_ngcontent-%COMP%]{grid-area:actionstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function CV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function wV(r,o){if(r&1&&O(0,CV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function SV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,wV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function kV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function TV(r,o){if(r&1&&O(0,kV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function EV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,TV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function bV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,SV,3,7,null,null,b),d(),p(3,"g"),T(4,EV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Wo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.awaitstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.awaitstatement()||!this.awaitstatement().key||!a.length)return;let c=new oe;c.from=this.awaitstatement(),c.key=this.awaitstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.awaitstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(yi),I(K))},o.\u0275cmp=H({type:o,selectors:[["awaitstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([yi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"awaitstatement"],[1,"awaitstatement-header"],[1,"very-small-button",3,"click"],[1,"awaitstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,bV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.awaitstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"awaitstatement-header" "awaitstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.awaitstatement-header[_ngcontent-%COMP%]{grid-area:awaitstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.awaitstatement-right-top[_ngcontent-%COMP%]{grid-area:awaitstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function VV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function PV(r,o){if(r&1&&O(0,VV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function FV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,PV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function MV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function DV(r,o){if(r&1&&O(0,MV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function IV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,DV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function KV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,FV,3,7,null,null,b),d(),p(3,"g"),T(4,IV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Ao=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.endstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.endstatement()||!a.length)return;let c=new oe;c.from=this.endstatement(),c.key="endstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.endstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(vi),I(K))},o.\u0275cmp=H({type:o,selectors:[["endstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([vi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"endstatement"],[1,"endstatement-header"],[1,"very-small-button",3,"click"],[1,"endstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,KV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.endstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"endstatement-header" "endstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.endstatement-header[_ngcontent-%COMP%]{grid-area:endstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.endstatement-right-top[_ngcontent-%COMP%]{grid-area:endstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function BV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function $V(r,o){if(r&1&&O(0,BV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function LV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,$V,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function WV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function AV(r,o){if(r&1&&O(0,WV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function OV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,AV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function zV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,LV,3,7,null,null,b),d(),p(3,"g"),T(4,OV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var Oo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.linkstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.linkstatement()||!a.length)return;let c=new oe;c.from=this.linkstatement(),c.key="linkstatement",c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.linkstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(xi),I(K))},o.\u0275cmp=H({type:o,selectors:[["linkstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([xi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"linkstatement"],[1,"linkstatement-header"],[1,"very-small-button",3,"click"],[1,"linkstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,zV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.linkstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"linkstatement-header" "linkstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.linkstatement-header[_ngcontent-%COMP%]{grid-area:linkstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.linkstatement-right-top[_ngcontent-%COMP%]{grid-area:linkstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function NV(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=s().$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",t.shape.fill)("stroke-width","12")("marker-end","url(#dot2)")}}function RV(r,o){if(r&1&&O(0,NV,1,7,":svg:line"),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function qV(r,o){if(r&1&&(G(),Z(0,"line"),T(1,RV,1,1,null,null,b)),r&2){let e=o.$implicit;s(2);let t=re(28);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.fill)("stroke-width","12")("marker-end","url(#arrow)"),m(),E(e.getChildren())}}function jV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))})("touchstart",function(i){_(e);let n=s().$implicit,a=s(3);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d()}if(r&2){let e=s().$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading)}}function UV(r,o){if(r&1&&O(0,jV,3,11),r&2){let e=o.$implicit;N(e.isSelected?0:-1)}}function GV(r,o){if(r&1){let e=g();G(),p(0,"circle",12),v("pointerdown",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))})("touchstart",function(i){let n=_(e).$implicit,a=s(2);return h(a.onSvgDown(i,n))}),d(),p(1,"text",13),x(2),d(),T(3,UV,1,1,null,null,b)}if(r&2){let e=o.$implicit;P("cx",e.shape.x)("cy",e.shape.y)("r",e.shape.radius)("fill",e.shape.fill),m(),P("x",e.shape.x)("y",e.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(e.heading),m(),E(e.getChildren())}}function YV(r,o){if(r&1){let e=g();G(),p(0,"g"),T(1,qV,3,7,null,null,b),d(),p(3,"g"),T(4,GV,5,11,null,null,b),p(6,"circle",12),v("pointerdown",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))})("touchstart",function(i){_(e);let n=s(),a=re(28);return h(n.onSvgDown(i,a))}),d(),p(7,"text",13),x(8),d()()}if(r&2){let e=s(),t=re(28);P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("transform","scale("+e.scale+")"),m(),E(t.body),m(2),P("cx",t.shape.x)("cy",t.shape.y)("r",t.shape.radius)("fill",t.shape.fill),m(),P("x",t.shape.x)("y",t.shape.y)("fill","white")("font-size","12px")("text-anchor","middle")("alignment-baseline","middle"),m(),q(t.heading)}}var zo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.elements=R([]),this.isPanDown=!1,this.scale=.4,this.tx=2,this.ty=2,this.maxx=444,this.maxy=444,this.zoom=1,this.minZoom=.1,this.maxZoom=10,this.zoomStep=.1,this.begin=0,this.end=0,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.type=R(6),this.setType=a=>{this.type.set(a)},this.direction=R(1),this.setDirection=a=>{this.direction.set(a)},this.pairstatement=me(()=>this.data),this.branch=me(()=>{let a=this.elements();if(!this.pairstatement()||!this.pairstatement().key||!a.length)return;let c=new oe;c.from=this.pairstatement(),c.key=this.pairstatement().key,c.heading=c.key,a.forEach(k=>{let A=new ve;A.key=k.key,A.from=c,A.heading=k.label,A.subs=k.options.map(Y=>{let z=new ye;return z.key=Y.key,z.from=A,z.heading=Y.key,z.isSelected=this.hasValue(this.pairstatement(),k,Y),z}),c.body.push(A)});let l=c.flatten();for(let k of l)k.shape.width=30,k.shape.height=30,k.shape.radius=40,k.shape.x=0,k.shape.y=0;let u=this.w(),f=this.h(),C=this.type();C===1?de.generate(C,this.direction(),c,u,f):C===2?de.generate(C,this.direction(),c,u,f):C===3?de.generate(C,this.direction(),c,u,f):C===4?ke.arrangeNodes(c):C===5?Te.placeRadially(c,u,f):C===6&&Ee.arrangeNodesRadially(c,u/2,f/2),fe.SetThemeColors(l,"Random");let y=0,B=0;return l.forEach(k=>{k.shape.x>y&&(y=k.shape.x),k.shape.y>B&&(B=k.shape.y)}),y<this.w()&&(y=this.w()),B<this.h()&&(B=this.h()),this.maxx=y,this.maxy=B,this.scale=Math.min(this.w()/y,this.h()/B),this.tx=this.w()/2,this.ty=this.h()/3,this.scale<.1?this.scale=.2:this.scale>2&&(this.scale=1.5),c}),this.onPanDown=a=>{a.stopPropagation(),!(this.isPanDown||a.button!==0)&&(this.begin=a.clientX,this.end=a.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp))},this.onPan=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.isPanDown&&(this.tx+=u,this.ty+=f,this.begin=c,this.end=l,this.requestUpdate())},this.onPanUp=a=>{a.stopPropagation(),a.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp),this.requestUpdate()},this.onWheel=a=>{if(a.shiftKey){let c=a.deltaY>0?this.zoom*(1-this.zoomStep):this.zoom*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.zoom=c}else{let c=a.deltaY>0?this.scale*(1-this.zoomStep):this.scale*(1+this.zoomStep);if(c<this.minZoom||c>this.maxZoom)return;this.scale=c}},this.setTranslation=a=>{this.tx=a.x,this.ty=a.y,console.log(this.tx,this.ty)},this.onSvgDown=(a,c)=>{this.down=c,a.stopPropagation(),a.preventDefault(),a instanceof TouchEvent?(this.begin=a.touches[0].clientX,this.end=a.touches[0].clientY):(this.begin=a.clientX,this.end=a.clientY),!window.onpointermove&&(window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp))},this.onSvgMove=a=>{a.stopPropagation();let c,l;a instanceof TouchEvent?(c=a.touches[0].clientX,l=a.touches[0].clientY):(c=a.clientX,l=a.clientY);let u=parseFloat((c-this.begin).toFixed(2)),f=parseFloat((l-this.end).toFixed(2));this.down.shape.x+=u,this.down.shape.y+=f,this.down.groups.forEach(C=>{C.move(u,f)}),this.begin=c,this.end=l},this.onSvgUp=a=>{a.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp),this.begin=0,this.end=0},this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}requestUpdate(){}};o.\u0275fac=function(i){return new(i||o)(I(te),I(gi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pairstatement-diagram"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([gi,K]),X],decls:30,vars:31,consts:[["svg",""],[1,"pairstatement"],[1,"pairstatement-header"],[1,"very-small-button",3,"click"],[1,"pairstatement-container","pannable-container"],[1,"pannable-svg",3,"pointerdown","wheel"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[3,"pointerdown","touchstart"],[1,"svgtxt"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return _(a),h(n.setDirection(0))}),x(3,"Vertical"),d(),p(4,"button",3),v("click",function(){return _(a),h(n.setDirection(1))}),x(5,"Horizontal"),d(),p(6,"button",3),v("click",function(){return _(a),h(n.setType(1))}),x(7,"Pack"),d(),p(8,"button",3),v("click",function(){return _(a),h(n.setType(2))}),x(9,"Tree"),d(),p(10,"button",3),v("click",function(){return _(a),h(n.setType(3))}),x(11,"Cluster"),d(),p(12,"button",3),v("click",function(){return _(a),h(n.setType(4))}),x(13,"Circular"),d(),p(14,"button",3),v("click",function(){return _(a),h(n.setType(5))}),x(15,"MindMap"),d(),p(16,"button",3),v("click",function(){return _(a),h(n.setType(6))}),x(17,"Radial"),d()(),p(18,"div",4),G(),p(19,"svg",5,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(21,"defs")(22,"filter",6),Z(23,"feGaussianBlur",7),d(),p(24,"marker",8),Z(25,"path",9),d(),p(26,"marker",10),Z(27,"circle",11),d()(),Ce(28),O(29,YV,9,13),d()()()}if(i&2){j("width",n.w(),"px")("height",n.h(),"px"),m(2),S("active",n.direction()===0),m(2),S("active",n.direction()===1),m(2),S("active",n.type()===1),m(2),S("active",n.type()===2),m(2),S("active",n.type()===3),m(2),S("active",n.type()===4),m(2),S("active",n.type()===5),m(2),S("active",n.type()===6),m(2),j("max-width",n.maxx,"px")("max-height",n.maxy,"px"),m(),j("width",n.w(),"px")("height",n.h(),"px"),P("viewBox",-n.tx+" "+-n.ty+" "+n.w()+" "+n.h()),m(9);let a=ge(n.branch());m(),N(a&&a!==void 0&&a.key?29:-1)}},dependencies:[J,ne,ee],styles:['.pairstatement[_ngcontent-%COMP%]{display:grid;grid-template-areas:"pairstatement-header" "pairstatement-container";grid-template-rows:32px auto;height:100%;width:100%;row-gap:10px;overflow:hidden;padding:2px;-webkit-user-select:none;user-select:none}.pairstatement-header[_ngcontent-%COMP%]{grid-area:pairstatement-header;display:flex;gap:2px;overflow:hidden;overflow-x:hidden;flex-direction:row;flex-wrap:nowrap;align-items:center}.pairstatement-right-top[_ngcontent-%COMP%]{grid-area:pairstatement-right-top;height:100%;width:100%}.pannable-container[_ngcontent-%COMP%], .pannable-svg[_ngcontent-%COMP%]{overflow:hidden}']});let r=o;return r})();function HV(r,o){if(r&1){let e=g();p(0,"planstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function XV(r,o){if(r&1){let e=g();p(0,"agentstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function ZV(r,o){if(r&1){let e=g();p(0,"declarestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function JV(r,o){if(r&1){let e=g();p(0,"assignstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function QV(r,o){if(r&1){let e=g();p(0,"ifstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function e3(r,o){if(r&1){let e=g();p(0,"thenstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function t3(r,o){if(r&1){let e=g();p(0,"elseifstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function i3(r,o){if(r&1){let e=g();p(0,"elsestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function n3(r,o){if(r&1){let e=g();p(0,"instatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function r3(r,o){if(r&1){let e=g();p(0,"pickstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function a3(r,o){if(r&1){let e=g();p(0,"substatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function o3(r,o){if(r&1){let e=g();p(0,"childstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function s3(r,o){if(r&1){let e=g();p(0,"infantstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function l3(r,o){if(r&1){let e=g();p(0,"outstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function c3(r,o){if(r&1){let e=g();p(0,"remstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function p3(r,o){if(r&1){let e=g();p(0,"switchstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function d3(r,o){if(r&1){let e=g();p(0,"casestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function u3(r,o){if(r&1){let e=g();p(0,"defaultstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function m3(r,o){if(r&1){let e=g();p(0,"forstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function _3(r,o){if(r&1){let e=g();p(0,"foreachstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function h3(r,o){if(r&1){let e=g();p(0,"whilestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function f3(r,o){if(r&1){let e=g();p(0,"dostatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function y3(r,o){if(r&1){let e=g();p(0,"callstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function v3(r,o){if(r&1){let e=g();p(0,"promptstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function x3(r,o){if(r&1){let e=g();p(0,"linestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function g3(r,o){if(r&1){let e=g();p(0,"invokestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function C3(r,o){if(r&1){let e=g();p(0,"projectstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function w3(r,o){if(r&1){let e=g();p(0,"schemastatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function S3(r,o){if(r&1){let e=g();p(0,"tablestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function k3(r,o){if(r&1){let e=g();p(0,"columnstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function T3(r,o){if(r&1){let e=g();p(0,"enumstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function E3(r,o){if(r&1){let e=g();p(0,"valuestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function b3(r,o){if(r&1){let e=g();p(0,"seedstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function V3(r,o){if(r&1){let e=g();p(0,"recordstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function P3(r,o){if(r&1){let e=g();p(0,"fieldstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function F3(r,o){if(r&1){let e=g();p(0,"apistatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function M3(r,o){if(r&1){let e=g();p(0,"routestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function D3(r,o){if(r&1){let e=g();p(0,"designstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function I3(r,o){if(r&1){let e=g();p(0,"pagestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function K3(r,o){if(r&1){let e=g();p(0,"codestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function B3(r,o){if(r&1){let e=g();p(0,"folderstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function $3(r,o){if(r&1){let e=g();p(0,"filestatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function L3(r,o){if(r&1){let e=g();p(0,"paramstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function W3(r,o){if(r&1){let e=g();p(0,"returnstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function A3(r,o){if(r&1){let e=g();p(0,"branchstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function O3(r,o){if(r&1){let e=g();p(0,"historystatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function z3(r,o){if(r&1){let e=g();p(0,"eventstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function N3(r,o){if(r&1){let e=g();p(0,"dispatchstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function R3(r,o){if(r&1){let e=g();p(0,"actionstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function q3(r,o){if(r&1){let e=g();p(0,"awaitstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function j3(r,o){if(r&1){let e=g();p(0,"endstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function U3(r,o){if(r&1){let e=g();p(0,"linkstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function G3(r,o){if(r&1){let e=g();p(0,"pairstatement-diagram",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}var K3e=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data?this.editing=this._data:this._data={}}constructor(t){this.store=t,this.w=L.required(),this.h=L.required(),this.dataEdited=new Q,this.editing={},this._data={}}ngOnInit(){}loadAssets(){return W(this,null,function*(){})}onInputChange(){this.dataEdited.emit(this.data)}};o.\u0275fac=function(i){return new(i||o)(I(te))},o.\u0275cmp=H({type:o,selectors:[["diagrams"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[X],decls:53,vars:1,consts:[[3,"data","root","w","h"],[3,"dataEdited","data","root","w","h"]],template:function(i,n){i&1&&O(0,HV,1,4,"planstatement-diagram",0)(1,XV,1,4,"agentstatement-diagram",0)(2,ZV,1,4,"declarestatement-diagram",0)(3,JV,1,4,"assignstatement-diagram",0)(4,QV,1,4,"ifstatement-diagram",0)(5,e3,1,4,"thenstatement-diagram",0)(6,t3,1,4,"elseifstatement-diagram",0)(7,i3,1,4,"elsestatement-diagram",0)(8,n3,1,4,"instatement-diagram",0)(9,r3,1,4,"pickstatement-diagram",0)(10,a3,1,4,"substatement-diagram",0)(11,o3,1,4,"childstatement-diagram",0)(12,s3,1,4,"infantstatement-diagram",0)(13,l3,1,4,"outstatement-diagram",0)(14,c3,1,4,"remstatement-diagram",0)(15,p3,1,4,"switchstatement-diagram",0)(16,d3,1,4,"casestatement-diagram",0)(17,u3,1,4,"defaultstatement-diagram",0)(18,m3,1,4,"forstatement-diagram",0)(19,_3,1,4,"foreachstatement-diagram",0)(20,h3,1,4,"whilestatement-diagram",0)(21,f3,1,4,"dostatement-diagram",0)(22,y3,1,4,"callstatement-diagram",0)(23,v3,1,4,"promptstatement-diagram",0)(24,x3,1,4,"linestatement-diagram",0)(25,g3,1,4,"invokestatement-diagram",0)(26,C3,1,4,"projectstatement-diagram",0)(27,w3,1,4,"schemastatement-diagram",0)(28,S3,1,4,"tablestatement-diagram",0)(29,k3,1,4,"columnstatement-diagram",0)(30,T3,1,4,"enumstatement-diagram",0)(31,E3,1,4,"valuestatement-diagram",0)(32,b3,1,4,"seedstatement-diagram",0)(33,V3,1,4,"recordstatement-diagram",0)(34,P3,1,4,"fieldstatement-diagram",0)(35,F3,1,4,"apistatement-diagram",0)(36,M3,1,4,"routestatement-diagram",0)(37,D3,1,4,"designstatement-diagram",0)(38,I3,1,4,"pagestatement-diagram",0)(39,K3,1,4,"codestatement-diagram",0)(40,B3,1,4,"folderstatement-diagram",0)(41,$3,1,4,"filestatement-diagram",0)(42,L3,1,4,"paramstatement-diagram",0)(43,W3,1,4,"returnstatement-diagram",0)(44,A3,1,4,"branchstatement-diagram",0)(45,O3,1,4,"historystatement-diagram",0)(46,z3,1,4,"eventstatement-diagram",0)(47,N3,1,4,"dispatchstatement-diagram",0)(48,R3,1,4,"actionstatement-diagram",0)(49,q3,1,4,"awaitstatement-diagram",0)(50,j3,1,4,"endstatement-diagram",0)(51,U3,1,4,"linkstatement-diagram",0)(52,G3,1,4,"pairstatement-diagram",0),i&2&&N(n.editing.builderType==="PlanStatement"?0:n.editing.builderType==="AgentStatement"?1:n.editing.builderType==="DeclareStatement"?2:n.editing.builderType==="AssignStatement"?3:n.editing.builderType==="IfStatement"?4:n.editing.builderType==="ThenStatement"?5:n.editing.builderType==="ElseIfStatement"?6:n.editing.builderType==="ElseStatement"?7:n.editing.builderType==="InStatement"?8:n.editing.builderType==="PickStatement"?9:n.editing.builderType==="SubStatement"?10:n.editing.builderType==="ChildStatement"?11:n.editing.builderType==="InfantStatement"?12:n.editing.builderType==="OutStatement"?13:n.editing.builderType==="RemStatement"?14:n.editing.builderType==="SwitchStatement"?15:n.editing.builderType==="CaseStatement"?16:n.editing.builderType==="DefaultStatement"?17:n.editing.builderType==="ForStatement"?18:n.editing.builderType==="ForEachStatement"?19:n.editing.builderType==="WhileStatement"?20:n.editing.builderType==="DoStatement"?21:n.editing.builderType==="CallStatement"?22:n.editing.builderType==="PromptStatement"?23:n.editing.builderType==="LineStatement"?24:n.editing.builderType==="InvokeStatement"?25:n.editing.builderType==="ProjectStatement"?26:n.editing.builderType==="SchemaStatement"?27:n.editing.builderType==="TableStatement"?28:n.editing.builderType==="ColumnStatement"?29:n.editing.builderType==="EnumStatement"?30:n.editing.builderType==="ValueStatement"?31:n.editing.builderType==="SeedStatement"?32:n.editing.builderType==="RecordStatement"?33:n.editing.builderType==="FieldStatement"?34:n.editing.builderType==="ApiStatement"?35:n.editing.builderType==="RouteStatement"?36:n.editing.builderType==="DesignStatement"?37:n.editing.builderType==="PageStatement"?38:n.editing.builderType==="CodeStatement"?39:n.editing.builderType==="FolderStatement"?40:n.editing.builderType==="FileStatement"?41:n.editing.builderType==="ParamStatement"?42:n.editing.builderType==="ReturnStatement"?43:n.editing.builderType==="BranchStatement"?44:n.editing.builderType==="HistoryStatement"?45:n.editing.builderType==="EventStatement"?46:n.editing.builderType==="DispatchStatement"?47:n.editing.builderType==="ActionStatement"?48:n.editing.builderType==="AwaitStatement"?49:n.editing.builderType==="EndStatement"?50:n.editing.builderType==="LinkStatement"?51:n.editing.builderType==="PairStatement"?52:-1)},dependencies:[J,ee,Na,Ra,qa,ja,Ua,Ga,Ya,Ha,Xa,Za,Ja,Qa,eo,to,io,no,ro,ao,oo,so,lo,co,po,uo,mo,_o,ho,fo,yo,vo,xo,go,Co,wo,So,ko,To,Eo,bo,Vo,Po,Fo,Mo,Do,Io,Ko,Bo,$o,Lo,Wo,Ao,Oo,zo]});let r=o;return r})();function Y3(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function H3(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function X3(r,o){if(r&1&&(p(0,"div",3),T(1,H3,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function Z3(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function J3(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function Q3(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function eP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function tP(r,o){if(r&1&&(p(0,"div",3),T(1,eP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function iP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function nP(r,o){if(r&1&&(p(0,"div",3),T(1,iP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function rP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function aP(r,o){if(r&1&&(p(0,"div",3),T(1,rP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function oP(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function sP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function lP(r,o){if(r&1&&(p(0,"div",3),T(1,sP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function cP(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,Y3,1,5,"input",2)(4,X3,3,0,"div",3)(5,Z3,1,5,"input",2)(6,J3,1,5,"input",2)(7,Q3,1,5,"input",2)(8,tP,3,0,"div",3)(9,nP,3,0,"div",3)(10,aP,3,0,"div",3)(11,oP,1,4,"textarea",4)(12,lP,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var No=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["planstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([wt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,cP,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function pP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function dP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function uP(r,o){if(r&1&&(p(0,"div",3),T(1,dP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function mP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function _P(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function hP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function fP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function yP(r,o){if(r&1&&(p(0,"div",3),T(1,fP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function vP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function xP(r,o){if(r&1&&(p(0,"div",3),T(1,vP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function gP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function CP(r,o){if(r&1&&(p(0,"div",3),T(1,gP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function wP(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function SP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function kP(r,o){if(r&1&&(p(0,"div",3),T(1,SP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function TP(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,pP,1,5,"input",2)(4,uP,3,0,"div",3)(5,mP,1,5,"input",2)(6,_P,1,5,"input",2)(7,hP,1,5,"input",2)(8,yP,3,0,"div",3)(9,xP,3,0,"div",3)(10,CP,3,0,"div",3)(11,wP,1,4,"textarea",4)(12,kP,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ro=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(St),I(K))},o.\u0275cmp=H({type:o,selectors:[["agentstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([St,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,TP,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function EP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function bP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function VP(r,o){if(r&1&&(p(0,"div",3),T(1,bP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function PP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function FP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function MP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function DP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function IP(r,o){if(r&1&&(p(0,"div",3),T(1,DP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function KP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function BP(r,o){if(r&1&&(p(0,"div",3),T(1,KP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $P(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function LP(r,o){if(r&1&&(p(0,"div",3),T(1,$P,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function WP(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function AP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function OP(r,o){if(r&1&&(p(0,"div",3),T(1,AP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function zP(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,EP,1,5,"input",2)(4,VP,3,0,"div",3)(5,PP,1,5,"input",2)(6,FP,1,5,"input",2)(7,MP,1,5,"input",2)(8,IP,3,0,"div",3)(9,BP,3,0,"div",3)(10,LP,3,0,"div",3)(11,WP,1,4,"textarea",4)(12,OP,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var qo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["declarestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([kt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,zP,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function NP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function RP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function qP(r,o){if(r&1&&(p(0,"div",3),T(1,RP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function jP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function UP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function GP(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function YP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function HP(r,o){if(r&1&&(p(0,"div",3),T(1,YP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function XP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ZP(r,o){if(r&1&&(p(0,"div",3),T(1,XP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function JP(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function QP(r,o){if(r&1&&(p(0,"div",3),T(1,JP,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eF(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function tF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function iF(r,o){if(r&1&&(p(0,"div",3),T(1,tF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function nF(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,NP,1,5,"input",2)(4,qP,3,0,"div",3)(5,jP,1,5,"input",2)(6,UP,1,5,"input",2)(7,GP,1,5,"input",2)(8,HP,3,0,"div",3)(9,ZP,3,0,"div",3)(10,QP,3,0,"div",3)(11,eF,1,4,"textarea",4)(12,iF,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var jo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Tt),I(K))},o.\u0275cmp=H({type:o,selectors:[["assignstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Tt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,nF,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function rF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function aF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function oF(r,o){if(r&1&&(p(0,"div",3),T(1,aF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function sF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function lF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function cF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function pF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function dF(r,o){if(r&1&&(p(0,"div",3),T(1,pF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function uF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function mF(r,o){if(r&1&&(p(0,"div",3),T(1,uF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _F(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hF(r,o){if(r&1&&(p(0,"div",3),T(1,_F,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fF(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function yF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function vF(r,o){if(r&1&&(p(0,"div",3),T(1,yF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function xF(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,rF,1,5,"input",2)(4,oF,3,0,"div",3)(5,sF,1,5,"input",2)(6,lF,1,5,"input",2)(7,cF,1,5,"input",2)(8,dF,3,0,"div",3)(9,mF,3,0,"div",3)(10,hF,3,0,"div",3)(11,fF,1,4,"textarea",4)(12,vF,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Uo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Et),I(K))},o.\u0275cmp=H({type:o,selectors:[["ifstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Et,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,xF,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function gF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function CF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function wF(r,o){if(r&1&&(p(0,"div",3),T(1,CF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function SF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function kF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function TF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function EF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function bF(r,o){if(r&1&&(p(0,"div",3),T(1,EF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function VF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function PF(r,o){if(r&1&&(p(0,"div",3),T(1,VF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function FF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function MF(r,o){if(r&1&&(p(0,"div",3),T(1,FF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DF(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function IF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function KF(r,o){if(r&1&&(p(0,"div",3),T(1,IF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function BF(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,gF,1,5,"input",2)(4,wF,3,0,"div",3)(5,SF,1,5,"input",2)(6,kF,1,5,"input",2)(7,TF,1,5,"input",2)(8,bF,3,0,"div",3)(9,PF,3,0,"div",3)(10,MF,3,0,"div",3)(11,DF,1,4,"textarea",4)(12,KF,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Go=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["thenstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([bt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,BF,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function $F(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function LF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function WF(r,o){if(r&1&&(p(0,"div",3),T(1,LF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function AF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function OF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function zF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function NF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function RF(r,o){if(r&1&&(p(0,"div",3),T(1,NF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function qF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function jF(r,o){if(r&1&&(p(0,"div",3),T(1,qF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function UF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GF(r,o){if(r&1&&(p(0,"div",3),T(1,UF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YF(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function HF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function XF(r,o){if(r&1&&(p(0,"div",3),T(1,HF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function ZF(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,$F,1,5,"input",2)(4,WF,3,0,"div",3)(5,AF,1,5,"input",2)(6,OF,1,5,"input",2)(7,zF,1,5,"input",2)(8,RF,3,0,"div",3)(9,jF,3,0,"div",3)(10,GF,3,0,"div",3)(11,YF,1,4,"textarea",4)(12,XF,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Yo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Vt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elseifstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Vt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,ZF,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function JF(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function QF(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function eM(r,o){if(r&1&&(p(0,"div",3),T(1,QF,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function tM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function iM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function nM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function rM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function aM(r,o){if(r&1&&(p(0,"div",3),T(1,rM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function oM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function sM(r,o){if(r&1&&(p(0,"div",3),T(1,oM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function lM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function cM(r,o){if(r&1&&(p(0,"div",3),T(1,lM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function pM(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function dM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function uM(r,o){if(r&1&&(p(0,"div",3),T(1,dM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function mM(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,JF,1,5,"input",2)(4,eM,3,0,"div",3)(5,tM,1,5,"input",2)(6,iM,1,5,"input",2)(7,nM,1,5,"input",2)(8,aM,3,0,"div",3)(9,sM,3,0,"div",3)(10,cM,3,0,"div",3)(11,pM,1,4,"textarea",4)(12,uM,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ho=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Pt),I(K))},o.\u0275cmp=H({type:o,selectors:[["elsestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Pt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,mM,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function _M(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function hM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function fM(r,o){if(r&1&&(p(0,"div",3),T(1,hM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function yM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function vM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function xM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function gM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function CM(r,o){if(r&1&&(p(0,"div",3),T(1,gM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function wM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function SM(r,o){if(r&1&&(p(0,"div",3),T(1,wM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function kM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function TM(r,o){if(r&1&&(p(0,"div",3),T(1,kM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function EM(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function bM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function VM(r,o){if(r&1&&(p(0,"div",3),T(1,bM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function PM(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,_M,1,5,"input",2)(4,fM,3,0,"div",3)(5,yM,1,5,"input",2)(6,vM,1,5,"input",2)(7,xM,1,5,"input",2)(8,CM,3,0,"div",3)(9,SM,3,0,"div",3)(10,TM,3,0,"div",3)(11,EM,1,4,"textarea",4)(12,VM,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Xo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ft),I(K))},o.\u0275cmp=H({type:o,selectors:[["instatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ft,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,PM,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function FM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function MM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function DM(r,o){if(r&1&&(p(0,"div",3),T(1,MM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function IM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function KM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function BM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function $M(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function LM(r,o){if(r&1&&(p(0,"div",3),T(1,$M,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function WM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function AM(r,o){if(r&1&&(p(0,"div",3),T(1,WM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function OM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function zM(r,o){if(r&1&&(p(0,"div",3),T(1,OM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function NM(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function RM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function qM(r,o){if(r&1&&(p(0,"div",3),T(1,RM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function jM(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,FM,1,5,"input",2)(4,DM,3,0,"div",3)(5,IM,1,5,"input",2)(6,KM,1,5,"input",2)(7,BM,1,5,"input",2)(8,LM,3,0,"div",3)(9,AM,3,0,"div",3)(10,zM,3,0,"div",3)(11,NM,1,4,"textarea",4)(12,qM,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Zo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Mt),I(K))},o.\u0275cmp=H({type:o,selectors:[["pickstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Mt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,jM,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function UM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function GM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function YM(r,o){if(r&1&&(p(0,"div",3),T(1,GM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function HM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function XM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function ZM(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function JM(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function QM(r,o){if(r&1&&(p(0,"div",3),T(1,JM,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function tD(r,o){if(r&1&&(p(0,"div",3),T(1,eD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function iD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function nD(r,o){if(r&1&&(p(0,"div",3),T(1,iD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function rD(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function aD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function oD(r,o){if(r&1&&(p(0,"div",3),T(1,aD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function sD(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,UM,1,5,"input",2)(4,YM,3,0,"div",3)(5,HM,1,5,"input",2)(6,XM,1,5,"input",2)(7,ZM,1,5,"input",2)(8,QM,3,0,"div",3)(9,tD,3,0,"div",3)(10,nD,3,0,"div",3)(11,rD,1,4,"textarea",4)(12,oD,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Jo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Dt),I(K))},o.\u0275cmp=H({type:o,selectors:[["substatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Dt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,sD,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function lD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function cD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function pD(r,o){if(r&1&&(p(0,"div",3),T(1,cD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function dD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function uD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function mD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function _D(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hD(r,o){if(r&1&&(p(0,"div",3),T(1,_D,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function yD(r,o){if(r&1&&(p(0,"div",3),T(1,fD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function vD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function xD(r,o){if(r&1&&(p(0,"div",3),T(1,vD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function gD(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function CD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function wD(r,o){if(r&1&&(p(0,"div",3),T(1,CD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function SD(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,lD,1,5,"input",2)(4,pD,3,0,"div",3)(5,dD,1,5,"input",2)(6,uD,1,5,"input",2)(7,mD,1,5,"input",2)(8,hD,3,0,"div",3)(9,yD,3,0,"div",3)(10,xD,3,0,"div",3)(11,gD,1,4,"textarea",4)(12,wD,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Qo=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(It),I(K))},o.\u0275cmp=H({type:o,selectors:[["childstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([It,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,SD,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function kD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function TD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function ED(r,o){if(r&1&&(p(0,"div",3),T(1,TD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function bD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function VD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function PD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function FD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function MD(r,o){if(r&1&&(p(0,"div",3),T(1,FD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ID(r,o){if(r&1&&(p(0,"div",3),T(1,DD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function KD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function BD(r,o){if(r&1&&(p(0,"div",3),T(1,KD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $D(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function LD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function WD(r,o){if(r&1&&(p(0,"div",3),T(1,LD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function AD(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,kD,1,5,"input",2)(4,ED,3,0,"div",3)(5,bD,1,5,"input",2)(6,VD,1,5,"input",2)(7,PD,1,5,"input",2)(8,MD,3,0,"div",3)(9,ID,3,0,"div",3)(10,BD,3,0,"div",3)(11,$D,1,4,"textarea",4)(12,WD,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var es=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Kt),I(K))},o.\u0275cmp=H({type:o,selectors:[["infantstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Kt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,AD,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function OD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function zD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function ND(r,o){if(r&1&&(p(0,"div",3),T(1,zD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function RD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function qD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function jD(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function UD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GD(r,o){if(r&1&&(p(0,"div",3),T(1,UD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function HD(r,o){if(r&1&&(p(0,"div",3),T(1,YD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function XD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ZD(r,o){if(r&1&&(p(0,"div",3),T(1,XD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function JD(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function QD(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function e4(r,o){if(r&1&&(p(0,"div",3),T(1,QD,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function t4(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,OD,1,5,"input",2)(4,ND,3,0,"div",3)(5,RD,1,5,"input",2)(6,qD,1,5,"input",2)(7,jD,1,5,"input",2)(8,GD,3,0,"div",3)(9,HD,3,0,"div",3)(10,ZD,3,0,"div",3)(11,JD,1,4,"textarea",4)(12,e4,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ts=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Bt),I(K))},o.\u0275cmp=H({type:o,selectors:[["outstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Bt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,t4,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function i4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function n4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function r4(r,o){if(r&1&&(p(0,"div",3),T(1,n4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function a4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function o4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function s4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function l4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function c4(r,o){if(r&1&&(p(0,"div",3),T(1,l4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function p4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function d4(r,o){if(r&1&&(p(0,"div",3),T(1,p4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function u4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function m4(r,o){if(r&1&&(p(0,"div",3),T(1,u4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _4(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function h4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function f4(r,o){if(r&1&&(p(0,"div",3),T(1,h4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function y4(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,i4,1,5,"input",2)(4,r4,3,0,"div",3)(5,a4,1,5,"input",2)(6,o4,1,5,"input",2)(7,s4,1,5,"input",2)(8,c4,3,0,"div",3)(9,d4,3,0,"div",3)(10,m4,3,0,"div",3)(11,_4,1,4,"textarea",4)(12,f4,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var is=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I($t),I(K))},o.\u0275cmp=H({type:o,selectors:[["remstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([$t,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,y4,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function v4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function x4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function g4(r,o){if(r&1&&(p(0,"div",3),T(1,x4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function C4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function w4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function S4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function k4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function T4(r,o){if(r&1&&(p(0,"div",3),T(1,k4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function E4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function b4(r,o){if(r&1&&(p(0,"div",3),T(1,E4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function V4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function P4(r,o){if(r&1&&(p(0,"div",3),T(1,V4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function F4(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function M4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function D4(r,o){if(r&1&&(p(0,"div",3),T(1,M4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function I4(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,v4,1,5,"input",2)(4,g4,3,0,"div",3)(5,C4,1,5,"input",2)(6,w4,1,5,"input",2)(7,S4,1,5,"input",2)(8,T4,3,0,"div",3)(9,b4,3,0,"div",3)(10,P4,3,0,"div",3)(11,F4,1,4,"textarea",4)(12,D4,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ns=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Lt),I(K))},o.\u0275cmp=H({type:o,selectors:[["switchstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Lt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,I4,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function K4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function B4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function $4(r,o){if(r&1&&(p(0,"div",3),T(1,B4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function L4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function W4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function A4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function O4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function z4(r,o){if(r&1&&(p(0,"div",3),T(1,O4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function N4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function R4(r,o){if(r&1&&(p(0,"div",3),T(1,N4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function q4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function j4(r,o){if(r&1&&(p(0,"div",3),T(1,q4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function U4(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function G4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function Y4(r,o){if(r&1&&(p(0,"div",3),T(1,G4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function H4(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,K4,1,5,"input",2)(4,$4,3,0,"div",3)(5,L4,1,5,"input",2)(6,W4,1,5,"input",2)(7,A4,1,5,"input",2)(8,z4,3,0,"div",3)(9,R4,3,0,"div",3)(10,j4,3,0,"div",3)(11,U4,1,4,"textarea",4)(12,Y4,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var rs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Wt),I(K))},o.\u0275cmp=H({type:o,selectors:[["casestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Wt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,H4,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function X4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function Z4(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function J4(r,o){if(r&1&&(p(0,"div",3),T(1,Z4,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function Q4(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function eI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function tI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function iI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function nI(r,o){if(r&1&&(p(0,"div",3),T(1,iI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function rI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function aI(r,o){if(r&1&&(p(0,"div",3),T(1,rI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function oI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function sI(r,o){if(r&1&&(p(0,"div",3),T(1,oI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function lI(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function cI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function pI(r,o){if(r&1&&(p(0,"div",3),T(1,cI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function dI(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,X4,1,5,"input",2)(4,J4,3,0,"div",3)(5,Q4,1,5,"input",2)(6,eI,1,5,"input",2)(7,tI,1,5,"input",2)(8,nI,3,0,"div",3)(9,aI,3,0,"div",3)(10,sI,3,0,"div",3)(11,lI,1,4,"textarea",4)(12,pI,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var as=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(At),I(K))},o.\u0275cmp=H({type:o,selectors:[["defaultstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([At,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,dI,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function uI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function mI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function _I(r,o){if(r&1&&(p(0,"div",3),T(1,mI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function hI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function fI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function yI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function vI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function xI(r,o){if(r&1&&(p(0,"div",3),T(1,vI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function gI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function CI(r,o){if(r&1&&(p(0,"div",3),T(1,gI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function wI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function SI(r,o){if(r&1&&(p(0,"div",3),T(1,wI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function kI(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function TI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function EI(r,o){if(r&1&&(p(0,"div",3),T(1,TI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function bI(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,uI,1,5,"input",2)(4,_I,3,0,"div",3)(5,hI,1,5,"input",2)(6,fI,1,5,"input",2)(7,yI,1,5,"input",2)(8,xI,3,0,"div",3)(9,CI,3,0,"div",3)(10,SI,3,0,"div",3)(11,kI,1,4,"textarea",4)(12,EI,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var os=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ot),I(K))},o.\u0275cmp=H({type:o,selectors:[["forstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ot,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,bI,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function VI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function PI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function FI(r,o){if(r&1&&(p(0,"div",3),T(1,PI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function MI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function DI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function II(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function KI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function BI(r,o){if(r&1&&(p(0,"div",3),T(1,KI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $I(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function LI(r,o){if(r&1&&(p(0,"div",3),T(1,$I,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function WI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function AI(r,o){if(r&1&&(p(0,"div",3),T(1,WI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function OI(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function zI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function NI(r,o){if(r&1&&(p(0,"div",3),T(1,zI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function RI(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,VI,1,5,"input",2)(4,FI,3,0,"div",3)(5,MI,1,5,"input",2)(6,DI,1,5,"input",2)(7,II,1,5,"input",2)(8,BI,3,0,"div",3)(9,LI,3,0,"div",3)(10,AI,3,0,"div",3)(11,OI,1,4,"textarea",4)(12,NI,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ss=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["foreachstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([zt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,RI,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function qI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function jI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function UI(r,o){if(r&1&&(p(0,"div",3),T(1,jI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function GI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function YI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function HI(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function XI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ZI(r,o){if(r&1&&(p(0,"div",3),T(1,XI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function JI(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function QI(r,o){if(r&1&&(p(0,"div",3),T(1,JI,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function tK(r,o){if(r&1&&(p(0,"div",3),T(1,eK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function iK(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function nK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function rK(r,o){if(r&1&&(p(0,"div",3),T(1,nK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function aK(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,qI,1,5,"input",2)(4,UI,3,0,"div",3)(5,GI,1,5,"input",2)(6,YI,1,5,"input",2)(7,HI,1,5,"input",2)(8,ZI,3,0,"div",3)(9,QI,3,0,"div",3)(10,tK,3,0,"div",3)(11,iK,1,4,"textarea",4)(12,rK,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ls=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Nt),I(K))},o.\u0275cmp=H({type:o,selectors:[["whilestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Nt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,aK,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function oK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function sK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function lK(r,o){if(r&1&&(p(0,"div",3),T(1,sK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function cK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function pK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function dK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function uK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function mK(r,o){if(r&1&&(p(0,"div",3),T(1,uK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _K(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hK(r,o){if(r&1&&(p(0,"div",3),T(1,_K,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function yK(r,o){if(r&1&&(p(0,"div",3),T(1,fK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function vK(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function xK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function gK(r,o){if(r&1&&(p(0,"div",3),T(1,xK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function CK(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,oK,1,5,"input",2)(4,lK,3,0,"div",3)(5,cK,1,5,"input",2)(6,pK,1,5,"input",2)(7,dK,1,5,"input",2)(8,mK,3,0,"div",3)(9,hK,3,0,"div",3)(10,yK,3,0,"div",3)(11,vK,1,4,"textarea",4)(12,gK,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var cs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Rt),I(K))},o.\u0275cmp=H({type:o,selectors:[["dostatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Rt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,CK,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function wK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function SK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function kK(r,o){if(r&1&&(p(0,"div",3),T(1,SK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function TK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function EK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function bK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function VK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function PK(r,o){if(r&1&&(p(0,"div",3),T(1,VK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function FK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function MK(r,o){if(r&1&&(p(0,"div",3),T(1,FK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function IK(r,o){if(r&1&&(p(0,"div",3),T(1,DK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function KK(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function BK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function $K(r,o){if(r&1&&(p(0,"div",3),T(1,BK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function LK(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,wK,1,5,"input",2)(4,kK,3,0,"div",3)(5,TK,1,5,"input",2)(6,EK,1,5,"input",2)(7,bK,1,5,"input",2)(8,PK,3,0,"div",3)(9,MK,3,0,"div",3)(10,IK,3,0,"div",3)(11,KK,1,4,"textarea",4)(12,$K,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ps=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["callstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([qt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,LK,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function WK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function AK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function OK(r,o){if(r&1&&(p(0,"div",3),T(1,AK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function zK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function NK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function RK(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function qK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function jK(r,o){if(r&1&&(p(0,"div",3),T(1,qK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function UK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GK(r,o){if(r&1&&(p(0,"div",3),T(1,UK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function HK(r,o){if(r&1&&(p(0,"div",3),T(1,YK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function XK(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function ZK(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function JK(r,o){if(r&1&&(p(0,"div",3),T(1,ZK,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function QK(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,WK,1,5,"input",2)(4,OK,3,0,"div",3)(5,zK,1,5,"input",2)(6,NK,1,5,"input",2)(7,RK,1,5,"input",2)(8,jK,3,0,"div",3)(9,GK,3,0,"div",3)(10,HK,3,0,"div",3)(11,XK,1,4,"textarea",4)(12,JK,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ds=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["promptstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([jt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,QK,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function e5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function t5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function i5(r,o){if(r&1&&(p(0,"div",3),T(1,t5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function n5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function r5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function a5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function o5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function s5(r,o){if(r&1&&(p(0,"div",3),T(1,o5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function l5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function c5(r,o){if(r&1&&(p(0,"div",3),T(1,l5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function p5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function d5(r,o){if(r&1&&(p(0,"div",3),T(1,p5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function u5(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function m5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function _5(r,o){if(r&1&&(p(0,"div",3),T(1,m5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function h5(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,e5,1,5,"input",2)(4,i5,3,0,"div",3)(5,n5,1,5,"input",2)(6,r5,1,5,"input",2)(7,a5,1,5,"input",2)(8,s5,3,0,"div",3)(9,c5,3,0,"div",3)(10,d5,3,0,"div",3)(11,u5,1,4,"textarea",4)(12,_5,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var us=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ut),I(K))},o.\u0275cmp=H({type:o,selectors:[["linestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ut,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,h5,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function f5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function y5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function v5(r,o){if(r&1&&(p(0,"div",3),T(1,y5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function x5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function g5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function C5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function w5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function S5(r,o){if(r&1&&(p(0,"div",3),T(1,w5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function k5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function T5(r,o){if(r&1&&(p(0,"div",3),T(1,k5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function E5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function b5(r,o){if(r&1&&(p(0,"div",3),T(1,E5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function V5(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function P5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function F5(r,o){if(r&1&&(p(0,"div",3),T(1,P5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function M5(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,f5,1,5,"input",2)(4,v5,3,0,"div",3)(5,x5,1,5,"input",2)(6,g5,1,5,"input",2)(7,C5,1,5,"input",2)(8,S5,3,0,"div",3)(9,T5,3,0,"div",3)(10,b5,3,0,"div",3)(11,V5,1,4,"textarea",4)(12,F5,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ms=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Gt),I(K))},o.\u0275cmp=H({type:o,selectors:[["invokestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Gt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,M5,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function D5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function I5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function K5(r,o){if(r&1&&(p(0,"div",3),T(1,I5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function B5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function $5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function L5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function W5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function A5(r,o){if(r&1&&(p(0,"div",3),T(1,W5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function O5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function z5(r,o){if(r&1&&(p(0,"div",3),T(1,O5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function N5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function R5(r,o){if(r&1&&(p(0,"div",3),T(1,N5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function q5(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function j5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function U5(r,o){if(r&1&&(p(0,"div",3),T(1,j5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function G5(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,D5,1,5,"input",2)(4,K5,3,0,"div",3)(5,B5,1,5,"input",2)(6,$5,1,5,"input",2)(7,L5,1,5,"input",2)(8,A5,3,0,"div",3)(9,z5,3,0,"div",3)(10,R5,3,0,"div",3)(11,q5,1,4,"textarea",4)(12,U5,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var _s=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Yt),I(K))},o.\u0275cmp=H({type:o,selectors:[["projectstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Yt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,G5,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function Y5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function H5(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function X5(r,o){if(r&1&&(p(0,"div",3),T(1,H5,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function Z5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function J5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function Q5(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function e7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function t7(r,o){if(r&1&&(p(0,"div",3),T(1,e7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function i7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function n7(r,o){if(r&1&&(p(0,"div",3),T(1,i7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function r7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function a7(r,o){if(r&1&&(p(0,"div",3),T(1,r7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function o7(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function s7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function l7(r,o){if(r&1&&(p(0,"div",3),T(1,s7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function c7(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,Y5,1,5,"input",2)(4,X5,3,0,"div",3)(5,Z5,1,5,"input",2)(6,J5,1,5,"input",2)(7,Q5,1,5,"input",2)(8,t7,3,0,"div",3)(9,n7,3,0,"div",3)(10,a7,3,0,"div",3)(11,o7,1,4,"textarea",4)(12,l7,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var hs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Ht),I(K))},o.\u0275cmp=H({type:o,selectors:[["schemastatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Ht,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,c7,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function p7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function d7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function u7(r,o){if(r&1&&(p(0,"div",3),T(1,d7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function m7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function _7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function h7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function f7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function y7(r,o){if(r&1&&(p(0,"div",3),T(1,f7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function v7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function x7(r,o){if(r&1&&(p(0,"div",3),T(1,v7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function g7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function C7(r,o){if(r&1&&(p(0,"div",3),T(1,g7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function w7(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function S7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function k7(r,o){if(r&1&&(p(0,"div",3),T(1,S7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function T7(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,p7,1,5,"input",2)(4,u7,3,0,"div",3)(5,m7,1,5,"input",2)(6,_7,1,5,"input",2)(7,h7,1,5,"input",2)(8,y7,3,0,"div",3)(9,x7,3,0,"div",3)(10,C7,3,0,"div",3)(11,w7,1,4,"textarea",4)(12,k7,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var fs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Xt),I(K))},o.\u0275cmp=H({type:o,selectors:[["tablestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Xt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,T7,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function E7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function b7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function V7(r,o){if(r&1&&(p(0,"div",3),T(1,b7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function P7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function F7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function M7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function D7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function I7(r,o){if(r&1&&(p(0,"div",3),T(1,D7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function K7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function B7(r,o){if(r&1&&(p(0,"div",3),T(1,K7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function L7(r,o){if(r&1&&(p(0,"div",3),T(1,$7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function W7(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function A7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function O7(r,o){if(r&1&&(p(0,"div",3),T(1,A7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function z7(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,E7,1,5,"input",2)(4,V7,3,0,"div",3)(5,P7,1,5,"input",2)(6,F7,1,5,"input",2)(7,M7,1,5,"input",2)(8,I7,3,0,"div",3)(9,B7,3,0,"div",3)(10,L7,3,0,"div",3)(11,W7,1,4,"textarea",4)(12,O7,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ys=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Zt),I(K))},o.\u0275cmp=H({type:o,selectors:[["columnstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Zt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,z7,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function N7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function R7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function q7(r,o){if(r&1&&(p(0,"div",3),T(1,R7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function j7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function U7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function G7(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function Y7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function H7(r,o){if(r&1&&(p(0,"div",3),T(1,Y7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function X7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function Z7(r,o){if(r&1&&(p(0,"div",3),T(1,X7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function J7(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function Q7(r,o){if(r&1&&(p(0,"div",3),T(1,J7,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eB(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function tB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function iB(r,o){if(r&1&&(p(0,"div",3),T(1,tB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function nB(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,N7,1,5,"input",2)(4,q7,3,0,"div",3)(5,j7,1,5,"input",2)(6,U7,1,5,"input",2)(7,G7,1,5,"input",2)(8,H7,3,0,"div",3)(9,Z7,3,0,"div",3)(10,Q7,3,0,"div",3)(11,eB,1,4,"textarea",4)(12,iB,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var vs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Jt),I(K))},o.\u0275cmp=H({type:o,selectors:[["enumstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Jt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,nB,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function rB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function aB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function oB(r,o){if(r&1&&(p(0,"div",3),T(1,aB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function sB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function lB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function cB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function pB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function dB(r,o){if(r&1&&(p(0,"div",3),T(1,pB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function uB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function mB(r,o){if(r&1&&(p(0,"div",3),T(1,uB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _B(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hB(r,o){if(r&1&&(p(0,"div",3),T(1,_B,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fB(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function yB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function vB(r,o){if(r&1&&(p(0,"div",3),T(1,yB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function xB(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,rB,1,5,"input",2)(4,oB,3,0,"div",3)(5,sB,1,5,"input",2)(6,lB,1,5,"input",2)(7,cB,1,5,"input",2)(8,dB,3,0,"div",3)(9,mB,3,0,"div",3)(10,hB,3,0,"div",3)(11,fB,1,4,"textarea",4)(12,vB,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var xs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(Qt),I(K))},o.\u0275cmp=H({type:o,selectors:[["valuestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([Qt,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,xB,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function gB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function CB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function wB(r,o){if(r&1&&(p(0,"div",3),T(1,CB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function SB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function kB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function TB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function EB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function bB(r,o){if(r&1&&(p(0,"div",3),T(1,EB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function VB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function PB(r,o){if(r&1&&(p(0,"div",3),T(1,VB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function FB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function MB(r,o){if(r&1&&(p(0,"div",3),T(1,FB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DB(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function IB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function KB(r,o){if(r&1&&(p(0,"div",3),T(1,IB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function BB(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,gB,1,5,"input",2)(4,wB,3,0,"div",3)(5,SB,1,5,"input",2)(6,kB,1,5,"input",2)(7,TB,1,5,"input",2)(8,bB,3,0,"div",3)(9,PB,3,0,"div",3)(10,MB,3,0,"div",3)(11,DB,1,4,"textarea",4)(12,KB,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var gs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ei),I(K))},o.\u0275cmp=H({type:o,selectors:[["seedstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ei,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,BB,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function $B(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function LB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function WB(r,o){if(r&1&&(p(0,"div",3),T(1,LB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function AB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function OB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function zB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function NB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function RB(r,o){if(r&1&&(p(0,"div",3),T(1,NB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function qB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function jB(r,o){if(r&1&&(p(0,"div",3),T(1,qB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function UB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GB(r,o){if(r&1&&(p(0,"div",3),T(1,UB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YB(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function HB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function XB(r,o){if(r&1&&(p(0,"div",3),T(1,HB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function ZB(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,$B,1,5,"input",2)(4,WB,3,0,"div",3)(5,AB,1,5,"input",2)(6,OB,1,5,"input",2)(7,zB,1,5,"input",2)(8,RB,3,0,"div",3)(9,jB,3,0,"div",3)(10,GB,3,0,"div",3)(11,YB,1,4,"textarea",4)(12,XB,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Cs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ti),I(K))},o.\u0275cmp=H({type:o,selectors:[["recordstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ti,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,ZB,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function JB(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function QB(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function e$(r,o){if(r&1&&(p(0,"div",3),T(1,QB,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function t$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function i$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function n$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function r$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function a$(r,o){if(r&1&&(p(0,"div",3),T(1,r$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function o$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function s$(r,o){if(r&1&&(p(0,"div",3),T(1,o$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function l$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function c$(r,o){if(r&1&&(p(0,"div",3),T(1,l$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function p$(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function d$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function u$(r,o){if(r&1&&(p(0,"div",3),T(1,d$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function m$(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,JB,1,5,"input",2)(4,e$,3,0,"div",3)(5,t$,1,5,"input",2)(6,i$,1,5,"input",2)(7,n$,1,5,"input",2)(8,a$,3,0,"div",3)(9,s$,3,0,"div",3)(10,c$,3,0,"div",3)(11,p$,1,4,"textarea",4)(12,u$,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ws=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ii),I(K))},o.\u0275cmp=H({type:o,selectors:[["fieldstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ii,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,m$,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function _$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function h$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function f$(r,o){if(r&1&&(p(0,"div",3),T(1,h$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function y$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function v$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function x$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function g$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function C$(r,o){if(r&1&&(p(0,"div",3),T(1,g$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function w$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function S$(r,o){if(r&1&&(p(0,"div",3),T(1,w$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function k$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function T$(r,o){if(r&1&&(p(0,"div",3),T(1,k$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function E$(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function b$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function V$(r,o){if(r&1&&(p(0,"div",3),T(1,b$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function P$(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,_$,1,5,"input",2)(4,f$,3,0,"div",3)(5,y$,1,5,"input",2)(6,v$,1,5,"input",2)(7,x$,1,5,"input",2)(8,C$,3,0,"div",3)(9,S$,3,0,"div",3)(10,T$,3,0,"div",3)(11,E$,1,4,"textarea",4)(12,V$,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ss=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ni),I(K))},o.\u0275cmp=H({type:o,selectors:[["apistatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ni,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,P$,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function F$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function M$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function D$(r,o){if(r&1&&(p(0,"div",3),T(1,M$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function I$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function K$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function B$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function $$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function L$(r,o){if(r&1&&(p(0,"div",3),T(1,$$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function W$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function A$(r,o){if(r&1&&(p(0,"div",3),T(1,W$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function O$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function z$(r,o){if(r&1&&(p(0,"div",3),T(1,O$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function N$(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function R$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function q$(r,o){if(r&1&&(p(0,"div",3),T(1,R$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function j$(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,F$,1,5,"input",2)(4,D$,3,0,"div",3)(5,I$,1,5,"input",2)(6,K$,1,5,"input",2)(7,B$,1,5,"input",2)(8,L$,3,0,"div",3)(9,A$,3,0,"div",3)(10,z$,3,0,"div",3)(11,N$,1,4,"textarea",4)(12,q$,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var ks=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ri),I(K))},o.\u0275cmp=H({type:o,selectors:[["routestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ri,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,j$,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function U$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function G$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function Y$(r,o){if(r&1&&(p(0,"div",3),T(1,G$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function H$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function X$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function Z$(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function J$(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function Q$(r,o){if(r&1&&(p(0,"div",3),T(1,J$,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function tL(r,o){if(r&1&&(p(0,"div",3),T(1,eL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function iL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function nL(r,o){if(r&1&&(p(0,"div",3),T(1,iL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function rL(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function aL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function oL(r,o){if(r&1&&(p(0,"div",3),T(1,aL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function sL(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,U$,1,5,"input",2)(4,Y$,3,0,"div",3)(5,H$,1,5,"input",2)(6,X$,1,5,"input",2)(7,Z$,1,5,"input",2)(8,Q$,3,0,"div",3)(9,tL,3,0,"div",3)(10,nL,3,0,"div",3)(11,rL,1,4,"textarea",4)(12,oL,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ts=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ai),I(K))},o.\u0275cmp=H({type:o,selectors:[["designstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ai,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,sL,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function lL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function cL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function pL(r,o){if(r&1&&(p(0,"div",3),T(1,cL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function dL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function uL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function mL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function _L(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hL(r,o){if(r&1&&(p(0,"div",3),T(1,_L,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function yL(r,o){if(r&1&&(p(0,"div",3),T(1,fL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function vL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function xL(r,o){if(r&1&&(p(0,"div",3),T(1,vL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function gL(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function CL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function wL(r,o){if(r&1&&(p(0,"div",3),T(1,CL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function SL(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,lL,1,5,"input",2)(4,pL,3,0,"div",3)(5,dL,1,5,"input",2)(6,uL,1,5,"input",2)(7,mL,1,5,"input",2)(8,hL,3,0,"div",3)(9,yL,3,0,"div",3)(10,xL,3,0,"div",3)(11,gL,1,4,"textarea",4)(12,wL,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Es=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(oi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pagestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([oi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,SL,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function kL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function TL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function EL(r,o){if(r&1&&(p(0,"div",3),T(1,TL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function bL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function VL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function PL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function FL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ML(r,o){if(r&1&&(p(0,"div",3),T(1,FL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function IL(r,o){if(r&1&&(p(0,"div",3),T(1,DL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function KL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function BL(r,o){if(r&1&&(p(0,"div",3),T(1,KL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $L(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function LL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function WL(r,o){if(r&1&&(p(0,"div",3),T(1,LL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function AL(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,kL,1,5,"input",2)(4,EL,3,0,"div",3)(5,bL,1,5,"input",2)(6,VL,1,5,"input",2)(7,PL,1,5,"input",2)(8,ML,3,0,"div",3)(9,IL,3,0,"div",3)(10,BL,3,0,"div",3)(11,$L,1,4,"textarea",4)(12,WL,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var bs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(si),I(K))},o.\u0275cmp=H({type:o,selectors:[["codestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([si,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,AL,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function OL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function zL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function NL(r,o){if(r&1&&(p(0,"div",3),T(1,zL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function RL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function qL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function jL(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function UL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GL(r,o){if(r&1&&(p(0,"div",3),T(1,UL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function HL(r,o){if(r&1&&(p(0,"div",3),T(1,YL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function XL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function ZL(r,o){if(r&1&&(p(0,"div",3),T(1,XL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function JL(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function QL(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function e6(r,o){if(r&1&&(p(0,"div",3),T(1,QL,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function t6(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,OL,1,5,"input",2)(4,NL,3,0,"div",3)(5,RL,1,5,"input",2)(6,qL,1,5,"input",2)(7,jL,1,5,"input",2)(8,GL,3,0,"div",3)(9,HL,3,0,"div",3)(10,ZL,3,0,"div",3)(11,JL,1,4,"textarea",4)(12,e6,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Vs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(li),I(K))},o.\u0275cmp=H({type:o,selectors:[["folderstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([li,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,t6,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function i6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function n6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function r6(r,o){if(r&1&&(p(0,"div",3),T(1,n6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function a6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function o6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function s6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function l6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function c6(r,o){if(r&1&&(p(0,"div",3),T(1,l6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function p6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function d6(r,o){if(r&1&&(p(0,"div",3),T(1,p6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function u6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function m6(r,o){if(r&1&&(p(0,"div",3),T(1,u6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _6(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function h6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function f6(r,o){if(r&1&&(p(0,"div",3),T(1,h6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function y6(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,i6,1,5,"input",2)(4,r6,3,0,"div",3)(5,a6,1,5,"input",2)(6,o6,1,5,"input",2)(7,s6,1,5,"input",2)(8,c6,3,0,"div",3)(9,d6,3,0,"div",3)(10,m6,3,0,"div",3)(11,_6,1,4,"textarea",4)(12,f6,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ps=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ci),I(K))},o.\u0275cmp=H({type:o,selectors:[["filestatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ci,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,y6,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function v6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function x6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function g6(r,o){if(r&1&&(p(0,"div",3),T(1,x6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function C6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function w6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function S6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function k6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function T6(r,o){if(r&1&&(p(0,"div",3),T(1,k6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function E6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function b6(r,o){if(r&1&&(p(0,"div",3),T(1,E6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function V6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function P6(r,o){if(r&1&&(p(0,"div",3),T(1,V6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function F6(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function M6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function D6(r,o){if(r&1&&(p(0,"div",3),T(1,M6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function I6(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,v6,1,5,"input",2)(4,g6,3,0,"div",3)(5,C6,1,5,"input",2)(6,w6,1,5,"input",2)(7,S6,1,5,"input",2)(8,T6,3,0,"div",3)(9,b6,3,0,"div",3)(10,P6,3,0,"div",3)(11,F6,1,4,"textarea",4)(12,D6,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Fs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(pi),I(K))},o.\u0275cmp=H({type:o,selectors:[["paramstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([pi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,I6,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function K6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function B6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function $6(r,o){if(r&1&&(p(0,"div",3),T(1,B6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function L6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function W6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function A6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function O6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function z6(r,o){if(r&1&&(p(0,"div",3),T(1,O6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function N6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function R6(r,o){if(r&1&&(p(0,"div",3),T(1,N6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function q6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function j6(r,o){if(r&1&&(p(0,"div",3),T(1,q6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function U6(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function G6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function Y6(r,o){if(r&1&&(p(0,"div",3),T(1,G6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function H6(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,K6,1,5,"input",2)(4,$6,3,0,"div",3)(5,L6,1,5,"input",2)(6,W6,1,5,"input",2)(7,A6,1,5,"input",2)(8,z6,3,0,"div",3)(9,R6,3,0,"div",3)(10,j6,3,0,"div",3)(11,U6,1,4,"textarea",4)(12,Y6,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ms=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(di),I(K))},o.\u0275cmp=H({type:o,selectors:[["returnstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([di,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,H6,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function X6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function Z6(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function J6(r,o){if(r&1&&(p(0,"div",3),T(1,Z6,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function Q6(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function e9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function t9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function i9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function n9(r,o){if(r&1&&(p(0,"div",3),T(1,i9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function r9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function a9(r,o){if(r&1&&(p(0,"div",3),T(1,r9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function o9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function s9(r,o){if(r&1&&(p(0,"div",3),T(1,o9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function l9(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function c9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function p9(r,o){if(r&1&&(p(0,"div",3),T(1,c9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function d9(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,X6,1,5,"input",2)(4,J6,3,0,"div",3)(5,Q6,1,5,"input",2)(6,e9,1,5,"input",2)(7,t9,1,5,"input",2)(8,n9,3,0,"div",3)(9,a9,3,0,"div",3)(10,s9,3,0,"div",3)(11,l9,1,4,"textarea",4)(12,p9,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ds=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(ui),I(K))},o.\u0275cmp=H({type:o,selectors:[["branchstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([ui,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,d9,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function u9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function m9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function _9(r,o){if(r&1&&(p(0,"div",3),T(1,m9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function h9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function f9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function y9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function v9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function x9(r,o){if(r&1&&(p(0,"div",3),T(1,v9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function g9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function C9(r,o){if(r&1&&(p(0,"div",3),T(1,g9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function w9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function S9(r,o){if(r&1&&(p(0,"div",3),T(1,w9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function k9(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function T9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function E9(r,o){if(r&1&&(p(0,"div",3),T(1,T9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function b9(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,u9,1,5,"input",2)(4,_9,3,0,"div",3)(5,h9,1,5,"input",2)(6,f9,1,5,"input",2)(7,y9,1,5,"input",2)(8,x9,3,0,"div",3)(9,C9,3,0,"div",3)(10,S9,3,0,"div",3)(11,k9,1,4,"textarea",4)(12,E9,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Is=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(mi),I(K))},o.\u0275cmp=H({type:o,selectors:[["historystatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([mi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,b9,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function V9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function P9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function F9(r,o){if(r&1&&(p(0,"div",3),T(1,P9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function M9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function D9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function I9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function K9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function B9(r,o){if(r&1&&(p(0,"div",3),T(1,K9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function $9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function L9(r,o){if(r&1&&(p(0,"div",3),T(1,$9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function W9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function A9(r,o){if(r&1&&(p(0,"div",3),T(1,W9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function O9(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function z9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function N9(r,o){if(r&1&&(p(0,"div",3),T(1,z9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function R9(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,V9,1,5,"input",2)(4,F9,3,0,"div",3)(5,M9,1,5,"input",2)(6,D9,1,5,"input",2)(7,I9,1,5,"input",2)(8,B9,3,0,"div",3)(9,L9,3,0,"div",3)(10,A9,3,0,"div",3)(11,O9,1,4,"textarea",4)(12,N9,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ks=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(_i),I(K))},o.\u0275cmp=H({type:o,selectors:[["eventstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([_i,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,R9,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function q9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function j9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function U9(r,o){if(r&1&&(p(0,"div",3),T(1,j9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function G9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function Y9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function H9(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function X9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function Z9(r,o){if(r&1&&(p(0,"div",3),T(1,X9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function J9(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function Q9(r,o){if(r&1&&(p(0,"div",3),T(1,J9,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function eW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function tW(r,o){if(r&1&&(p(0,"div",3),T(1,eW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function iW(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function nW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function rW(r,o){if(r&1&&(p(0,"div",3),T(1,nW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function aW(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,q9,1,5,"input",2)(4,U9,3,0,"div",3)(5,G9,1,5,"input",2)(6,Y9,1,5,"input",2)(7,H9,1,5,"input",2)(8,Z9,3,0,"div",3)(9,Q9,3,0,"div",3)(10,tW,3,0,"div",3)(11,iW,1,4,"textarea",4)(12,rW,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Bs=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(hi),I(K))},o.\u0275cmp=H({type:o,selectors:[["dispatchstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([hi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,aW,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function oW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function sW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function lW(r,o){if(r&1&&(p(0,"div",3),T(1,sW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function cW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function pW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function dW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function uW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function mW(r,o){if(r&1&&(p(0,"div",3),T(1,uW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function _W(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function hW(r,o){if(r&1&&(p(0,"div",3),T(1,_W,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function fW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function yW(r,o){if(r&1&&(p(0,"div",3),T(1,fW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function vW(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function xW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function gW(r,o){if(r&1&&(p(0,"div",3),T(1,xW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function CW(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,oW,1,5,"input",2)(4,lW,3,0,"div",3)(5,cW,1,5,"input",2)(6,pW,1,5,"input",2)(7,dW,1,5,"input",2)(8,mW,3,0,"div",3)(9,hW,3,0,"div",3)(10,yW,3,0,"div",3)(11,vW,1,4,"textarea",4)(12,gW,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var $s=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(fi),I(K))},o.\u0275cmp=H({type:o,selectors:[["actionstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([fi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,CW,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function wW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function SW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function kW(r,o){if(r&1&&(p(0,"div",3),T(1,SW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function TW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function EW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function bW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function VW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function PW(r,o){if(r&1&&(p(0,"div",3),T(1,VW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function FW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function MW(r,o){if(r&1&&(p(0,"div",3),T(1,FW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function DW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function IW(r,o){if(r&1&&(p(0,"div",3),T(1,DW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function KW(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function BW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function $W(r,o){if(r&1&&(p(0,"div",3),T(1,BW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function LW(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,wW,1,5,"input",2)(4,kW,3,0,"div",3)(5,TW,1,5,"input",2)(6,EW,1,5,"input",2)(7,bW,1,5,"input",2)(8,PW,3,0,"div",3)(9,MW,3,0,"div",3)(10,IW,3,0,"div",3)(11,KW,1,4,"textarea",4)(12,$W,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ls=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(yi),I(K))},o.\u0275cmp=H({type:o,selectors:[["awaitstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([yi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,LW,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function WW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function AW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function OW(r,o){if(r&1&&(p(0,"div",3),T(1,AW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function zW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function NW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function RW(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function qW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function jW(r,o){if(r&1&&(p(0,"div",3),T(1,qW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function UW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function GW(r,o){if(r&1&&(p(0,"div",3),T(1,UW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function YW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function HW(r,o){if(r&1&&(p(0,"div",3),T(1,YW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function XW(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function ZW(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function JW(r,o){if(r&1&&(p(0,"div",3),T(1,ZW,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function QW(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,WW,1,5,"input",2)(4,OW,3,0,"div",3)(5,zW,1,5,"input",2)(6,NW,1,5,"input",2)(7,RW,1,5,"input",2)(8,jW,3,0,"div",3)(9,GW,3,0,"div",3)(10,HW,3,0,"div",3)(11,XW,1,4,"textarea",4)(12,JW,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Ws=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(vi),I(K))},o.\u0275cmp=H({type:o,selectors:[["endstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([vi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,QW,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function eA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function tA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function iA(r,o){if(r&1&&(p(0,"div",3),T(1,tA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function nA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function rA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function aA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function oA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function sA(r,o){if(r&1&&(p(0,"div",3),T(1,oA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function lA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function cA(r,o){if(r&1&&(p(0,"div",3),T(1,lA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function pA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function dA(r,o){if(r&1&&(p(0,"div",3),T(1,pA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function uA(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function mA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function _A(r,o){if(r&1&&(p(0,"div",3),T(1,mA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function hA(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,eA,1,5,"input",2)(4,iA,3,0,"div",3)(5,nA,1,5,"input",2)(6,rA,1,5,"input",2)(7,aA,1,5,"input",2)(8,sA,3,0,"div",3)(9,cA,3,0,"div",3)(10,dA,3,0,"div",3)(11,uA,1,4,"textarea",4)(12,_A,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var As=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(xi),I(K))},o.\u0275cmp=H({type:o,selectors:[["linkstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([xi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,hA,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function fA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function yA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function vA(r,o){if(r&1&&(p(0,"div",3),T(1,yA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function xA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","text"),F("ngModel",e.value),w("placeholder",e.label)}}function gA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","checkbox"),F("ngModel",e.value),w("placeholder",e.label)}}function CA(r,o){if(r&1){let e=g();p(0,"input",5),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1)("type","number"),F("ngModel",e.value),w("placeholder",e.label)}}function wA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function SA(r,o){if(r&1&&(p(0,"div",3),T(1,wA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function kA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function TA(r,o){if(r&1&&(p(0,"div",3),T(1,kA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function EA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit,i=s();S("active",i.hasValue(i.data,t,e)),m(),V(" ",e.key," ")}}function bA(r,o){if(r&1&&(p(0,"div",3),T(1,EA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function VA(r,o){if(r&1){let e=g();p(0,"textarea",8),D("ngModelChange",function(i){_(e);let n=s().$implicit;return M(n.value,i)||(n.value=i),h(i)}),d()}if(r&2){let e=s().$implicit;w("id",e.value)("spellcheck",!1),F("ngModel",e.value),w("placeholder",e.label)}}function PA(r,o){if(r&1){let e=g();p(0,"div",7),v("click",function(){let i=_(e).$implicit,n=s(2).$implicit,a=s();return h(a.updateValue(a.data,n,i))}),x(1),d()}if(r&2){let e=o.$implicit,t=s(2).$implicit;S("active",t.value===e.value),m(),V(" ",e.key," ")}}function FA(r,o){if(r&1&&(p(0,"div",3),T(1,PA,2,3,"div",6,b),d()),r&2){let e=s().$implicit;m(),E(e.options)}}function MA(r,o){if(r&1&&(p(0,"fieldset",1)(1,"legend"),x(2),d(),O(3,fA,1,5,"input",2)(4,vA,3,0,"div",3)(5,xA,1,5,"input",2)(6,gA,1,5,"input",2)(7,CA,1,5,"input",2)(8,SA,3,0,"div",3)(9,TA,3,0,"div",3)(10,bA,3,0,"div",3)(11,VA,1,4,"textarea",4)(12,FA,3,0,"div",3),d()),r&2){let e=o.$implicit;m(2),q(e.label),m(),N(e.type==="StringType"?3:e.type==="StringEnum"?4:e.type==="UniqueKey"||e.type==="GuidKeyType"||e.type==="NumericKeyType"?5:e.type==="BooleanType"?6:e.type==="IntegerType"||e.type==="DoubleType"?7:e.type==="ParentKey"?8:e.type==="Keys"?9:e.type==="NextKey"?10:e.type==="SourceCode"?11:e.type==="ObjectTypes"||e.type==="ObjectType"?12:-1)}}var Os=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data&&this.initialize()}get root(){return this._root}set root(t){this._root=t,this.initialize()}constructor(t,i,n){this.store=t,this.service=i,this.qcs=n,this.w=L.required(),this.h=L.required(),this._data=new U,this.dataEdited=new Q,this.current=new $({key:"test",value:"",label:"test",description:"test",required:!1,order:0,type:"StringType"}),this.elements=R([]),this.initialize()}hasValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":return u.value===l;case"ParentKey":return u.value===l;case"Keys":let f=u.value?.split(",");if(f){for(let C of f)if(C===l)return!0}return!1;default:if(u.type===""||u.type===void 0)return u.value===l;alert(a+" B "+u.type)}}return!1}updateValue(t,i,n){if(t!=null){let a=i.key,c=t.keyValue(),l=n.value;if(!l)return;for(let u of c)if(u.key===a)switch(u.type){case"StringEnum":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"ParentKey":i.value=l,t.updateKevValue([{key:a,value:l}]);break;case"Keys":if(i.value===void 0||i.value===null||i.value.trim()===""){i.value=l,t.updateKevValue([{key:a,value:l+","}]),alert(`was empty ${i.value}`);return}let f=i.value.split(",").map(y=>y.trim()).filter(y=>y!==""),C=!1;for(let y of f)if(y===l){C=!0;break}if(C){let y=f.indexOf(l);f.splice(y,1)}else f.push(l);i.value=f.join(","),t.updateKevValue([{key:a,value:i.value}]);break;default:alert(a+" A "+u.type)}}}initialize(){return W(this,null,function*(){this.elements.set([]);for(let t of this.elements())t.options=[];this.root!=null&&this.service.initialize(this.root),this.elements.set(this.service.toElements(this._data));for(let t of this.elements())if(t.value==="")break;this.elements().length>0&&(this.current=this.elements()[0])})}moveNext(){let t=this.elements().indexOf(this.current);t<this.elements().length-1&&(this.current=this.elements()[t+1])}onSubmit(){return W(this,null,function*(){let t=this.service.update();this.dataEdited.emit(t)})}setElement(t){this.current=t}};o.\u0275fac=function(i){return new(i||o)(I(te),I(gi),I(K))},o.\u0275cmp=H({type:o,selectors:[["pairstatement-picker"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root",parent:"parent"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[ie([gi,K]),X],decls:3,vars:6,consts:[[1,"pickers","form"],[1,"padded"],[3,"id","spellcheck","type","ngModel","placeholder"],[1,"chips"],[3,"id","spellcheck","ngModel","placeholder"],[3,"ngModelChange","id","spellcheck","type","ngModel","placeholder"],[1,"chip",3,"active"],[1,"chip",3,"click"],[3,"ngModelChange","id","spellcheck","ngModel","placeholder"]],template:function(i,n){i&1&&(p(0,"div",0),T(1,MA,13,2,"fieldset",1,b),d()),i&2&&(j("max-height",n.h(),"px")("max-width",n.w(),"px")("overflow","auto"),m(),E(n.elements()))},dependencies:[J,ne,le,ce,ee,pe]});let r=o;return r})();function DA(r,o){if(r&1){let e=g();p(0,"planstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function IA(r,o){if(r&1){let e=g();p(0,"agentstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function KA(r,o){if(r&1){let e=g();p(0,"declarestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function BA(r,o){if(r&1){let e=g();p(0,"assignstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function $A(r,o){if(r&1){let e=g();p(0,"ifstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function LA(r,o){if(r&1){let e=g();p(0,"thenstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function WA(r,o){if(r&1){let e=g();p(0,"elseifstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function AA(r,o){if(r&1){let e=g();p(0,"elsestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function OA(r,o){if(r&1){let e=g();p(0,"instatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function zA(r,o){if(r&1){let e=g();p(0,"pickstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function NA(r,o){if(r&1){let e=g();p(0,"substatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function RA(r,o){if(r&1){let e=g();p(0,"childstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function qA(r,o){if(r&1){let e=g();p(0,"infantstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function jA(r,o){if(r&1){let e=g();p(0,"outstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function UA(r,o){if(r&1){let e=g();p(0,"remstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function GA(r,o){if(r&1){let e=g();p(0,"switchstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function YA(r,o){if(r&1){let e=g();p(0,"casestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function HA(r,o){if(r&1){let e=g();p(0,"defaultstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function XA(r,o){if(r&1){let e=g();p(0,"forstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function ZA(r,o){if(r&1){let e=g();p(0,"foreachstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function JA(r,o){if(r&1){let e=g();p(0,"whilestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function QA(r,o){if(r&1){let e=g();p(0,"dostatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function eO(r,o){if(r&1){let e=g();p(0,"callstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function tO(r,o){if(r&1){let e=g();p(0,"promptstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function iO(r,o){if(r&1){let e=g();p(0,"linestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function nO(r,o){if(r&1){let e=g();p(0,"invokestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function rO(r,o){if(r&1){let e=g();p(0,"projectstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function aO(r,o){if(r&1){let e=g();p(0,"schemastatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function oO(r,o){if(r&1){let e=g();p(0,"tablestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function sO(r,o){if(r&1){let e=g();p(0,"columnstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function lO(r,o){if(r&1){let e=g();p(0,"enumstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function cO(r,o){if(r&1){let e=g();p(0,"valuestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function pO(r,o){if(r&1){let e=g();p(0,"seedstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function dO(r,o){if(r&1){let e=g();p(0,"recordstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function uO(r,o){if(r&1){let e=g();p(0,"fieldstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function mO(r,o){if(r&1){let e=g();p(0,"apistatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function _O(r,o){if(r&1){let e=g();p(0,"routestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function hO(r,o){if(r&1){let e=g();p(0,"designstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function fO(r,o){if(r&1){let e=g();p(0,"pagestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function yO(r,o){if(r&1){let e=g();p(0,"codestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function vO(r,o){if(r&1){let e=g();p(0,"folderstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function xO(r,o){if(r&1){let e=g();p(0,"filestatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function gO(r,o){if(r&1){let e=g();p(0,"paramstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function CO(r,o){if(r&1){let e=g();p(0,"returnstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function wO(r,o){if(r&1){let e=g();p(0,"branchstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function SO(r,o){if(r&1){let e=g();p(0,"historystatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function kO(r,o){if(r&1){let e=g();p(0,"eventstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function TO(r,o){if(r&1){let e=g();p(0,"dispatchstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function EO(r,o){if(r&1){let e=g();p(0,"actionstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function bO(r,o){if(r&1){let e=g();p(0,"awaitstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function VO(r,o){if(r&1){let e=g();p(0,"endstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function PO(r,o){if(r&1){let e=g();p(0,"linkstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}function FO(r,o){if(r&1){let e=g();p(0,"pairstatement-picker",1),v("dataEdited",function(i){_(e);let n=s();return h(n.dataEdited.emit(i))}),d()}if(r&2){let e=s();w("data",e.editing)("root",e.root)("w",e.w())("h",e.h())}}var P9e=(()=>{let o=class o{get data(){return this._data}set data(t){this._data=t,this._data?this.editing=this._data:this._data={}}constructor(t){this.store=t,this.w=L.required(),this.h=L.required(),this.dataEdited=new Q,this.editing={},this._data={}}ngOnInit(){}loadAssets(){return W(this,null,function*(){})}onInputChange(){this.dataEdited.emit(this.data)}};o.\u0275fac=function(i){return new(i||o)(I(te))},o.\u0275cmp=H({type:o,selectors:[["pickers"]],inputs:{w:[1,"w"],h:[1,"h"],data:"data",root:"root"},outputs:{dataEdited:"dataEdited"},standalone:!0,features:[X],decls:53,vars:1,consts:[[3,"data","root","w","h"],[3,"dataEdited","data","root","w","h"]],template:function(i,n){i&1&&O(0,DA,1,4,"planstatement-picker",0)(1,IA,1,4,"agentstatement-picker",0)(2,KA,1,4,"declarestatement-picker",0)(3,BA,1,4,"assignstatement-picker",0)(4,$A,1,4,"ifstatement-picker",0)(5,LA,1,4,"thenstatement-picker",0)(6,WA,1,4,"elseifstatement-picker",0)(7,AA,1,4,"elsestatement-picker",0)(8,OA,1,4,"instatement-picker",0)(9,zA,1,4,"pickstatement-picker",0)(10,NA,1,4,"substatement-picker",0)(11,RA,1,4,"childstatement-picker",0)(12,qA,1,4,"infantstatement-picker",0)(13,jA,1,4,"outstatement-picker",0)(14,UA,1,4,"remstatement-picker",0)(15,GA,1,4,"switchstatement-picker",0)(16,YA,1,4,"casestatement-picker",0)(17,HA,1,4,"defaultstatement-picker",0)(18,XA,1,4,"forstatement-picker",0)(19,ZA,1,4,"foreachstatement-picker",0)(20,JA,1,4,"whilestatement-picker",0)(21,QA,1,4,"dostatement-picker",0)(22,eO,1,4,"callstatement-picker",0)(23,tO,1,4,"promptstatement-picker",0)(24,iO,1,4,"linestatement-picker",0)(25,nO,1,4,"invokestatement-picker",0)(26,rO,1,4,"projectstatement-picker",0)(27,aO,1,4,"schemastatement-picker",0)(28,oO,1,4,"tablestatement-picker",0)(29,sO,1,4,"columnstatement-picker",0)(30,lO,1,4,"enumstatement-picker",0)(31,cO,1,4,"valuestatement-picker",0)(32,pO,1,4,"seedstatement-picker",0)(33,dO,1,4,"recordstatement-picker",0)(34,uO,1,4,"fieldstatement-picker",0)(35,mO,1,4,"apistatement-picker",0)(36,_O,1,4,"routestatement-picker",0)(37,hO,1,4,"designstatement-picker",0)(38,fO,1,4,"pagestatement-picker",0)(39,yO,1,4,"codestatement-picker",0)(40,vO,1,4,"folderstatement-picker",0)(41,xO,1,4,"filestatement-picker",0)(42,gO,1,4,"paramstatement-picker",0)(43,CO,1,4,"returnstatement-picker",0)(44,wO,1,4,"branchstatement-picker",0)(45,SO,1,4,"historystatement-picker",0)(46,kO,1,4,"eventstatement-picker",0)(47,TO,1,4,"dispatchstatement-picker",0)(48,EO,1,4,"actionstatement-picker",0)(49,bO,1,4,"awaitstatement-picker",0)(50,VO,1,4,"endstatement-picker",0)(51,PO,1,4,"linkstatement-picker",0)(52,FO,1,4,"pairstatement-picker",0),i&2&&N(n.editing.builderType==="PlanStatement"?0:n.editing.builderType==="AgentStatement"?1:n.editing.builderType==="DeclareStatement"?2:n.editing.builderType==="AssignStatement"?3:n.editing.builderType==="IfStatement"?4:n.editing.builderType==="ThenStatement"?5:n.editing.builderType==="ElseIfStatement"?6:n.editing.builderType==="ElseStatement"?7:n.editing.builderType==="InStatement"?8:n.editing.builderType==="PickStatement"?9:n.editing.builderType==="SubStatement"?10:n.editing.builderType==="ChildStatement"?11:n.editing.builderType==="InfantStatement"?12:n.editing.builderType==="OutStatement"?13:n.editing.builderType==="RemStatement"?14:n.editing.builderType==="SwitchStatement"?15:n.editing.builderType==="CaseStatement"?16:n.editing.builderType==="DefaultStatement"?17:n.editing.builderType==="ForStatement"?18:n.editing.builderType==="ForEachStatement"?19:n.editing.builderType==="WhileStatement"?20:n.editing.builderType==="DoStatement"?21:n.editing.builderType==="CallStatement"?22:n.editing.builderType==="PromptStatement"?23:n.editing.builderType==="LineStatement"?24:n.editing.builderType==="InvokeStatement"?25:n.editing.builderType==="ProjectStatement"?26:n.editing.builderType==="SchemaStatement"?27:n.editing.builderType==="TableStatement"?28:n.editing.builderType==="ColumnStatement"?29:n.editing.builderType==="EnumStatement"?30:n.editing.builderType==="ValueStatement"?31:n.editing.builderType==="SeedStatement"?32:n.editing.builderType==="RecordStatement"?33:n.editing.builderType==="FieldStatement"?34:n.editing.builderType==="ApiStatement"?35:n.editing.builderType==="RouteStatement"?36:n.editing.builderType==="DesignStatement"?37:n.editing.builderType==="PageStatement"?38:n.editing.builderType==="CodeStatement"?39:n.editing.builderType==="FolderStatement"?40:n.editing.builderType==="FileStatement"?41:n.editing.builderType==="ParamStatement"?42:n.editing.builderType==="ReturnStatement"?43:n.editing.builderType==="BranchStatement"?44:n.editing.builderType==="HistoryStatement"?45:n.editing.builderType==="EventStatement"?46:n.editing.builderType==="DispatchStatement"?47:n.editing.builderType==="ActionStatement"?48:n.editing.builderType==="AwaitStatement"?49:n.editing.builderType==="EndStatement"?50:n.editing.builderType==="LinkStatement"?51:n.editing.builderType==="PairStatement"?52:-1)},dependencies:[J,ee,No,Ro,qo,jo,Uo,Go,Yo,Ho,Xo,Zo,Jo,Qo,es,ts,is,ns,rs,as,os,ss,ls,cs,ps,ds,us,ms,_s,hs,fs,ys,vs,xs,gs,Cs,ws,Ss,ks,Ts,Es,bs,Vs,Ps,Fs,Ms,Ds,Is,Ks,Bs,$s,Ls,Ws,As,Os]});let r=o;return r})();var Ni=class{constructor(o,e){this.role="",this.content="",this.role=o,this.content=e}};var Sr=function(r){return r.NotSet="NotSet",r.OpenAI="OpenAI",r.Gemini="Gemini",r.Claude="Claude",r.Groq="Groq",r.Local="Local",r}(Sr||{});var on=class{constructor(){this.isRunning=!1,this.userInput="",this.functCounter=0,this.isWaiting=!1,this.history=new Array,this.functions=new Array}beginFunction(o){return W(this,null,function*(){this.root=o,this.functions.push(o),this.currentFunct=o,this.firstFunct=o,this.lastFunct=o,this.isRunning=!0,yield this.handleAst(o)})}beginPlan(o){return W(this,null,function*(){this.root=o;for(let e of o.getChildren())e instanceof Ke&&this.functions.push(e);if(this.functions.length===0){alert("No Agents found in the Plan");return}this.currentFunct=this.functions[0],this.firstFunct=this.functions[0],this.functions.length>1&&(this.lastFunct=this.functions[this.functions.length-1]),this.isRunning=!0,yield this.handleAst(o),this.isRunning=!1,this.close()})}handleAst(o){return W(this,null,function*(){if(!this.isRunning){alert("Interpreter is not running");return}if(this.history.push(o),o instanceof Ke&&(this.currentFunct=o),this.currentAst=o,o instanceof He)yield this.handlePlan(o);else if(o instanceof Ke)yield this.handleFunction();else if(o instanceof De)yield this.handleDeclare(o);else if(!(o instanceof it))if(o instanceof oe)for(let e of o.getChildren())yield this.handleAst(e);else o instanceof Ti?yield this.handleAssign(o):o instanceof Ye?yield this.handleThen(o):o instanceof vt?yield this.handleCall(o):o instanceof Ei?yield this.handleInput(o):o instanceof Pi?yield this.handleOutput(o):o instanceof nt?yield this.handleReturn(o):o instanceof st?yield this.handleIf(o):o instanceof Ge?yield this.handleElse(o):o instanceof Ue?yield this.handleElseIf(o):o instanceof lt?yield this.handleSwitch(o):o instanceof Qe?yield this.handleCase(o):o instanceof je?yield this.handleDefault(o):o instanceof Ci?yield this.handleWhile(o):o instanceof wi?yield this.handleFor(o):o instanceof Si?yield this.handleForEach(o):o instanceof ki?yield this.handleDo(o):o instanceof Je||o instanceof ze||(o instanceof Xe?yield this.handlePrompt(o):o instanceof xt?yield this.handleINVOKE(o):o instanceof Ct?yield this.HandleDispatch(o):o instanceof Fi||alert(`Unsupported token type: ${o.builderType}`))})}handlePlan(o){return W(this,null,function*(){for(let e of o.getChildren())e instanceof Ke&&e.key==="Main"&&(yield this.handleAst(e))})}handleFunction(){return W(this,null,function*(){let o=this.currentFunct;if(o){this.functCounter++;for(let e of o.getChildren())yield this.handleAst(e)}})}handleDeclare(o){return W(this,null,function*(){let e=this.currentFunct;if(!e)throw new Error("You are calling Declare outside of a Function");e.variables.set(o.key,o.expression)})}handleAssign(o){return W(this,null,function*(){let e=this.currentFunct;if(!e)throw new Error("You are calling Assign outside of a Function");let t="";if(o.expression.startsWith("#")){let a=o.expression.replace("#","");if(e.props.has(a)){for(let c of e.props)if(c[0]===a)if(c[1].expression.includes("#")){let l=c[1].expression.replace("#",""),u=this.getDeclareFromKey(l);u?t=u.expression:console.log(`FAILED Assign: ${a} = ${t}`)}else t=c[1].expression}else{let c=this.getDeclareFromKey(a);c&&(t=c.expression)}}else t=o.expression;let i=o.key,n=this.getDeclareFromKey(i);if(n){if(t.includes("#")){let a=new Array;alert(" this needs to be fixed")}n.expression=t}else console.log(`FAILED Assign: ${i} = ${t}`)})}handleReturn(o){return W(this,null,function*(){let e=this.currentFunct;if(!e)throw new Error("You are calling Assign outside of a Function");if(!this.history[this.history.length-1])throw new Error(" there has to be a previous CallStatement that called the current AgentStatement , otherwise there is no point in returning a value");if(!this.history[this.history.length-1])throw new Error(" there has to be a previous AgentStatement that called the current AgentStatement , otherwise there is no point in returning a value");let n=o.expression,a=n,c=n.split("#");for(let l of c){let u=this.getDeclareFromKey(l);u&&(a=a.replace("#"+u.key+"#",u.expression))}e.returnValue=a})}handleCall(o){return W(this,null,function*(){let e=this.currentFunct;if(!e)throw new Error("You are calling Call outside of a Function");let t=o.toKey;if(!t)throw new Error("Call Expression is null");let i=this.getFunction(t);if(!i)throw new Error(`Function ${t} not found`);if(i===e)throw new Error("You cannot call yourself");if(o.parameters){let n=new Array;this.getDeclares(o.parameters,n);for(let a of n)alert(" this needs to be fixed , because AgentStatement needs Parameters, which can be initialized From Here")}if(yield this.handleAst(i),i.returnValue){let n=o.key,a=this.getDeclareFromKey(n);a?a.expression=i.returnValue:console.log(`FAILED Call: ${n} = ${i.returnValue}`)}})}handleForEach(o){return W(this,null,function*(){})}handleFor(o){return W(this,null,function*(){let e=this.currentFunct;if(!e)throw new Error("You are calling For outside of a Function");let t=parseInt(o.start),i=o.expression.split(" "),n=i[0],a=i[1],c=parseInt(i[2]),l=o.increment;for(let u=t;u<c;u+=l){e.variables.set(n,u.toString());for(let f of o.getChildren())yield this.handleAst(f)}})}handleWhile(o){return W(this,null,function*(){for(;this.evaluate(o);)for(let e of o.getChildren())yield this.handleAst(e)})}handleDo(o){return W(this,null,function*(){do for(let e of o.getChildren())yield this.handleAst(e);while(this.evaluate(o))})}handleElseIf(o){return W(this,null,function*(){if(this.evaluate(o))for(let e of o.getChildren())yield this.handleAst(e)})}handleElse(o){return W(this,null,function*(){for(let e of o.getChildren())yield this.handleAst(e)})}handleIf(o){return W(this,null,function*(){let e=!1;if(this.evaluate(o))e=!0,yield this.handleAst(o.then);else if(o.elseIfs.length>0){for(let t of o.elseIfs)if(this.evaluate(t)){e=!0,alert("yep elseif"),yield this.handleAst(t);break}}!e&&o.elses&&(yield this.handleAst(o.elses))})}handleThen(o){return W(this,null,function*(){for(let e of o.getChildren())yield this.handleAst(e)})}handleDefault(o){return W(this,null,function*(){for(let e of o.getChildren())yield this.handleAst(e)})}handleSwitch(o){return W(this,null,function*(){if(o.cases.length>0){for(let e of o.cases)if(this.evaluate(e)){yield this.handleAst(e);break}}else o.defaults&&(yield this.handleAst(o.defaults))})}handleCase(o){return W(this,null,function*(){if(this.evaluate(o))for(let e of o.getChildren())yield this.handleAst(e)})}handleInput(o){return W(this,null,function*(){this.input=o,this.isWaiting=!0;let e=o.key,t=this.getDeclareFromKey(e);for(t&&t.expression!==""&&(this.userInput=t.expression);this.isWaiting;)yield new Promise(i=>setTimeout(i,2e3));this.userInput=""})}submitInput(){return W(this,null,function*(){if(this.input&&this.userInput&&this.currentFunct&&this.userInput!==""){let o=this.getDeclareFromKey(this.input.key);o?(o.expression=this.userInput,this.currentFunct.variables.set(o.key,o.expression)):alert(`FAILED Input: ${this.input.key} = ${this.userInput}`),this.printVariables(),this.isWaiting=!1,this.input=void 0}})}handlePrompt(o){return W(this,null,function*(){})}HandleDispatch(o){return W(this,null,function*(){let e=o.fromKey;if(!this.getDeclareFromKey(e))throw new Error(`Declare not found for key ${e}`);let i=o.toKey,n=this.currentFunct?.flatten();if(!n)throw new Error("No flatt found");let a=n.find(c=>c.getValue("Key")===i);if(!a)throw new Error(`Declare not found for key ${i}`);if(a instanceof Je){let c=a,l=o.getChildren();for(let u of l){let f=We.clone(u);if(f){let C=new Array;if(this.getDeclares(f.declares,C),C.length>0){let y=new Map;for(let k of C)y.set(k.key,k.expression);let B=this.processExpression(f.expression,y);f.expression=B,c.addChild(f)}}}}})}handleINVOKE(o){return W(this,null,function*(){for(this.isWaiting=!0,this.invoke=o;this.isWaiting&&this.invoke;)this.callInvoke(),yield new Promise(e=>setTimeout(e,2e3));console.log(`INVOKE Response: ${this.userInput}`),this.invoke=void 0})}getHistoryFromKey(o){let e=this.currentFunct;if(e){let i=e.flatten().find(n=>n instanceof Je&&n.key===o);if(i)return i}}getPromptFromKey(o){let e=this.currentFunct;if(e){let i=e.flatten().find(n=>n instanceof Xe&&n.key===o);if(i)return i}}callInvoke(){return W(this,null,function*(){let o=this.invoke,e=o.histories,t=o.prompts,i=new Array;if(e.length>0)for(let n of e){let a=this.getHistoryFromKey(n);if(a)for(let c of a.lines){let l=new Ni(c.role,c.expression);i.push(l)}else throw new Error(`History not found for key ${n}`)}if(t)for(let n of t){let a=this.getPromptFromKey(n);if(a){for(let c of a.getChildren())if(c instanceof ze){let l=c,u=new Array;if(l.declares.length>0)if(this.getDeclares(l.declares,u),u.length>0){let f=new Map;for(let B of u)f.set(B.key,B.expression);let C=this.processExpression(l.expression,f),y=new Ni(l.role,C);i.push(y)}else{let f=new Ni(l.role,l.expression);i.push(f)}else{let f=new Ni(l.role,l.expression);i.push(f)}}}}if(o.botType===Sr.Local){let n=yield this.chat(o.endPoint,o.modelName,i);this.isWaiting=!1;let a=this.getDeclareFromKey(o.key);a?a.expression=n.content:alert(`FAILED Invoke: ${o.key} = ${n}`)}})}chat(o,e,t){return W(this,null,function*(){let a=(yield fetch("http://localhost:11434/api/chat",{method:"POST",body:JSON.stringify({model:e,messages:t})})).body?.getReader();if(!a)throw new Error("Failed to read response body");let c="";for(;;){let{done:l,value:u}=yield a.read();if(l)break;let f=new TextDecoder().decode(u),C=JSON.parse(f);C.done===!1&&(console.log(C.message.content),c+=C.message.content)}return{role:"assistant",content:c}})}handleOutput(o){return W(this,null,function*(){})}evaluate(o){if(o instanceof st){let e=o,t=this.getDeclareFromKey(e.key);if(!t)throw new Error(`Declare not found for key ${e.key}`);return this.evaluateExpression(t.key,t.expression,t.type,e.expression)}else if(o instanceof Ue){let e=o,t=e.parent,i=this.getDeclareFromKey(t.key);if(!i)throw new Error(`Declare not found for key ${t.key}`);return this.evaluateExpression(i.key,i.expression,i.type,e.expression)}else if(o instanceof Ci){let e=o,t=this.getDeclareFromKey(e.key);if(!t)throw new Error(`Declare not found for key ${e.key}`);return this.evaluateExpression(t.key,t.expression,t.type,e.expression)}else o instanceof wi||o instanceof Si||o instanceof ki||o instanceof lt;return!1}processExpression(o,e){let t=o;if(t.includes("#"))for(let[i,n]of e){let a=new RegExp(`#${i}#`,"g");t=t.replace(a,n)}return t}evaluateExpression(o,e,t,i){let n=["==","!=",">","<",">=","<="],a="";for(let c of n)if(i.includes(c)){a=c;break}if(a==="")throw new Error("No Operator found in the expression");switch(t){case"STRING":if(i=i.replace(a,"").trim(),a==="==")return e===i;if(a==="!=")return e!==i;throw new Error("Operator not supported for STRING");break;case"NUM":let c=i.split(a),l=parseInt(c[0]),u=parseInt(c[1]);switch(a){case"==":return l===u;case"!=":return l!==u;case">":return l>u;case"<":return l<u;case">=":return l>=u;case"<=":return l<=u;default:return!1}break;case"BOOL":if(a==="==")return i=i.replace(a,"").trim(),e===i;if(a==="!=")return e!==i;throw new Error("Operator not supported for BOOL");break;default:throw new Error(`Unsupported datatype: ${t}`)}return!1}getFunction(o){if(o!=="")return this.functions.find(e=>e.key===o)}printVariables(){for(let o of this.functions)for(let e of o.variables);}isUserInput(){return!!(this.currentFunct&&(this.currentAst.isIN()||this.currentAst.isPICK()))}getDeclares(o,e){let t=o;for(let i of t){if(i==="")continue;i=i.trim();let n=this.getDeclareFromKey(i);if(n&&n.isDECLARE()){let a=n;e.find(l=>l.key===a.key)||e.push(a)}}}getDeclareFromKey(o){let e=this.currentFunct;if(e){let i=e.flatten().find(n=>n instanceof De&&n.key===o);if(i)return i}else alert("funct  not found")}close(){this.printVariables(),this.isRunning=!1;for(let o of this.functions)o.variables=new Map,o.props=new Map;this.history=new Array,this.userInput="",this.input=void 0,this.invoke=void 0,this.currentFunct=void 0,this.currentAst=void 0,this.functCounter=0,this.isWaiting=!1}};function MO(r,o){if(r&1){let e=g();p(0,"button",13),v("click",function(){_(e);let i=s();return h(i.beginRun())}),p(1,"span",14),x(2,"\u27A4"),d()()}}function DO(r,o){if(r&1){let e=g();p(0,"button",15),v("click",function(){_(e);let i=s();return h(i.closeDialog())}),p(1,"span",14),x(2,"\u25A0"),d()()}}function IO(r,o){r&1&&(ji(0),p(1,"label"),x(2,"waiting...!!"),d(),Ui())}function KO(r,o){r&1&&x(0," ... ")}function BO(r,o){if(r&1&&x(0),r&2){let e=s(2).$implicit,t=s();V(" ",t.getAnswer(e)," ")}}function $O(r,o){if(r&1&&(p(0,"div",17)(1,"div",18)(2,"span"),x(3),d()(),p(4,"div",19),O(5,KO,1,0)(6,BO,1,1),d()()),r&2){let e=s().$implicit,t=s();S("bubble-active",e===t.interpreter.currentAst),m(3),q(t.getQuestion(e)),m(2),N(e===t.interpreter.input?5:6)}}function LO(r,o){if(r&1&&(ji(0),O(1,$O,7,4,"div",16),Ui()),r&2){let e=o.$implicit,t=s();m(),N(t.isAllowed(e)?1:-1)}}function WO(r,o){if(r&1&&(p(0,"label",11),x(1),d()),r&2){let e=s();w("htmlFor",e.interpreter.input.id),m(),V(": ",e.interpreter.input.label,"")}}function AO(r,o){if(r&1){let e=g();p(0,"textarea",20),D("ngModelChange",function(i){_(e);let n=s(2);return M(n.interpreter.userInput,i)||(n.interpreter.userInput=i),h(i)}),d(),p(1,"button",21),v("click",function(){_(e);let i=s(2);return h(i.interpreter.submitInput())}),p(2,"span",14),x(3,"\u27A4"),d()()}if(r&2){let e=s(2);w("spellcheck",!1)("autocomplete",!1)("placeholder",e.interpreter.input.label),F("ngModel",e.interpreter.userInput),P("id",e.interpreter.input.id)}}function OO(r,o){if(r&1&&(p(0,"label"),x(1),d()),r&2){let e=s(2);m(),V("",e.interpreter.currentAst.tokenType," not implemented")}}function zO(r,o){if(r&1&&O(0,AO,4,5)(1,OO,2,1,"label"),r&2){let e=s();N(e.interpreter.isUserInput()&&e.interpreter.input?0:1)}}var yWe=(()=>{let o=class o{constructor(){this.root=new He,this.interpreter=new on}beginRun(){this.root instanceof Ke?this.interpreter.beginFunction(this.root):this.interpreter.beginPlan(this.root)}closeDialog(){this.interpreter.close()}isAllowed(t){return t.isOUT()?!0:!!t.isIN()}getQuestion(t){return t.isOUT()?t.expression:".."}getAnswer(t){if(t.isOUT()){let i=t,n=new Array;this.interpreter.getDeclares(i.parameters,n);let a=new Map;for(let l of n)a.set(l.key,l.expression);return this.processExpression(i.expression,a)}else if(t.isDECLARE())return t.expression;return".."}processExpression(t,i){let n=t;if(n.includes("#"))for(let[a,c]of i){let l=new RegExp(`#${a}#`,"g");n=n.replace(l,c)}return n}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["runner"]],inputs:{root:"root"},standalone:!0,features:[X],decls:15,vars:7,consts:[[1,"runner"],[1,"runner-header"],[1,"plan"],[1,"run"],[1,"stop"],[1,"runner-middle"],[4,"ngIf"],[1,"chat-bubbles"],[4,"ngFor","ngForOf"],[1,"runner-bottom"],[1,"runner-bottom-top"],[3,"htmlFor"],[1,"runner-bottom-bottom"],[1,"run",3,"click"],[1,"span"],[1,"stop",3,"click"],[1,"runner-bubble",3,"bubble-active"],[1,"runner-bubble"],[1,"question"],[1,"answer"],[1,"textInput",3,"ngModelChange","spellcheck","autocomplete","placeholder","ngModel"],[1,"gobtn",3,"click"]],template:function(i,n){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),x(3),d(),O(4,MO,3,0,"button",3)(5,DO,3,0,"button",4),d(),p(6,"div",5),O(7,IO,3,0,"ng-container",6),p(8,"div",7),O(9,LO,2,1,"ng-container",8),d()(),p(10,"div",9)(11,"div",10),O(12,WO,2,2,"label",11),d(),p(13,"div",12),O(14,zO,2,1),d()()()),i&2&&(m(3),V(" ",n.root.getValue("Key")," "),m(),N(n.interpreter.isRunning?-1:4),m(),N(n.interpreter.isRunning?5:-1),m(2),w("ngIf",n.interpreter.isWaiting&&n.interpreter.isRunning),m(2),w("ngForOf",n.interpreter.history),m(3),N(n.interpreter.isUserInput()&&n.interpreter.input?12:-1),m(2),N(n.interpreter.currentAst&&n.isAllowed(n.interpreter.currentAst)?14:-1))},dependencies:[J,yt,Di,ee,le,ce,pe],styles:['.runner[_ngcontent-%COMP%]{display:grid;grid-template-rows:33px auto max-content;gap:3px;width:100%;height:100%;border-radius:9px;grid-template-areas:"runner-header" "runner-middle" "runner-bottom"}.runner-header[_ngcontent-%COMP%]{grid-area:runner-header;display:grid;grid-template-columns:auto 82px 80px;align-items:center}.runner-middle[_ngcontent-%COMP%]{grid-area:runner-middle;margin-top:5px;padding-top:5px;overflow-y:scroll;overflow-x:hidden}.runner-bottom[_ngcontent-%COMP%]{grid-area:runner-bottom;overflow:hidden;display:grid;grid-template-rows:max-content 120px;row-gap:9px;padding-top:4px}.runner-bottom-bottom[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 25px;align-items:baseline;border-style:ridge;border-width:1px;border-color:var(--secondary-color)}.textInput[_ngcontent-%COMP%]{font-size:17px!important;border:none;outline:none;padding-top:0!important;padding-left:12px!important;border-radius:12px;height:100%;margin:0;resize:none}.selectInput[_ngcontent-%COMP%]{font-size:17px!important;border:none;outline:none;padding-top:0!important;padding-left:22px!important;margin:0!important;resize:none}.gobtn[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;width:25px;height:25px;margin-right:2px;margin-top:2px;background-color:green;text-align:center}.gobtn[_ngcontent-%COMP%]:active{transform:scale(.95)}.gobtn[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.chat-bubbles[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column;overflow:hidden}.runner-bubble[_ngcontent-%COMP%]{padding:2px;display:flex;font-size:12px;margin-bottom:2px;flex-direction:column}.question[_ngcontent-%COMP%]{position:relative;margin-left:11px;border-radius:12px;padding:5px;align-self:flex-start}.question[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-17px;top:1px;border-width:11px;border-style:solid;border-color:transparent var(--accent-color) transparent transparent}.answer[_ngcontent-%COMP%]{align-self:flex-end;color:var(--text-color);margin-right:10px;border-radius:12px;padding:5px;position:relative}.answer[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-17px;top:1px;border-width:11px;border-style:solid;border-color:transparent transparent transparent var(--accent-color)}.runner-bubble[_ngcontent-%COMP%]:active, .bubble-active[_ngcontent-%COMP%]{color:var(--focus-text-color)}.run[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;margin-bottom:6px;background-color:green;text-align:center}.run[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.stop[_ngcontent-%COMP%]{border-radius:50%;width:30px;height:30px;margin-bottom:6px;background-color:red;text-align:center}.stop[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.choice[_ngcontent-%COMP%]{border-radius:12px;border-color:var(--primary-color);border-style:solid;border-width:2px;color:var(--text-color);padding:2px;margin-top:4px}.plan[_ngcontent-%COMP%]{font-size:15px;color:var(--text-color);margin-left:10px}label[_ngcontent-%COMP%]{font-size:13px;margin-left:10px}']});let r=o;return r})();var NO=r=>({paddingLeft:r}),RO=r=>({backgroundColor:r});function qO(r,o){r&1&&(p(0,"span"),x(1,"code"),d())}function jO(r,o){r&1&&(p(0,"span"),x(1,"ad_units"),d())}function UO(r,o){r&1&&(p(0,"span"),x(1,"insights"),d())}function GO(r,o){r&1&&(p(0,"span"),x(1,"tune"),d())}function YO(r,o){r&1&&(p(0,"span"),x(1,"settings_ethernet"),d())}function HO(r,o){r&1&&(p(0,"span"),x(1,"loop"),d())}function XO(r,o){r&1&&(p(0,"span"),x(1,"comment"),d())}function ZO(r,o){r&1&&(p(0,"span"),x(1,"bookmark"),d())}function JO(r,o){r&1&&(p(0,"span"),x(1,"assignment"),d())}function QO(r,o){r&1&&(p(0,"span"),x(1,"equalizer"),d())}function ez(r,o){r&1&&(p(0,"span"),x(1,"keyboard"),d())}function tz(r,o){r&1&&(p(0,"span"),x(1,"output"),d())}function iz(r,o){r&1&&(p(0,"span"),x(1,"subtitles"),d())}function nz(r,o){r&1&&(p(0,"span"),x(1,"keyboard_return"),d())}function rz(r,o){r&1&&(p(0,"span"),x(1,"folder"),d())}function az(r,o){r&1&&(p(0,"span"),x(1,"table_chart"),d())}function oz(r,o){r&1&&(p(0,"span"),x(1,"table_rows"),d())}function sz(r,o){r&1&&(p(0,"span"),x(1,"view_column"),d())}function lz(r,o){r&1&&(p(0,"span"),x(1,"format_list_numbered"),d())}function cz(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function pz(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function dz(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function uz(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function mz(r,o){r&1&&(p(0,"span"),x(1,"api"),d())}function _z(r,o){r&1&&(p(0,"span"),x(1,"router"),d())}function hz(r,o){r&1&&(p(0,"span"),x(1,"web"),d())}function fz(r,o){r&1&&(p(0,"span"),x(1,"code"),d())}function yz(r,o){r&1&&(p(0,"span"),x(1,"folder"),d())}function vz(r,o){r&1&&(p(0,"span"),x(1,"insert_drive_file"),d())}function xz(r,o){r&1&&(p(0,"span"),x(1,"call_split"),d())}function gz(r,o){r&1&&(p(0,"span"),x(1,"history"),d())}function Cz(r,o){r&1&&(p(0,"span"),x(1,"link"),d())}function wz(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function Sz(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function kz(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function Tz(r,o){r&1&&(p(0,"span"),x(1,"hourglass_empty"),d())}function Ez(r,o){r&1&&(p(0,"span"),x(1,"call"),d())}function bz(r,o){r&1&&(p(0,"span"),x(1,"group"),d())}function Vz(r,o){r&1&&(p(0,"span"),x(1,"stop"),d())}function Pz(r,o){r&1&&(p(0,"span"),x(1,"check_circle"),d())}function Fz(r,o){r&1&&(p(0,"span"),x(1,"subdirectory_arrow_right"),d())}function Mz(r,o){r&1&&(p(0,"span"),x(1,"child_care"),d())}function Dz(r,o){r&1&&(p(0,"span"),x(1,"baby_changing_station"),d())}function Iz(r,o){r&1&&(p(0,"span"),x(1,"play_arrow"),d())}function Kz(r,o){r&1&&(p(0,"span"),x(1,"question_answer"),d())}function Bz(r,o){r&1&&(p(0,"span"),x(1,"minimize"),d())}function $z(r,o){r&1&&(p(0,"span",4),x(1,"check_circle"),d())}function Lz(r,o){if(r&1){let e=g();p(0,"div",6)(1,"div",8),v("click",function(){_(e);let i=s();return h(i.increment())}),p(2,"span",4),x(3,"add"),d()(),p(4,"div",8),v("click",function(){_(e);let i=s();return h(i.decrement())}),p(5,"span",4),x(6,"remove"),d()(),p(7,"div",9),x(8),d()()}if(r&2){let e=s();m(8),q(e.howManySelected)}}function Wz(r,o){if(r&1&&Z(0,"next-tree",7),r&2){let e=o.$implicit,t=s(2);w("level",t.level+1)("parent",t.data)("data",e)("selecteds",t.selecteds)}}function Az(r,o){if(r&1&&O(0,Wz,1,4,"next-tree",10),r&2){let e=s();w("ngForOf",e.data.getChildren())}}var zs=(()=>{let o=class o{get data(){return this._data}set data(t){if(this._data=t,this.color=fe.getColor(t),t.tokenType&&(this.keyValue=t.keyValue(),0)){for(let n of t.getChildren())if(a&&a.getChildren().length>0)for(let l of c)var i}}constructor(){this.keyValue=[],this.color="red",this.level=0,this.parent={},this._data={},this.selecteds=[],this.childs=[],this.expandedIcon="remove_circle",this.collapsedIcon="add_circle",this.selected={},this.howManySelected=0}ngOnInit(){}ToggleExpand(){this.data.isExpanded=!this.data.isExpanded}dragStart(t){if(!t||!t.target||!t.dataTransfer)return;t.stopPropagation();let i=t.target,n=i.getAttribute("data-id"),a=i.getAttribute("data-type");t.dataTransfer.setData("text/plain",n),t.dataTransfer.setData("application/fusion-web",a),t.dataTransfer.effectAllowed="move",t.target instanceof HTMLElement&&t.target.classList.add("dragging")}dragOver(t){t.preventDefault(),t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-enter"),t.target.classList.add("drag-over"))}dragEnter(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-over"),t.target.classList.add("drag-enter"))}dragLeave(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-enter"),t.target.classList.add("drag-leave"))}dragEnd(t){t.stopPropagation(),t.target instanceof HTMLElement&&(t.target.classList.remove("drag-over"),t.target.classList.remove("drag-enter"),t.target.classList.remove("drag-leave"),t.target.classList.remove("dragging"))}confirm(){this.selected===this.data?this.selected=void 0:this.selected=this.data}increment(){this.howManySelected++,this.howManySelected>0&&(this.selecteds.includes(this.data)||this.selecteds.push(this.data)),this.data.index=this.howManySelected}decrement(){this.howManySelected>0&&this.howManySelected--,this.howManySelected===0&&(this.selected=void 0),this.selecteds.includes(this.data)&&this.howManySelected===0&&(this.selecteds=this.selecteds.filter(t=>t!==this.data)),this.data.index=this.howManySelected}isFolder(){return!!(this.data&&this.data.tokenType&&this.data.getChildren().length>0)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["next-tree"]],inputs:{level:"level",parent:"parent",data:"data",selecteds:"selecteds"},standalone:!0,features:[X],decls:57,vars:60,consts:[[1,"ast-tree",3,"click","dragstart","dragleave","dragenter","dragover","dragend","draggable","ngStyle"],[1,"itm-sliver",3,"ngStyle"],[1,"small-icon"],[4,"ngIf"],[1,"material-icons"],[1,"confirmer",3,"click"],[1,"row"],[3,"level","parent","data","selecteds"],[1,"image-btn","col",3,"click"],[1,"col","circle"],[3,"level","parent","data","selecteds",4,"ngFor","ngForOf"]],template:function(i,n){i&1&&(p(0,"div",0),v("click",function(){return n.confirm()})("dragstart",function(c){return n.dragStart(c)})("dragleave",function(c){return n.dragLeave(c)})("dragenter",function(c){return n.dragEnter(c)})("dragover",function(c){return n.dragOver(c)})("dragend",function(c){return n.dragEnd(c)}),Z(1,"div",1),p(2,"div")(3,"span",2),O(4,qO,2,0,"span",3)(5,jO,2,0,"span",3)(6,UO,2,0,"span",3)(7,GO,2,0,"span",3)(8,YO,2,0,"span",3)(9,HO,2,0,"span",3)(10,XO,2,0,"span",3)(11,ZO,2,0,"span",3)(12,JO,2,0,"span",3)(13,QO,2,0,"span",3)(14,ez,2,0,"span",3)(15,tz,2,0,"span",3)(16,iz,2,0,"span",3)(17,nz,2,0,"span",3)(18,rz,2,0,"span",3)(19,az,2,0,"span",3)(20,oz,2,0,"span",3)(21,sz,2,0,"span",3)(22,lz,2,0,"span",3)(23,cz,2,0,"span",3)(24,pz,2,0,"span",3)(25,dz,2,0,"span",3)(26,uz,2,0,"span",3)(27,mz,2,0,"span",3)(28,_z,2,0,"span",3)(29,hz,2,0,"span",3)(30,fz,2,0,"span",3)(31,yz,2,0,"span",3)(32,vz,2,0,"span",3)(33,xz,2,0,"span",3)(34,gz,2,0,"span",3)(35,Cz,2,0,"span",3)(36,wz,2,0,"span",3)(37,Sz,2,0,"span",3)(38,kz,2,0,"span",3)(39,Tz,2,0,"span",3)(40,Ez,2,0,"span",3)(41,bz,2,0,"span",3)(42,Vz,2,0,"span",3)(43,Pz,2,0,"span",3)(44,Fz,2,0,"span",3)(45,Mz,2,0,"span",3)(46,Dz,2,0,"span",3)(47,Iz,2,0,"span",3)(48,Kz,2,0,"span",3)(49,Bz,2,0,"span",3),d()(),p(50,"div"),O(51,$z,2,0,"span",4),d(),p(52,"div"),x(53),d(),p(54,"div",5),v("click",function(){return n.confirm()}),O(55,Lz,9,1,"div",6),d()(),O(56,Az,1,1,"next-tree",7)),i&2&&(w("draggable",!0)("ngStyle",Oi(56,NO,n.level*21)),P("id",n.data.id)("data-id",n.data.id)("data-type",n.data.tokenType),m(),w("ngStyle",Oi(58,RO,n.data.shape.fill)),m(3),w("ngIf",n.data.isAGENT()),m(),w("ngIf",n.data.isIF()),m(),w("ngIf",n.data.isELSEIF()),m(),w("ngIf",n.data.isSWITCH()),m(),w("ngIf",n.data.isCASE()),m(),w("ngIf",n.data.isREPEATERS()),m(),w("ngIf",n.data.isREM()),m(),w("ngIf",n.data.isDECLARE()),m(),w("ngIf",n.data.isASSIGN()),m(),w("ngIf",n.data.isCALL()),m(),w("ngIf",n.data.isIN()),m(),w("ngIf",n.data.isOUT()),m(),w("ngIf",n.data.isPARAM()),m(),w("ngIf",n.data.isRETURN()),m(),w("ngIf",n.data.isPROJECT()),m(),w("ngIf",n.data.isSCHEMA()),m(),w("ngIf",n.data.isTABLE()),m(),w("ngIf",n.data.isCOLUMN()),m(),w("ngIf",n.data.isENUM()),m(),w("ngIf",n.data.isVALUE()),m(),w("ngIf",n.data.isSEED()),m(),w("ngIf",n.data.isRECORD()),m(),w("ngIf",n.data.isFIELD()),m(),w("ngIf",n.data.isAPI()),m(),w("ngIf",n.data.isROUTE()),m(),w("ngIf",n.data.isPAGE()),m(),w("ngIf",n.data.isCODE()),m(),w("ngIf",n.data.isFOLDER()),m(),w("ngIf",n.data.isFILE()),m(),w("ngIf",n.data.isBRANCH()),m(),w("ngIf",n.data.isHISTORY()),m(),w("ngIf",n.data.isLINK()),m(),w("ngIf",n.data.isDISPATCH()),m(),w("ngIf",n.data.isACTION()),m(),w("ngIf",n.data.isEVENT()),m(),w("ngIf",n.data.isAWAIT()),m(),w("ngIf",n.data.isCALL()),m(),w("ngIf",n.data.isPAIR()),m(),w("ngIf",n.data.isEND()),m(),w("ngIf",n.data.isPICK()),m(),w("ngIf",n.data.isSUB()),m(),w("ngIf",n.data.isCHILD()),m(),w("ngIf",n.data.isINFANT()),m(),w("ngIf",n.data.isINVOKE()),m(),w("ngIf",n.data.isPROMPT()),m(),w("ngIf",n.data.isLINE()),m(2),N(n.howManySelected>0?51:-1),m(2),V(" ",n.data.tokenType," "),m(2),N(n.selected===n.data||n.howManySelected>0?55:-1),m(),N(n.isFolder()&&n.data.getChildren().length>0?56:-1))},dependencies:[o,J,yt,Di,Li],styles:[".ast-tree[_ngcontent-%COMP%]{display:grid;background-color:transparent;column-gap:2px;grid-template-columns:3px max-content 22px auto 100px}.confirmer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;flex-direction:row;flex-wrap:nowrap}.circle[_ngcontent-%COMP%]{border-radius:50%;font-size:23px;border:1px solid var(--focus-color);color:var(--focus-text-color);text-align:center}"]});let r=o;return r})();var Oz=["circle-svg",""];function zz(r,o){if(r&1&&(G(),p(0,"tspan"),x(1),at(2,"slice"),d()),r&2){let e=s();P("x",e.data.shape.x)("y",e.data.shape.y+e.data.shape.height/2)("font-size",13)("dominant-baseline","middle")("text-anchor","middle"),m(),q(ot(2,6,e.data.from.second(),0,8))}}function Nz(r,o){if(r&1){let e=g();G(),p(0,"g",4),v("currentChanged",function(i){_(e);let n=s();return h(n.currentChanged.emit(i))}),d()}if(r&2){let e=o.$implicit,t=s();w("data",e)("current",t.current)}}var Ns=(()=>{let o=class o{constructor(){this.currentChanged=Ae(),this._data=new U}get data(){return this._data}set data(t){this._data=t,this.handleOnChange()}ngOnChanges(t){this.handleOnChange()}handleOnChange(){}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","circle-svg",""]],inputs:{data:"data",current:"current"},outputs:{currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:Oz,decls:8,vars:15,consts:[[1,"svgcard",3,"pointerdown"],[1,"svgtxt"],[4,"ngIf"],["circle-svg","",3,"data","current"],["circle-svg","",3,"currentChanged","data","current"]],template:function(i,n){i&1&&(G(),p(0,"g")(1,"circle",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data)}),d(),p(2,"text",1)(3,"tspan"),x(4),d(),O(5,zz,3,10,"tspan",2),d(),T(6,Nz,1,2,":svg:g",3,b),d()),i&2&&(m(),S("active",n.data===n.current),P("cx",n.data.shape.x)("cy",n.data.shape.y)("r",n.data.shape.radius)("fill",n.data.shape.fill),m(),P("fill",n.data.shape.stroke)("font-size",15),m(),P("x",n.data.shape.x)("y",n.data.shape.y+n.data.shape.height/2-15)("font-size",15)("dominant-baseline","middle")("text-anchor","middle"),m(),q(n.data.heading),m(),w("ngIf",n.data.from&&n.data.from.second()),m(),E(n.data.groups))},dependencies:[o,J,Di,Ii],encapsulation:2});let r=o;return r})();var Rz=["line-svg",""];function qz(r,o){if(r&1){let e=g();G(),p(0,"g",2),v("currentChanged",function(i){_(e);let n=s();return h(n.currentChanged.emit(i))}),d()}if(r&2){let e=o.$implicit,t=s();w("parent",t.data)("data",e)("current",t.current)}}var Rs=(()=>{let o=class o{constructor(){this.currentChanged=Ae(),this._data=new U,this._parent=new U}get parent(){return this._parent}set parent(t){this._parent=t,this.handleOnChange()}get data(){return this._data}set data(t){this._data=t,this.handleOnChange()}ngOnChanges(t){this.handleOnChange()}handleOnChange(){}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","line-svg",""]],inputs:{parent:"parent",data:"data",current:"current"},outputs:{currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:Rz,decls:3,vars:8,consts:[[3,"pointerdown"],["line-svg","",3,"parent","data","current"],["line-svg","",3,"currentChanged","parent","data","current"]],template:function(i,n){i&1&&(G(),p(0,"line",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data)}),d(),T(1,qz,1,3,":svg:g",1,b)),i&2&&(S("active",n.data===n.current),P("stroke-width",7)("x1",n.parent.shape.x)("y1",n.parent.shape.y)("x2",n.data.shape.x)("y2",n.data.shape.y)("stroke",n.parent.shape.stroke),m(),E(n.data.groups))},dependencies:[o,J],encapsulation:2});let r=o;return r})();var jz=["real-link",""];function Uz(r,o){if(r&1){let e=g();G(),p(0,"g",1),v("pointerdown",function(i){let n=_(e).$implicit,a=s();return h(a.linkDown(i,n))}),Z(1,"path",2),p(2,"text",3)(3,"textPath"),x(4),d()()()}if(r&2){let e=o.$implicit,t=s();S("cactive",e.from===t.current()||e.to===t.current()||e===t.selected()),m(),P("id",e.id)("d",e.shape.pathData)("fill","none")("stroke",e.from.shape.fill)("marker-end","url(#arrow)")("marker-start","url(#dot2)")("opacity",.9)("stroke-width",6),m(),P("dy",3)("dx",24)("stroke",e.from.shape.textColor),m(),P("font-size",9)("href",e.hashId),m(),xe("",e.from.tokenType," -",e.to.tokenType,"")}}var qs=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.changeId=L(0),this.selected=L(void 0),this.w=L(0),this.h=L(0),this.onLink=Ae(),this.realLinks=R([])}ngOnChanges(t){if(t.data){if(t.data.currentValue)if(this.data().getChildren().length)this.buildLinks();else return}else t.changeId&&this.buildLinks()}buildLinks(){var t=[];let i=this.data().flatten(),n=new Map;for(let c of i)for(let l of c.keyValue())l.type==="Keys"&&n.set(l.key,c);for(let c of n){let l=c[1],u=c[0];var a=l.getValue(u);a.split(",").forEach(C=>{for(let k of i){var y=k.getValue("Key");if(y===C&&l.id!==k.id){var B=new Le;if(B.from=k,B.to=l,B.fromKey=y,B.toKey=y,B.type=k.tokenType,B.toType=l.tokenType,!k.isExpanded)continue;t.push(B)}}})}this.refreshLinks(t),this.realLinks.update(c=>c=t)}linkDown(t,i){this.onLink.emit({e:t,data:i})}refreshLinks(t){for(let n of t){let a=n.from,c=n.to;if(!a||!c)continue;let l=a.shape.x,u=a.shape.y,f=c.shape.x,C=c.shape.y,y=a.shape.width,B=a.shape.height,k=c.shape.width,A=c.shape.height,Y=this.w();if(isNaN(l)||isNaN(u)||isNaN(y)||isNaN(B)||isNaN(f)||isNaN(C)||isNaN(k)||isNaN(A)){let Pe="";isNaN(l)&&(a.shape.x=0,Pe="x"),isNaN(u)&&(a.shape.y=0,Pe="y"),isNaN(y)&&(a.shape.width=0,Pe="w"),isNaN(B)&&(a.shape.height=0,Pe="h"),isNaN(f)&&(c.shape.x=0,Pe="x1"),isNaN(C)&&(c.shape.y=0,Pe="y1"),isNaN(k)&&(c.shape.width=0,Pe="h1"),isNaN(A)&&(c.shape.height=0,Pe="h"),console.log(Pe+" nan detected"+n.from?.tokenType+" "+n.to?.tokenType);continue}let z="";z=`M${l+y+20},${u+B/2} L${Y},${u+B/2} L${Y},${C+A/2} L${f+k+22},${C+A/2}`,n.shape.pathData=z}}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","real-link",""]],inputs:{data:[1,"data"],current:[1,"current"],changeId:[1,"changeId"],selected:[1,"selected"],w:[1,"w"],h:[1,"h"]},outputs:{onLink:"onLink"},standalone:!0,features:[Re,X],attrs:jz,decls:1,vars:1,consts:[["class","pointer",3,"cactive","pointerdown",4,"ngFor","ngForOf"],[1,"pointer",3,"pointerdown"],["stroke-dasharray","2",1,"pointer","svgtxt"],[1,"pointer","svgtxt"]],template:function(i,n){i&1&&O(0,Uz,5,17,"g",0),i&2&&w("ngForOf",n.realLinks())},dependencies:[J,yt],styles:["@keyframes _ngcontent-%COMP%_draw{0%{stroke-dasharray:0,10}to{stroke-dasharray:10,0}}.snake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_draw 1s linear}.pointer[_ngcontent-%COMP%]{cursor:pointer}.cactive[_ngcontent-%COMP%]{stroke:#ff0;stroke-width:7!important}"]});let r=o;return r})();var Gz=["fake-link",""];function Yz(r,o){if(r&1){let e=g();G(),p(0,"g",1)(1,"path",2),v("pointerdown",function(i){let n=_(e).$implicit,a=s();return h(a.linkDown(i,n))}),d(),p(2,"text",3)(3,"textPath"),x(4),d()()()}if(r&2){let e=o.$implicit,t=s();m(),S("active",e.from===t.current()||e.to===t.current()||e===t.selected()),P("id",e.id)("d",e.shape.pathData)("fill","none")("stroke","green")("marker-end","url(#arrow)")("marker-start","url(#dot2)")("opacity",.9)("stroke-width",6),m(),P("dy",4)("dx",24)("fill",e.from.shape.stroke),m(),P("font-size",8)("href",e.hashId),m(),xe("",e.from.tokenType," ",e.to.tokenType,"")}}var js=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.onLink=Ae(),this.changeId=L(0),this.selected=L(void 0),this.links=R([]),this.w=L(0),this.h=L(0),this.curvyPath=(t,i,n,a,c,l,u,f,C)=>{let k,A,Y,z,Pe,Ve,Fe,Ie,$i=this.Where(t,i,n,a,c,l,u,f,C),Me=Math.abs(i-l)/2,$e="";switch($i){case"RightMiddleToTopMiddle":k=i+a+2,A=n+c/2,Y=l+f/2,z=u-2,Pe=k+Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"RightMiddleToRightMiddle":k=i+a+2,A=n,Y=l+f+2,z=u+C/2,Pe=k+Me,Ve=A,Fe=Y+Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"RightMiddleToTopLeft":k=i+a+2,A=n+c/2,Y=l,z=u-2,Pe=k+Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"RightMiddleToTopRight":k=i+a+2,A=n+c/2,Y=l+f,z=u-2,Pe=k+Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"LeftMiddleToTopMiddle":k=i,A=n+c/2,Y=l+f/2,z=u-2,Pe=k-Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"LeftMiddleToTopLeft":k=i,A=n+c/2,Y=l,z=u-2,Pe=k-Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"LeftMiddleToTopRight":k=i,A=n+c/2,Y=l+f,z=u-2,Pe=k-Me,Ve=A,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"LeftMiddleToRightMiddle":k=i,A=n+c/2,Y=l+f+2,z=u+C/2,Pe=k-Me,Ve=A,Fe=Y+Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"LeftMiddleToBottomRight":k=i,A=n+c/2,Y=l+f,z=u+C+2,Pe=k-Me,Ve=A,Fe=Y,Ie=z+Me,$e=`M${k} ${A} L${Y} ${z}`;break;case"BottomMiddleToTopMiddle":k=i+a/2,A=n+c+2,Y=l+f/2,z=u-2,Pe=k,Ve=A+Me,Fe=Y,Ie=z-Me,$e=`M${k} ${A} C${Pe} ${Ve}, ${Fe} ${Ie}, ${Y} ${z}`;break;case"BottomMiddleToLeftMiddle":k=i+a/2,A=n+c+2,Y=l,z=u+C/2,Pe=k,Ve=A+Me,Fe=Y-Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"BottomMiddleToRightMiddle":k=i+a/2,A=n+c+2,Y=l+f,z=u+C/2,Pe=k,Ve=A+Me,Fe=Y+Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"BottomMiddleToTopLeft":k=i+a/2,A=n+c+2,Y=l,z=u-2,Pe=k,Ve=A+Me,Fe=Y-Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"BottomMiddleToTopRight":k=i+a/2,A=n+c+2,Y=l+f,z=u-2,Pe=k,Ve=A+Me,Fe=Y+Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"TopMiddleToBottomMiddle":k=i+a/2,A=n,Y=l+f/2,z=u+C+2,Pe=k,Ve=A-Me,Fe=Y,Ie=z+Me,$e=`M${k} ${A} L${Y} ${z}`;break;case"TopMiddleToBottomLeft":k=i+a/2,A=n,Y=l,z=u+C+2,Pe=k,Ve=A-Me,Fe=Y-Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"TopMiddleToBottomRight":k=i+a/2,A=n,Y=l+f,z=u+C+2,Pe=k,Ve=A-Me,Fe=Y+Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"RightMiddleToLeftMiddle":k=i+a+2,A=n+c/2,Y=l,z=u+C/2,Pe=k+Me,Ve=A,Fe=Y-Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;case"RightMiddleToBottomLeft":k=i+a+2,A=n+c/2,Y=l,z=u+C,Pe=k+Me,Ve=A,Fe=Y-Me,Ie=z,$e=`M${k} ${A} L${Y} ${z}`;break;default:alert("default"+$i);break}return $e},this.flowChartPath=(t,i,n,a,c,l,u,f,C)=>{let y=this.Where(t,i,n,a,c,l,u,f,C),B=new Array,k=i<l?40:-40,A=n<u?40:-40,Y,z;switch(y){case"RightMiddleToTopMiddle":Y=new be(i+a,n+c/2),z=new be(l+f/2,u),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(Y.x+k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"RightMiddleToRightMiddle":Y=new be(i+a,n+c/2),z=new be(l+f,u+C/2),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(Y.x+k,z.y)),B.push(z);break;case"RightMiddleToTopLeft":Y=new be(i+a,n+c/2),z=new be(l,u),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(Y.x+k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"RightMiddleToTopRight":Y=new be(i+a,n+c/2),z=new be(l+f,u),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(Y.x+k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"LeftMiddleToTopMiddle":Y=new be(i,n+c/2),z=new be(l+f/2,u),B.push(Y),B.push(new be(Y.x-k,Y.y)),B.push(new be(Y.x-k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"LeftMiddleToTopLeft":Y=new be(i,n+c/2),z=new be(l,u),B.push(Y),B.push(new be(Y.x-k,Y.y)),B.push(new be(Y.x-k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"LeftMiddleToTopRight":Y=new be(i,n+c/2),z=new be(l+f,u),B.push(Y),B.push(new be(Y.x-k,Y.y)),B.push(new be(Y.x-k,z.y-A)),B.push(new be(z.x,z.y-A)),B.push(z);break;case"BottomMiddleToTopMiddle":Y=new be(i+a/2,n+c),z=new be(l+f/2,u),B.push(Y),B.push(new be(Y.x,Y.y+A)),B.push(new be(Y.x,z.y-A)),B.push(z);break;case"BottomMiddleToLeftMiddle":Y=new be(i+a/2,n+c),z=new be(l,u+C/2),B.push(Y),B.push(new be(Y.x,Y.y+A)),B.push(new be(Y.x-k,Y.y+A)),B.push(new be(z.x-k,z.y)),B.push(z);break;case"BottomMiddleToRightMiddle":Y=new be(i+a/2,n+c),z=new be(l+f,u+C/2),B.push(Y),B.push(new be(Y.x,Y.y+A)),B.push(new be(Y.x+k,Y.y+A)),B.push(new be(z.x+k,z.y)),B.push(z);break;case"BottomMiddleToTopLeft":Y=new be(i+a/2,n+c),z=new be(l,u),B.push(Y),B.push(new be(Y.x,Y.y+A)),B.push(new be(Y.x,z.y-A)),B.push(z);break;case"BottomMiddleToTopRight":Y=new be(i+a/2,n+c),z=new be(l+f,u),B.push(Y),B.push(new be(Y.x,Y.y+A)),B.push(new be(Y.x,z.y-A)),B.push(z);break;case"TopMiddleToBottomMiddle":Y=new be(i+a/2,n),z=new be(l+f/2,u+C),B.push(Y),B.push(new be(Y.x,Y.y-A)),B.push(new be(Y.x,z.y+A)),B.push(z);break;case"TopMiddleToBottomLeft":Y=new be(i+a/2,n),z=new be(l,u+C),B.push(Y),B.push(new be(Y.x,Y.y-A)),B.push(new be(Y.x,z.y+A)),B.push(z);break;case"TopMiddleToBottomRight":Y=new be(i+a/2,n),z=new be(l+f,u+C),B.push(Y),B.push(new be(Y.x,Y.y-A)),B.push(new be(Y.x,z.y+A)),B.push(z);break;case"RightMiddleToLeftMiddle":Y=new be(i+a,n+c/2),z=new be(l,u+C/2),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(z.x-k,z.y)),B.push(z);break;case"RightMiddleToBottomLeft":Y=new be(i+a,n+c/2),z=new be(l,u+C),B.push(Y),B.push(new be(Y.x+k,Y.y)),B.push(new be(z.x-k,z.y)),B.push(z);break;case"LeftMiddleToRightMiddle":Y=new be(i,n+c/2),z=new be(l+f,u+C/2),B.push(Y),B.push(new be(Y.x-k,Y.y)),B.push(new be(z.x+k,z.y)),B.push(z);break;case"LeftMiddleToBottomRight":Y=new be(i,n+c/2),z=new be(l+f,u+C),B.push(Y),B.push(new be(Y.x-k,Y.y)),B.push(new be(z.x+k,z.y)),B.push(z);break;default:alert("default"+y);break}let Pe="";for(let Ve=0;Ve<B.length;Ve++)Ve===0?Pe+=`M${B[Ve].x} ${B[Ve].y}`:Pe+=` L${B[Ve].x} ${B[Ve].y}`;return Pe}}ngOnChanges(t){if(t.data){if(t.data.currentValue)if(this.data().getChildren().length)this.rebuildLinks(this.data());else return}else t.changeId&&this.rebuildLinks(this.data())}linkDown(t,i){this.onLink.emit({e:t,data:i})}rebuildLinks(t){var i=new Array;let n=t.flatten(),a=t;for(let c of t.getChildren()){let l=new Le;l.from=a,l.to=c,(We.canAdd(l.from,l.to)||l.from.parent===l.to.parent)&&i.push(l),a=c;for(let u of c.getChildren()){let f=new Le;f.from=a,f.to=u,(We.canAdd(f.from,f.to)||f.from.parent===f.to.parent)&&i.push(f),a=u;for(let C of u.getChildren()){let y=new Le;y.from=a,y.to=C,(We.canAdd(y.from,y.to)||y.from.parent===y.to.parent)&&i.push(y),a=C;for(let B of C.getChildren()){let k=new Le;k.from=a,k.to=B,(We.canAdd(k.from,k.to)||k.from.parent===k.to.parent)&&i.push(k),a=B}}}}for(let c of n)if(c instanceof oe){let l=c.getChildren();for(let u of l)if(u.needsEnd){let f=new Le;f.from=c,f.to=u,i.push(f)}}else if(c instanceof st){let l=c;if(l.elses){let u=new Le;u.from=l,u.to=l.elses,i.find(C=>C.from===u.from&&C.to===u.to)||i.push(u)}if(l.then){let u=new Le;if(u.from=l,u.to=l.then,i.find(C=>C.from===u.from&&C.to===u.to)||i.push(u),u.getChildren().length>0){let C=u.getChildren()[0],y=new Le;y.from=u,y.to=C,i.find(k=>k.from===y.from&&k.to===y.to)||i.push(y)}}for(let u of l.elseIfs){let f=new Le;if(f.from=l,f.to=u,i.find(y=>y.from===f.from&&y.to===f.to)||i.push(f),f.getChildren().length>0){let y=f.getChildren()[0],B=new Le;B.from=f,B.to=y,i.find(A=>A.from===B.from&&A.to===B.to)||i.push(B)}}}else if(c instanceof lt){let l=new Le;l.from=c,l.to=c,i.find(f=>f.from===l.from&&f.to===l.to)||i.push(l);for(let f of c.cases){let C=new Le;if(C.from=c,C.to=f,i.find(B=>B.from===C.from&&B.to===C.to)||i.push(C),C.getChildren().length>0){let B=C.getChildren()[0],k=new Le;k.from=C,k.to=B,i.find(Y=>Y.from===k.from&&Y.to===k.to)||i.push(k)}}if(c.defaults){let f=new Le;if(f.from=c,f.to=c.defaults,i.find(y=>y.from===f.from&&y.to===f.to)||i.push(f),f.getChildren().length>0){let y=f.getChildren()[0],B=new Le;B.from=f,B.to=y,i.find(A=>A.from===B.from&&A.to===B.to)||i.push(B)}}}for(let c of i)if(c.to instanceof Ye||c.to instanceof Ge||c.to instanceof Ue){if(c.from?.tokenType!==ue.IF){let l=i.indexOf(c);l>-1&&i.splice(l,1)}}else if((c.to instanceof Qe||c.to instanceof je)&&c.from?.tokenType!==ue.SWITCH){let l=i.indexOf(c);l>-1&&i.splice(l,1)}this.links.update(c=>c=i),this.handleOnChange()}handleOnChange(){for(let t of this.links()){let i=t.from,n=t.to;if(!i||!n)continue;let a=i.shape.x,c=i.shape.y,l=n.shape.x,u=n.shape.y,f=i.shape.width,C=i.shape.height,y=n.shape.width,B=n.shape.height;if(isNaN(a)||isNaN(c)||isNaN(f)||isNaN(C)||isNaN(l)||isNaN(u)||isNaN(y)||isNaN(B)){let k="";isNaN(a)&&(i.shape.x=0,k="x"),isNaN(c)&&(i.shape.y=0,k="y"),isNaN(f)&&(i.shape.width=0,k="w"),isNaN(C)&&(i.shape.height=0,k="h"),isNaN(l)&&(n.shape.x=0,k="x1"),isNaN(u)&&(n.shape.y=0,k="y1"),isNaN(y)&&(n.shape.width=0,k="h1"),isNaN(B)&&(n.shape.height=0,k="h"),console.log(k+" nan detected"+t.from?.tokenType+" "+t.to?.tokenType);continue}t.shape.pathData=this.curvyPath(t,a,c,f,C,l,u,y,B)}return this.links}Where(t,i,n,a,c,l,u,f,C){let y={x:i+a/2,y:n},B={x:i+a,y:n+c/2},k={x:i+a/2,y:n+c},A={x:i,y:n+c/2},Y={x:l+f/2,y:u},z={x:l+f,y:u+C/2},Pe={x:l+f/2,y:u+C},Ve={x:l,y:u+C/2},Fe="NotSet";return B.x<=l?B.y<Y.y?Fe="RightMiddleToTopLeft":B.y>Pe.y?Fe="RightMiddleToBottomLeft":Fe="RightMiddleToLeftMiddle":A.x>=l+f?A.y<Y.y?Fe="LeftMiddleToTopRight":A.y>Pe.y?Fe="LeftMiddleToBottomRight":Fe="LeftMiddleToRightMiddle":k.y<=u?k.x<Ve.x?Fe="BottomMiddleToTopLeft":k.x>z.x?Fe="BottomMiddleToTopRight":Fe="BottomMiddleToTopMiddle":y.y>=u+C?y.x<Ve.x?Fe="TopMiddleToBottomLeft":y.x>z.x?Fe="TopMiddleToBottomRight":Fe="TopMiddleToBottomMiddle":n+c<=u+C/2?k.x<Ve.x?Fe="BottomMiddleToTopLeft":k.x>z.x?Fe="BottomMiddleToTopRight":Fe="BottomMiddleToTopMiddle":n>=u+C/2?y.x<Ve.x?Fe="TopMiddleToBottomLeft":y.x>z.x?Fe="TopMiddleToBottomRight":Fe="TopMiddleToBottomMiddle":i+a<=l+f/2?Fe="RightMiddleToLeftMiddle":i>=l+f/2?Fe="LeftMiddleToRightMiddle":k.y<Y.y?Fe="BottomMiddleToTopMiddle":y.y>Pe.y?Fe="TopMiddleToBottomMiddle":Fe="RightMiddleToRightMiddle",t.where=Fe,Fe}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","fake-link",""]],inputs:{data:[1,"data"],current:[1,"current"],changeId:[1,"changeId"],selected:[1,"selected"],w:[1,"w"],h:[1,"h"]},outputs:{onLink:"onLink"},standalone:!0,features:[Re,X],attrs:Gz,decls:1,vars:1,consts:[["class","pointer",4,"ngFor","ngForOf"],[1,"pointer"],[1,"pointer",3,"pointerdown"],[1,"pointer","svgtxt"]],template:function(i,n){i&1&&O(0,Yz,5,17,"g",0),i&2&&w("ngForOf",n.links())},dependencies:[J,yt],styles:["@keyframes _ngcontent-%COMP%_draw{0%{stroke-dasharray:0,10}to{stroke-dasharray:10,0}}.snake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_draw 1s linear}.pointer[_ngcontent-%COMP%]{cursor:pointer}.active[_ngcontent-%COMP%]{stroke:#ff0;stroke-width:7!important}"]});let r=o;return r})();var Hi=class r extends Kr{constructor(){super(...arguments),this.position="",this.x=0,this.y=0,this.ex=0,this.ey=0,this.width=0,this.height=0,this.r=0,this.stroke="var(--tertiary-color)",this.fill="var(--tertiary-color)",this.textColor="var(--text-color)",this.cursor="pointer",this.pathData="",this.text="",this.style="",this.radius=0,this.angle=0,this.radians=0,this.asts=[],this.model=null,this.to=null,this.children=[],this.getPoints=(o=1.5)=>{let t=this.model.shape,{x:i,y:n,width:a,height:c}=t,l=12,u=o,f=new r;f.position="Top",f.x=i+a/2,f.y=n-l*u,f.r=l,f.fill="violet",f.cursor="ns-resize";let C=new r;C.position="Right",C.x=i+a+l*u,C.y=n+c/2,C.r=l,C.fill="indigo",C.cursor="ew-resize";let y=new r;y.position="Bottom",y.x=i+a/2,y.y=n+c+l*u,y.r=l,y.fill="blue",y.cursor="ns-resize";let B=new r;B.position="Left",B.x=i-l*u,B.y=n+c/2,B.r=l,B.fill="green",B.cursor="ew-resize",this.children=[f,C,y,B];for(let k=0;k<this.children.length;k++){let A=this.children[k];A.model=this.model,A.to=this.to,this.model?.first()&&(A.text=this.model.first())}}}setFrom(o){let e=o;e&&e.shape&&e.shape.x&&(this.model=o,this.getPoints())}move(o,e){this.x+=o,this.y+=e,this.ex!==0&&this.ey!==0?(this.ex+=o,this.ey+=e):(this.ex=this.x+o,this.ey=this.y+e),this.pathData=`M${this.x} ${this.y} L${this.ex} ${this.ey}`,this.children.length>0&&this.children.forEach(t=>{t.move(o,e)})}line(o,e,t,i){let n=`M${o} ${e} L${t} ${i}`;this.pathData=n}ellipse(o,e,t,i){let n=`M${o} ${e} a ${t} ${i} 0 1 0 1 0`;this.pathData=n}circle(o,e,t){let i=`M${o} ${e} a ${t} ${t} 0 1 0 1 0`;this.pathData=i}rectangle(o,e,t,i){let n=`M${o} ${e} h${t} v${i} h-${t} v-${i}`;this.pathData=n}triangle(o,e,t,i){let n=`M${o} ${e} l${t} ${i} l-${t*2} 0 Z`;this.pathData=n}};var Hz=["branch-tree",""];function Xz(r,o){if(r&1){let e=g();G(),p(0,"g",3),v("currentChanged",function(i){_(e);let n=s(2);return h(n.childDown(i))}),d()}if(r&2){let e=o.$implicit,t=s(2);w("data",e)("current",t.current())}}function Zz(r,o){if(r&1&&T(0,Xz,1,2,":svg:g",2,b),r&2){let e=s();E(e.data().groups)}}var Us=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.currentChanged=Ae()}ngOnChanges(t){}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}childDown(t){this.currentChanged.emit(t)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","branch-tree",""]],inputs:{data:[1,"data"],current:[1,"current"]},outputs:{currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:Hz,decls:10,vars:28,consts:[[1,"svgcard","pointer",3,"pointerdown","touchstart"],[1,"svgtxt",2,"text-anchor","middle","dominant-baseline","middle"],["branch-tree","",3,"data","current"],["branch-tree","",3,"currentChanged","data","current"]],template:function(i,n){i&1&&(G(),p(0,"g",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data())})("touchstart",function(c){return n.onSvgDown(c,n.data())}),Z(1,"circle"),p(2,"text",1)(3,"tspan"),x(4),at(5,"slice"),d(),p(6,"tspan"),x(7),at(8,"slice"),d()()(),O(9,Zz,2,0)),i&2&&(S("gactive",n.data()===n.current()),P("transform","translate("+n.data().shape.x+","+n.data().shape.y+")"),m(),P("r",n.data().shape.width/2)("id",n.data().id)("opacity",1)("stroke-width",1)("stroke",n.data().shape.stroke)("fill",n.data().shape.fill),m(2),P("fill",n.data().shape.textColor)("font-size",11)("x",2)("dy",-1),m(),q(ot(5,20,n.data().first(),0,12)),m(2),P("fill",n.data().shape.stroke)("font-size",9)("x",2)("dy",15),m(),q(ot(8,24,n.data().tokenType.toString(),0,6)),m(2),N(n.data().groups.length>0?9:-1))},dependencies:[o,J,Ii],styles:[".gactive[_ngcontent-%COMP%]{cursor:pointer;filter:drop-shadow(1px 6px 4px rgba(0,0,0,1))}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let r=o;return r})();var Jz=["kavacha",""];function Qz(r,o){if(r&1){let e=g();G(),p(0,"rect",2),v("pointerdown",function(i){_(e);let n=s().$implicit,a=s();return h(a.resizerDown(i,n))}),d()}if(r&2){let e=s().$implicit;P("cursor",e.cursor)("rx",e.rx)("x",e.x)("y",e.y)("width",e.w)("height",e.h)("fill",e.fill)}}function e8(r,o){if(r&1&&(ji(0),O(1,Qz,1,7,"rect",1),Ui()),r&2){let e=o.$implicit;m(),w("ngIf",e.h>0&&e.w>0)}}var Gs=(()=>{let o=class o{constructor(){this.data={},this.dataChange=new Q,this.moveChildren=!0,this.msgToSend={},this.beforex=0,this.beforey=0,this.startx=0,this.starty=0,this.start=0,this.delta=0,this.deltay=0,this.onResizerMove=t=>{t.stopPropagation(),t.preventDefault();let{clientX:i,clientY:n}=t;this.delta=i-this.start,this.deltay=n-this.starty;let a=this.data;if(!a)return;var c=a.shape;let l=0,u=0,f=0,C=0;switch(this.currentRect?.position){case"lefttop":f=-this.delta,C=-this.deltay,l=this.delta,u=this.deltay;break;case"righttop":f=this.delta,C=-this.deltay,u=this.deltay;break;case"leftbottom":f=-this.delta,C=this.deltay,l=this.delta;break;case"rightbottom":f=this.delta,C=this.deltay;break;case"left":l=this.delta,f=-this.delta;break;case"top":u=this.deltay,C=-this.deltay;break;case"right":f=this.delta;break;case"bottom":C=this.deltay;break}this.moveChildren?this.data.moveResize(l,u,f,C):(c.width+=l,c.height+=u,c.x+=f,c.y+=C);let y={x:c.x,y:c.y,w:c.width,h:c.height};this.msgToSend=y,this.start=i,this.starty=n,this.dataChange.emit(this.msgToSend)},this.onResizerUp=()=>{document.removeEventListener("pointermove",this.onResizerMove),document.removeEventListener("pointerup",this.onResizerUp),this.dataChange.emit(this.msgToSend)}}ngOnInit(){}getPositionRectangles(){let t=this.data;return this.getPositionRectangle(t,6,12,"yellow")}getPositionRectangle(t,i,n,a){var c=[];let l=t.shape,u=0,f=0,C=l.width,y=l.height,B=i,k=i*2,A=B,Y={lefttop:{x:u-A,y:f-A,w:k,h:k,rx:n,position:"lefttop",fill:a,cursor:"nwse-resize"},righttop:{x:u+C,y:f-A,w:k,h:k,rx:n,position:"righttop",fill:a,cursor:"nesw-resize"},leftbottom:{x:u-A,y:f+y,w:k,h:k,rx:n,position:"leftbottom",fill:a,cursor:"nesw-resize"},rightbottom:{x:u+C,y:f+y,w:k,h:k,rx:n,position:"rightbottom",fill:a,cursor:"nwse-resize"},left:{x:u-A,y:f+A,w:B,h:y-A,rx:0,position:"left",fill:a,cursor:"ew-resize"},top:{x:u+A,y:f-A,w:C-A,h:B,rx:0,position:"top",fill:a,cursor:"ns-resize"},right:{x:u+C+A,y:f+A,w:B,h:y-A,rx:0,position:"right",fill:a,cursor:"ew-resize"},bottom:{x:u+A,y:f+y+A,w:C-A,h:B,rx:0,position:"bottom",fill:a,cursor:"ns-resize"}};return c=[Y.lefttop,Y.righttop,Y.leftbottom,Y.rightbottom,Y.left,Y.top,Y.right,Y.bottom],c}resizerDown(t,i){t.stopPropagation(),t.preventDefault();let{clientX:n,clientY:a}=t;this.start=n,this.starty=a,this.currentRect=i,!document.onpointermove&&(this.beforex=this.data.shape.x,this.beforey=this.data.shape.y,document.addEventListener("pointermove",this.onResizerMove),document.addEventListener("pointerup",this.onResizerUp))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","kavacha",""]],inputs:{data:"data",moveChildren:"moveChildren"},outputs:{dataChange:"dataChange"},standalone:!0,features:[X],attrs:Jz,decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","pointer","opacity","1",3,"pointerdown",4,"ngIf"],["opacity","1",1,"pointer",3,"pointerdown"]],template:function(i,n){i&1&&O(0,e8,2,1,"ng-container",0),i&2&&w("ngForOf",n.getPositionRectangles())},dependencies:[J,yt,Di]});let r=o;return r})();var t8=["mover-svg",""],Ys=(()=>{let o=class o{get ast(){return this._data}set ast(t){this._data=t}constructor(){this._data={},this.moveChildren=!0,this.dataChange=new Q,this.starty=0,this.startx=0,this.delta=0,this.deltay=0,this.msgtoSend={},this.beginMove=t=>{t.stopPropagation();let{clientX:i,clientY:n}=t;this.delta=i-this.startx,this.deltay=n-this.starty,this.msgtoSend={x:this.ast.shape.x+this.delta,y:this.ast.shape.y+this.deltay,w:this.ast.shape.width,h:this.ast.shape.height},this.moveChildren?this.ast.move(this.delta,this.deltay):(this.ast.shape.x+=this.delta,this.ast.shape.y+=this.deltay),this.startx=i,this.starty=n},this.endMove=t=>{document.removeEventListener("pointermove",this.beginMove),document.removeEventListener("pointerup",this.endMove),this.startx=t.clientX,this.starty=t.clientY,this.dataChange.emit(this.msgtoSend)}}ngOnInit(){}get cx(){var t=0;return t}moveNode(t){t.stopPropagation(),!document.onpointermove&&(this.startx=t.clientX,this.starty=t.clientY,document.addEventListener("pointermove",this.beginMove),document.addEventListener("pointerup",this.endMove))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","mover-svg",""]],inputs:{ast:"ast",moveChildren:"moveChildren"},outputs:{dataChange:"dataChange"},standalone:!0,features:[X],attrs:t8,decls:5,vars:13,consts:[[1,"cursor",3,"pointerdown"],["r","21"],[1,"textStyle"]],template:function(i,n){i&1&&(G(),p(0,"g",0),v("pointerdown",function(c){return n.moveNode(c)}),Z(1,"circle",1),p(2,"text",2),x(3),at(4,"slice"),d()()),i&2&&(m(),P("cx",-20)("cy",n.ast.shape.height/2)("fill","var(--focus-color)")("stroke",n.ast.shape.textColor)("stroke-width",3),m(),P("x",-20)("y",n.ast.shape.height/2)("fill","var(--focus-text-color)"),m(),V(" ",ot(4,9,n.ast.tokenType.toString(),0,5)," "))},dependencies:[J,Ii],styles:[".textStyle[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-anchor:middle;dominant-baseline:middle;font-size:11px}.cursor[_ngcontent-%COMP%]{cursor:move}"]});let r=o;return r})();var i8=["fobj-tree",""],n8=(r,o,e,t)=>({width:r,height:o,backgroundColor:e,borderStyle:"none",borderWidth:"0px",borderColor:t});function r8(r,o){if(r&1&&(G(),Z(0,"g",1)),r&2){let e=s();w("data",e.data())}}function a8(r,o){if(r&1){let e=g();G(),p(0,"g",6),v("currentChanged",function(i){_(e);let n=s(2);return h(n.childDown(i,i.data))}),d()}if(r&2){let e=o.$implicit,t=s(2);w("data",e)("root",t.root())("w",t.w())("h",t.h())("current",t.current())}}function o8(r,o){if(r&1&&T(0,a8,1,5,":svg:g",5,b),r&2){let e=s();E(e.data().getChildren())}}var Hs=(()=>{let o=class o{constructor(){this.w=L.required(),this.h=L.required(),this.data=L.required(),this.root=L.required(),this.current=L(void 0),this.dataChanged=Ae(),this.currentChanged=Ae()}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}childDown(t,i){this.currentChanged.emit({e:t,data:i})}ngOnChanges(t){}updateData(t){this.dataChanged.emit(t)}childDataChanged(t){this.dataChanged.emit(t)}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","fobj-tree",""]],inputs:{w:[1,"w"],h:[1,"h"],data:[1,"data"],root:[1,"root"],current:[1,"current"]},outputs:{dataChanged:"dataChanged",currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:i8,decls:6,vars:20,consts:[[3,"pointerdown","touchstart"],["kavacha","",3,"data"],[1,"fobj","pointer",3,"ngStyle"],[3,"data","root","w","h"],["mover-svg","",3,"ast"],["fobj-tree","",3,"data","root","w","h","current"],["fobj-tree","",3,"currentChanged","data","root","w","h","current"]],template:function(i,n){i&1&&(G(),p(0,"g",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data())})("touchstart",function(c){return n.onSvgDown(c,n.data())}),O(1,r8,1,1,":svg:g",1),p(2,"foreignObject",2),Xi(),Z(3,"chat-forms",3),d(),G(),Z(4,"g",4),d(),O(5,o8,2,0)),i&2&&(S("gactive",n.data()===n.current()),P("transform","translate("+n.data().shape.x+","+n.data().shape.y+")")("width",n.data().shape.width)("height",n.data().shape.height),m(),N(n.current()===n.data()?1:-1),m(),w("ngStyle",Fr(15,n8,n.data().shape.width+"px",n.data().shape.height+"px",n.data().shape.fill,n.data().shape.stroke)),P("width",n.data().shape.width)("height",n.data().shape.height),m(),w("data",n.data())("root",n.root())("w",n.w())("h",n.h()),m(),w("ast",n.data()),m(),N(n.data().getChildren().length>0?5:-1))},dependencies:[o,J,Li,Gs,Ys,za],styles:[".textStyle[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-anchor:middle;dominant-baseline:middle;font-size:11px}.fobj[_ngcontent-%COMP%]{padding:4px 8px 1px;border-radius:6px;margin:0;opacity:1;cursor:pointer;color:var(--text-color);background-color:transparent}.gactive[_ngcontent-%COMP%]{cursor:pointer;filter:drop-shadow(1px 6px 4px rgba(0,0,0,1))}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let r=o;return r})();var s8=["circle-tree",""];function l8(r,o){if(r&1){let e=g();G(),p(0,"g",3),v("currentChanged",function(i){_(e);let n=s(2);return h(n.childDown(i,i.data))}),d()}if(r&2){let e=o.$implicit,t=s(2);w("data",e)("current",t.current())}}function c8(r,o){if(r&1&&T(0,l8,1,2,":svg:g",2,b),r&2){let e=s();E(e.data().getChildren())}}var Xs=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.currentChanged=Ae()}ngOnChanges(t){}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}childDown(t,i){this.currentChanged.emit({e:t,data:i})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","circle-tree",""]],inputs:{data:[1,"data"],current:[1,"current"]},outputs:{currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:s8,decls:10,vars:28,consts:[[1,"svgcard","pointer",3,"pointerdown","touchstart"],[1,"svgtxt",2,"text-anchor","middle","dominant-baseline","middle"],["circle-tree","",3,"data","current"],["circle-tree","",3,"currentChanged","data","current"]],template:function(i,n){i&1&&(G(),p(0,"g",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data())})("touchstart",function(c){return n.onSvgDown(c,n.data())}),Z(1,"circle"),p(2,"text",1)(3,"tspan"),x(4),at(5,"slice"),d(),p(6,"tspan"),x(7),at(8,"slice"),d()()(),O(9,c8,2,0)),i&2&&(S("gactive",n.data()===n.current()),P("transform","translate("+n.data().shape.x+","+n.data().shape.y+")"),m(),P("r",n.data().shape.width/2)("id",n.data().id)("opacity",1)("stroke-width",1)("stroke",n.data().shape.stroke)("fill",n.data().shape.fill),m(2),P("fill",n.data().shape.textColor)("font-size",11)("x",2)("dy",-1),m(),q(ot(5,20,n.data().first(),0,12)),m(2),P("fill",n.data().shape.stroke)("font-size",9)("x",2)("dy",15),m(),q(ot(8,24,n.data().tokenType.toString(),0,6)),m(2),N(n.data().getChildren().length>0?9:-1))},dependencies:[o,J,Ii],styles:[".gactive[_ngcontent-%COMP%]{cursor:pointer;filter:drop-shadow(1px 6px 4px rgba(0,0,0,1))}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let r=o;return r})();var p8=["card-tree",""];function d8(r,o){if(r&1&&(G(),p(0,"tspan"),x(1),at(2,"slice"),d()),r&2){let e=s(),t=e.$implicit,i=e.$index,n=s();P("x",32)("dy",i===0?18:i+14)("fill",n.data().shape.textColor)("font-size",15),m(),xe("",t.key,": ",ot(2,6,t.value,0,33),"")}}function u8(r,o){if(r&1&&O(0,d8,3,10,":svg:tspan"),r&2){let e=o.$implicit;N(e.value.length>3?0:-1)}}function m8(r,o){if(r&1){let e=g();G(),p(0,"g",5),v("currentChanged",function(i){_(e);let n=s(2);return h(n.childDown(i,i.data))}),d()}if(r&2){let e=o.$implicit,t=s(2);w("data",e)("current",t.current())}}function _8(r,o){if(r&1&&T(0,m8,1,2,":svg:g",4,b),r&2){let e=s();E(e.data().getChildren())}}var Zs=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.currentChanged=Ae()}ngOnChanges(t){}onSvgDown(t,i){this.currentChanged.emit({e:t,data:i})}childDown(t,i){this.currentChanged.emit({e:t,data:i})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["","card-tree",""]],inputs:{data:[1,"data"],current:[1,"current"]},outputs:{currentChanged:"currentChanged"},standalone:!0,features:[Re,X],attrs:p8,decls:10,vars:24,consts:[[1,"svgcard","pointer",3,"pointerdown","touchstart"],[1,"svgtxt"],["r","14"],[2,"text-anchor","middle","dominant-baseline","middle"],["card-tree","",3,"data","current"],["card-tree","",3,"currentChanged","data","current"]],template:function(i,n){i&1&&(G(),p(0,"g",0),v("pointerdown",function(c){return n.onSvgDown(c,n.data())})("touchstart",function(c){return n.onSvgDown(c,n.data())}),Z(1,"path"),p(2,"text",1),T(3,u8,1,1,null,null,b),d(),Z(5,"circle",2),p(6,"text",3),x(7),at(8,"slice"),d()(),O(9,_8,2,0)),i&2&&(S("gactive",n.data()===n.current()),P("transform","translate("+n.data().shape.x+","+n.data().shape.y+")"),m(),P("id",n.data().id)("d",n.data().shape.pathData)("opacity",1)("stroke-width",0)("stroke",n.data().shape.stroke)("fill",n.data().shape.fill),m(2),E(n.data().keyValue()),m(2),P("cx",1)("cy",n.data().shape.height/2)("fill","var(--tertiary-color)")("stroke","var(--focus-text-color)")("stroke-width",1),m(),P("x",1)("y",1+n.data().shape.height/2)("fill","var(--text-color)")("font-size",14),m(),V(" ",ot(8,20,n.data().tokenType.toString(),0,6)," "),m(2),N(n.data().getChildren().length>0?9:-1))},dependencies:[o,J,Ii],styles:[".gactive[_ngcontent-%COMP%]{cursor:pointer;filter:drop-shadow(1px 6px 4px rgba(0,0,0,1))}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let r=o;return r})();var h8=["*"],sn=(()=>{let o=class o{constructor(){this.label="",this.icon="",this.css="",this.active=!1}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["tab"]],inputs:{label:"label",icon:"icon",css:"css"},standalone:!0,features:[X],ngContentSelectors:h8,decls:2,vars:2,consts:[[1,"full-width","full-height",3,"hidden","ngClass"]],template:function(i,n){i&1&&(Ji(),p(0,"div",0),Qi(1),d()),i&2&&w("hidden",!n.active)("ngClass",n.css)},dependencies:[J,Ri],encapsulation:2});let r=o;return r})();var f8=["*"];function y8(r,o){if(r&1){let e=g();p(0,"div",6),v("click",function(){let i=_(e).$implicit,n=s();return h(n.selectTab(i))}),p(1,"div",7)(2,"span",8),x(3),d()(),p(4,"div",9),x(5),d()()}if(r&2){let e=o.$implicit;S("tab-active",e.active),m(3),q(e.icon),m(2),q(e.label)}}function v8(r,o){if(r&1){let e=g();p(0,"div",10),v("click",function(){_(e);let i=s();return h(i.onClosed())}),p(1,"span",8),x(2,"close"),d()()}}var Js=(()=>{let o=class o{constructor(){this.showCloseButton=!1,this.close=new Q,this.tabChange=new Q,this.tabs=new kr}ngAfterContentInit(){var t=this.tabs.first;t&&(t.active=!0,this.tabChange.emit(t))}selectTab(t){this.tabs.toArray().forEach(i=>i.active=!1),t.active=!0,this.tabChange.emit(t)}onClosed(){this.close.emit()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["tabs"]],contentQueries:function(i,n,a){if(i&1&&br(a,sn,4),i&2){let c;en(c=tn())&&(n.tabs=c)}},inputs:{showCloseButton:"showCloseButton"},outputs:{close:"close",tabChange:"tabChange"},standalone:!0,features:[X],ngContentSelectors:f8,decls:8,vars:1,consts:[[1,"tabs"],[1,"tabarea"],[1,"tab",3,"tab-active"],[1,"fill-remaining-space"],[1,"image-btn"],[1,"tabcontent"],[1,"tab",3,"click"],[1,"tabicon"],[1,"very-small-icon"],[1,"tab-title","center"],[1,"image-btn",3,"click"]],template:function(i,n){i&1&&(Ji(),p(0,"div",0)(1,"div",1),T(2,y8,6,4,"div",2,Zi),Z(4,"span",3),O(5,v8,3,0,"div",4),d(),p(6,"div",5),Qi(7),d()()),i&2&&(m(2),E(n.tabs),m(3),N(n.showCloseButton?5:-1))},styles:['.tabs[_ngcontent-%COMP%]{display:grid;grid-template-rows:max-content auto;grid-template-areas:"tabarea" "tabcontent";height:100%}.tabarea[_ngcontent-%COMP%]{grid-area:tabarea;display:flex;flex-direction:row;padding-top:4px;padding-bottom:2px;width:100%}.tabcontent[_ngcontent-%COMP%]{grid-area:tabcontent;margin:2px;padding:2px;height:100%;width:99%;overflow:hidden}.tab[_ngcontent-%COMP%]{display:grid;grid-template-areas:"tabicon tab-title";grid-template-columns:max-content auto;text-decoration:none;transition:.15s ease-in-out;border-bottom:1px solid transparent;padding-left:12px;padding-right:12px;font-size:14px;align-items:center}.tab[_ngcontent-%COMP%]:hover{color:var(--focus-color)!important}.tab-active[_ngcontent-%COMP%]{transition-property:border-bottom;transition-timing-function:linear;border-bottom:1px solid var(--text-color);color:var(--focus-color)!important}.tabicon[_ngcontent-%COMP%]{grid-area:tabicon}.tab-title[_ngcontent-%COMP%]{grid-area:tab-title;text-align:center}']});let r=o;return r})();var ln=class{constructor(){this.x=0,this.y=0,this.w=0,this.h=0,this.rx=0,this.cursor="",this.text="",this.position="",this.fill="blue",this.stroke="black",this.zIndex=0,this.description="",this.isOpen=!1,this.where="",this.wheres=["TopLeft","TopRight","BottomLeft","BottomRight","MiddleTop","MiddleBottom","MiddleLeft","MiddleRight","RelativeLeft","RelativeRight","RelativeTop","RelativeBottom","Center","TopCenter","BottomCenter","LeftCenter","RightCenter","Absolute"]}fromJson(o){return this.x=o.x,this.y=o.y,this.w=o.w,this.h=o.h,this.rx=o.rx,this.position=o.position,this.fill=o.fill,this.stroke=o.stroke,this.cursor=o.cursor,this.where=o.where,this.text=o.text,this.description=o.description,this.zIndex=o.zIndex,this.isOpen=o.isOpen,this.where=o.where,this}toJson(){return{x:this.x,y:this.y,w:this.w,h:this.h,rx:this.rx,position:this.position,fill:this.fill,stroke:this.stroke,cursor:this.cursor,where:this.where,text:this.text,description:this.description,zIndex:this.zIndex,isOpen:this.isOpen}}rectStyle(){let o=this;return`position: absolute; left: ${o.x}px; top: ${o.y}px; width: ${o.w}px; height: ${o.h}px;  background-fill: ${o.fill}; cursor: ${o.cursor};`}expandedStyle(){return`display: grid; grid-template-rows: 20px auto; position: absolute; left: ${this.x}px; top: ${this.y}px; background-fill: var(--tertiary-color); fill: var(--text-color); width: ${this.w}px; height: ${this.h}px; max-width: ${this.w}px; border-radius: 5px; border-fill: var(--accent-color); box-shadow: 0 0 10px 5px var(--accent-color); opacity: 1; backdrop-filter: blur(5px);  padding: 0px; z-index: ${this.zIndex};`}};var x8=(r,o,e,t,i,n)=>({top:r,left:o,width:e,height:t,backgroundColor:i,borderColor:n});function g8(r,o){if(r&1){let e=g();G(),p(0,"g",19),v("currentChanged",function(i){_(e);let n=s(3);return h(n.onSvgBranchDown(i))}),d(),p(1,"g",20),v("currentChanged",function(i){_(e);let n=s(3);return h(n.onSvgBranchDown(i))}),d()}if(r&2){let e=s(3);w("parent",e.branch)("data",e.branch)("current",e.down),m(),w("data",e.branch)("current",e.down)}}function C8(r,o){if(r&1&&O(0,g8,2,5),r&2){let e=s(2);N(e.branch?0:-1)}}function w8(r,o){if(r&1&&(G(),Z(0,"line")),r&2){let e=o.$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.stroke)("stroke-width",1)}}function S8(r,o){if(r&1&&(G(),Z(0,"line"),T(1,w8,1,6,":svg:line",null,b)),r&2){let e=o.$implicit,t=s().$implicit;P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.stroke)("stroke-width",1),m(),E(e.getChildren())}}function k8(r,o){if(r&1&&(G(),Z(0,"line"),T(1,S8,3,6,null,null,b)),r&2){let e=o.$implicit;s(4);let t=re(11);P("x1",t.shape.x)("y1",t.shape.y)("x2",e.shape.x)("y2",e.shape.y)("stroke",e.shape.stroke)("stroke-width",1),m(),E(e.getChildren())}}function T8(r,o){if(r&1&&T(0,k8,3,6,null,null,b),r&2){s(3);let e=re(11);E(e.getChildren())}}function E8(r,o){if(r&1&&O(0,T8,2,0),r&2){s(2);let e=re(10),t=re(11);N(t&&t.shape&&e?0:-1)}}function b8(r,o){if(r&1){let e=g();G(),p(0,"g",21),v("onLink",function(i){_(e);let n=s(2);return h(n.linkClicked(i))}),d(),p(1,"g",22),v("onLink",function(i){_(e);let n=s(2);return h(n.linkClicked(i))}),d()}if(r&2){let e=s(2),t=re(10),i=re(11);w("data",i)("current",t)("selected",e.currentLink)("w",e.maxW)("h",e.h())("changeId",e.changeId()),m(),w("data",i)("current",t)("selected",e.currentLink)("w",e.maxW)("h",e.h())("changeId",e.changeId())}}function V8(r,o){if(r&1){let e=g();G(),p(0,"g",26),v("currentChanged",function(i){_(e);let n=s(4);return h(n.onSvgBranchDown(i))}),d()}if(r&2){let e=s(4);w("data",e.branch)("current",e.down)}}function P8(r,o){if(r&1&&O(0,V8,1,2,":svg:g",25),r&2){let e=s(3);N(e.branch?0:-1)}}function F8(r,o){if(r&1){let e=g();G(),p(0,"g",27),v("currentChanged",function(i){_(e);let n=s(3);return h(n.onSvgDown(i))}),d()}if(r&2){let e=s(3),t=re(11);w("data",t)("current",e.down)}}function M8(r,o){if(r&1){let e=g();G(),p(0,"g",28),v("currentChanged",function(i){_(e);let n=s(3);return h(n.onSvgDown(i))}),d()}if(r&2){let e=s(3),t=re(11);w("data",t)("current",e.current())}}function D8(r,o){if(r&1&&O(0,P8,1,1)(1,F8,1,2,":svg:g",23)(2,M8,1,2,":svg:g",24),r&2){let e=s(2);N(e.renderType==="Radially"?0:e.renderType==="Circular"?1:2)}}function I8(r,o){if(r&1){let e=g();G(),p(0,"g",29),v("currentChanged",function(i){_(e);let n=s(2);return h(n.onSvgDown(i))}),d()}if(r&2){let e=s(2),t=re(11);w("root",e.data())("w",e.w())("h",e.h())("data",t)("current",e.current())}}function K8(r,o){if(r&1&&(G(),p(0,"g"),O(1,C8,1,1)(2,E8,1,1)(3,b8,2,12)(4,D8,3,1)(5,I8,1,5,":svg:g",18),d()),r&2){let e=s();P("transform",e.getTransform()),m(),N(e.renderType==="Radially"?1:e.renderType==="Circular"?2:3),m(3),N(e.isPreview()?4:5)}}function B8(r,o){if(r&1){let e=g();p(0,"div",30),v("click",function(){let i=_(e).$implicit,n=s();return h(n.setCurrent(i.ast))}),p(1,"div"),x(2),d()()}if(r&2){let e=o.$implicit;w("title",e.ast==null?null:e.ast.first())("ngStyle",Mr(5,x8,e.y+"px",e.x+"px",e.w+"px",e.h+"px",e.fill,e.stroke)),m(),j("font-size",7,"px"),m(),q(e.ast==null?null:e.ast.tokenType)}}function $8(r,o){r&1&&(p(0,"span",13),x(1,"preview"),d())}function L8(r,o){r&1&&(p(0,"span",13),x(1,"question_answer"),d())}function W8(r,o){r&1&&(p(0,"span",13),x(1,"zoom_in"),d())}function A8(r,o){r&1&&(p(0,"span",13),x(1,"zoom_out"),d())}function O8(r,o){r&1&&(p(0,"span"),x(1,"code"),d())}function z8(r,o){r&1&&(p(0,"span"),x(1,"ad_units"),d())}function N8(r,o){r&1&&(p(0,"span"),x(1,"insights"),d())}function R8(r,o){r&1&&(p(0,"span"),x(1,"tune"),d())}function q8(r,o){r&1&&(p(0,"span"),x(1,"settings_ethernet"),d())}function j8(r,o){r&1&&(p(0,"span"),x(1,"loop"),d())}function U8(r,o){r&1&&(p(0,"span"),x(1,"comment"),d())}function G8(r,o){r&1&&(p(0,"span"),x(1,"bookmark"),d())}function Y8(r,o){r&1&&(p(0,"span"),x(1,"assignment"),d())}function H8(r,o){r&1&&(p(0,"span"),x(1,"equalizer"),d())}function X8(r,o){r&1&&(p(0,"span"),x(1,"keyboard"),d())}function Z8(r,o){r&1&&(p(0,"span"),x(1,"output"),d())}function J8(r,o){r&1&&(p(0,"span"),x(1,"subtitles"),d())}function Q8(r,o){r&1&&(p(0,"span"),x(1,"keyboard_return"),d())}function eN(r,o){r&1&&(p(0,"span"),x(1,"folder"),d())}function tN(r,o){r&1&&(p(0,"span"),x(1,"table_chart"),d())}function iN(r,o){r&1&&(p(0,"span"),x(1,"table_rows"),d())}function nN(r,o){r&1&&(p(0,"span"),x(1,"view_column"),d())}function rN(r,o){r&1&&(p(0,"span"),x(1,"format_list_numbered"),d())}function aN(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function oN(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function sN(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function lN(r,o){r&1&&(p(0,"span"),x(1,"format_list_bulleted"),d())}function cN(r,o){r&1&&(p(0,"span"),x(1,"api"),d())}function pN(r,o){r&1&&(p(0,"span"),x(1,"router"),d())}function dN(r,o){r&1&&(p(0,"span"),x(1,"web"),d())}function uN(r,o){r&1&&(p(0,"span"),x(1,"code"),d())}function mN(r,o){r&1&&(p(0,"span"),x(1,"folder"),d())}function _N(r,o){r&1&&(p(0,"span"),x(1,"insert_drive_file"),d())}function hN(r,o){r&1&&(p(0,"span"),x(1,"call_split"),d())}function fN(r,o){r&1&&(p(0,"span"),x(1,"history"),d())}function yN(r,o){r&1&&(p(0,"span"),x(1,"link"),d())}function vN(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function xN(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function gN(r,o){r&1&&(p(0,"span"),x(1,"send"),d())}function CN(r,o){r&1&&(p(0,"span"),x(1,"hourglass_empty"),d())}function wN(r,o){r&1&&(p(0,"span"),x(1,"call"),d())}function SN(r,o){r&1&&(p(0,"span"),x(1,"group"),d())}function kN(r,o){r&1&&(p(0,"span"),x(1,"stop"),d())}function TN(r,o){r&1&&(p(0,"span"),x(1,"check_circle"),d())}function EN(r,o){r&1&&(p(0,"span"),x(1,"subdirectory_arrow_right"),d())}function bN(r,o){r&1&&(p(0,"span"),x(1,"child_care"),d())}function VN(r,o){r&1&&(p(0,"span"),x(1,"baby_changing_station"),d())}function PN(r,o){r&1&&(p(0,"span"),x(1,"play_arrow"),d())}function FN(r,o){r&1&&(p(0,"span"),x(1,"question_answer"),d())}function MN(r,o){r&1&&(p(0,"span"),x(1,"minimize"),d())}function DN(r,o){if(r&1){let e=g();p(0,"li",35),v("dragstart",function(i){let n=_(e).$implicit,a=s(4);return h(a.startDraggerDrag(i,n.id))}),p(1,"span",36),O(2,O8,2,0,"span",37)(3,z8,2,0,"span",37)(4,N8,2,0,"span",37)(5,R8,2,0,"span",37)(6,q8,2,0,"span",37)(7,j8,2,0,"span",37)(8,U8,2,0,"span",37)(9,G8,2,0,"span",37)(10,Y8,2,0,"span",37)(11,H8,2,0,"span",37)(12,X8,2,0,"span",37)(13,Z8,2,0,"span",37)(14,J8,2,0,"span",37)(15,Q8,2,0,"span",37)(16,eN,2,0,"span",37)(17,tN,2,0,"span",37)(18,iN,2,0,"span",37)(19,nN,2,0,"span",37)(20,rN,2,0,"span",37)(21,aN,2,0,"span",37)(22,oN,2,0,"span",37)(23,sN,2,0,"span",37)(24,lN,2,0,"span",37)(25,cN,2,0,"span",37)(26,pN,2,0,"span",37)(27,dN,2,0,"span",37)(28,uN,2,0,"span",37)(29,mN,2,0,"span",37)(30,_N,2,0,"span",37)(31,hN,2,0,"span",37)(32,fN,2,0,"span",37)(33,yN,2,0,"span",37)(34,vN,2,0,"span",37)(35,xN,2,0,"span",37)(36,gN,2,0,"span",37)(37,CN,2,0,"span",37)(38,wN,2,0,"span",37)(39,SN,2,0,"span",37)(40,kN,2,0,"span",37)(41,TN,2,0,"span",37)(42,EN,2,0,"span",37)(43,bN,2,0,"span",37)(44,VN,2,0,"span",37)(45,PN,2,0,"span",37)(46,FN,2,0,"span",37)(47,MN,2,0,"span",37),d(),p(48,"span"),x(49),d(),p(50,"span",36),x(51,"drag_indicator"),d()()}if(r&2){let e=o.$implicit;s(2);let t=re(0);w("draggable",!0),P("data-id",e.id)("data-type",e.tokenType),m(2),w("ngIf",e.isAGENT()),m(),w("ngIf",e.isIF()),m(),w("ngIf",e.isELSEIF()),m(),w("ngIf",e.isSWITCH()),m(),w("ngIf",e.isCASE()),m(),w("ngIf",e.isREPEATERS()),m(),w("ngIf",e.isREM()),m(),w("ngIf",e.isDECLARE()),m(),w("ngIf",e.isASSIGN()),m(),w("ngIf",e.isCALL()),m(),w("ngIf",e.isIN()),m(),w("ngIf",e.isOUT()),m(),w("ngIf",e.isPARAM()),m(),w("ngIf",e.isRETURN()),m(),w("ngIf",e.isPROJECT()),m(),w("ngIf",e.isSCHEMA()),m(),w("ngIf",e.isTABLE()),m(),w("ngIf",e.isCOLUMN()),m(),w("ngIf",e.isENUM()),m(),w("ngIf",e.isVALUE()),m(),w("ngIf",e.isSEED()),m(),w("ngIf",e.isRECORD()),m(),w("ngIf",e.isFIELD()),m(),w("ngIf",e.isAPI()),m(),w("ngIf",e.isROUTE()),m(),w("ngIf",e.isPAGE()),m(),w("ngIf",e.isCODE()),m(),w("ngIf",e.isFOLDER()),m(),w("ngIf",e.isFILE()),m(),w("ngIf",e.isBRANCH()),m(),w("ngIf",e.isHISTORY()),m(),w("ngIf",e.isLINK()),m(),w("ngIf",e.isDISPATCH()),m(),w("ngIf",e.isACTION()),m(),w("ngIf",e.isEVENT()),m(),w("ngIf",e.isAWAIT()),m(),w("ngIf",e.isCALL()),m(),w("ngIf",e.isPAIR()),m(),w("ngIf",e.isEND()),m(),w("ngIf",e.isPICK()),m(),w("ngIf",e.isSUB()),m(),w("ngIf",e.isCHILD()),m(),w("ngIf",e.isINFANT()),m(),w("ngIf",e.isINVOKE()),m(),w("ngIf",e.isPROMPT()),m(),w("ngIf",e.isLINE()),m(2),xe("",t.tokenType," ",e.tokenType,"")}}function IN(r,o){if(r&1&&(p(0,"ul"),T(1,DN,52,51,"li",34,b),d()),r&2){let e=s(3);j("max-height",230,"px")("overflow-y","auto"),m(),E(e.uniqueDraggers())}}function KN(r,o){if(r&1&&(Ce(0),O(1,IN,3,4,"ul",33)),r&2){let e=ge(s(2).current());m(),N(e&&e.keyValue().length>0?1:-1)}}function BN(r,o){if(r&1&&Z(0,"next-tree",40),r&2){let e=o.$implicit,t=s(3);w("data",e)("level",0)("selecteds",t.selecteds)}}function $N(r,o){if(r&1){let e=g();p(0,"context-menu",38),v("onClone",function(){_(e);let i=s(2),n=re(10);return h(i.cloneCurrent(n))})("onDelete",function(){_(e);let i=s(2),n=re(10);return h(i.deleteCurrent(n))})("onAdd",function(){_(e);let i=s(2),n=re(10);return h(i.onAddSelected(n))})("onClose",function(){_(e);let i=s(2);return h(i.closeContextMenu())}),O(1,BN,1,3,"next-tree",39),d()}if(r&2){let e=s(2),t=re(10);w("w",250)("position","")("h",300)("label",t.tokenType)("addLabel","selected"),m(),w("ngForOf",e.draggers)}}function LN(r,o){if(r&1&&(p(0,"h4"),x(1),d()),r&2){s(2);let e=re(10);m(),V("cannot add to ",e.tokenType,", check next")}}function WN(r,o){r&1&&(p(0,"h4"),x(1,"Nothing to add"),d())}function AN(r,o){if(r&1&&Z(0,"next-tree",40),r&2){let e=o.$implicit,t=s(3);w("data",e)("level",0)("selecteds",t.selecteds)}}function ON(r,o){if(r&1){let e=g();p(0,"context-menu",38),v("onClone",function(){_(e);let i=s(2),n=re(10);return h(i.cloneCurrent(n))})("onDelete",function(){_(e);let i=s(2),n=re(10);return h(i.deleteCurrent(n))})("onAdd",function(){_(e);let i=s(2),n=re(10);return h(i.addNext(n))})("onClose",function(){_(e);let i=s(2);return h(i.closeContextMenu())}),O(1,AN,1,3,"next-tree",39),d()}if(r&2){let e=s(2),t=re(10);w("w",250)("position","")("h",300)("label",t.tokenType)("addLabel","add next"),m(),w("ngForOf",e.altDraggers)}}function zN(r,o){r&1&&(p(0,"h4"),x(1,"Nothing to add"),d())}function NN(r,o){if(r&1&&(p(0,"div",15)(1,"tabs")(2,"tab",31),O(3,KN,2,2),d(),p(4,"tab",31),O(5,$N,2,6,"context-menu",32)(6,LN,2,1,"h4")(7,WN,2,0,"h4"),d(),p(8,"tab",31),O(9,ON,2,6,"context-menu",32)(10,zN,2,0,"h4"),d()()()),r&2){let e=s();m(2),w("label","Dragger"),m(),N(e.current()?3:-1),m(),w("label","Root"),m(),N(e.draggers.length>0?5:e.altDraggers.length>0?6:7),m(3),w("label","Next"),m(),N(e.altDraggers.length>0?9:10)}}function RN(r,o){if(r&1){let e=g();p(0,"button",42),v("click",function(){let i=_(e).$implicit,n=s(2);return h(n.setFilter(i))}),p(1,"div",43),x(2),d()()}if(r&2){let e=o.$implicit;s(2);let t=re(11);S("active",e===t),m(2),V(" ",e.getValue("Key")," ")}}function qN(r,o){if(r&1&&T(0,RN,3,3,"button",41,b),r&2){let e=s();E(e.filters())}}function jN(r,o){if(r&1){let e=g();p(0,"div",17)(1,"tabs")(2,"tab",31)(3,"div",44)(4,"div")(5,"label",45),x(6,"StartX"),d(),p(7,"input",46),D("ngModelChange",function(i){_(e);let n=s();return M(n.startx,i)||(n.startx=i),h(i)}),d()(),p(8,"div")(9,"label",47),x(10,"StartY"),d(),p(11,"input",48),D("ngModelChange",function(i){_(e);let n=s();return M(n.starty,i)||(n.starty=i),h(i)}),d()(),p(12,"div")(13,"label",49),x(14,"OffsetW"),d(),p(15,"input",50),D("ngModelChange",function(i){_(e);let n=s();return M(n.offW,i)||(n.offW=i),h(i)}),d()(),p(16,"div")(17,"label",51),x(18,"OffsetH"),d(),p(19,"input",52),D("ngModelChange",function(i){_(e);let n=s();return M(n.offH,i)||(n.offH=i),h(i)}),d()(),p(20,"button",53),v("click",function(){_(e);let i=s();return h(i.partialLayout())}),x(21,"Apply"),d()()(),p(22,"tab",31)(23,"div",54)(24,"button",55),v("mousedown",function(i){_(e);let n=s();return h(n.startRepeating(i,"Up"))})("mouseup",function(){_(e);let i=s();return h(i.stopRepeating())}),p(25,"span",13),x(26,"south"),d()(),p(27,"button",56),v("mousedown",function(i){_(e);let n=s();return h(n.startRepeating(i,"Right"))})("mouseup",function(){_(e);let i=s();return h(i.stopRepeating())}),p(28,"span",13),x(29,"west"),d()(),p(30,"button",57),v("click",function(){_(e);let i=s();return h(i.resetPan())}),p(31,"span",13)(32,"span"),x(33,"explore"),d()()(),p(34,"button",58),v("mousedown",function(i){_(e);let n=s();return h(n.startRepeating(i,"Left"))})("mouseup",function(){_(e);let i=s();return h(i.stopRepeating())}),p(35,"span",13),x(36,"east"),d()(),p(37,"button",59),v("mousedown",function(i){_(e);let n=s();return h(n.startRepeating(i,"Down"))})("mouseup",function(){_(e);let i=s();return h(i.stopRepeating())}),p(38,"span",13),x(39,"north"),d()()(),p(40,"div",60)(41,"label",61),x(42,"Scale"),d(),p(43,"input",62),D("ngModelChange",function(i){_(e);let n=s();return M(n.scale,i)||(n.scale=i),h(i)}),d(),p(44,"label",63),x(45,"Tx"),d(),p(46,"input",64),D("ngModelChange",function(i){_(e);let n=s();return M(n.tx,i)||(n.tx=i),h(i)}),d(),p(47,"label",65),x(48,"Ty"),d(),p(49,"input",66),D("ngModelChange",function(i){_(e);let n=s();return M(n.ty,i)||(n.ty=i),h(i)}),d(),p(50,"button",53),v("click",function(){_(e);let i=s();return h(i.updateViewPort())}),x(51,"Apply"),d()()()()()}if(r&2){let e=s();m(2),w("label","OFFSETS"),m(5),F("ngModel",e.startx),w("min",20)("max",200)("title",e.startx()),m(4),F("ngModel",e.starty),w("min",20)("max",200)("title",e.starty()),m(4),F("ngModel",e.offW),w("min",20)("max",100)("title",e.offW()),m(4),F("ngModel",e.offH),w("min",20)("max",100)("title",e.offH()),m(3),w("label","SCALE"),m(2),w("title",e.scale()),m(3),w("title",e.scale()),m(3),w("title",e.scale()),m(4),w("title",e.scale()),m(3),w("title",e.scale()),m(6),F("ngModel",e.scale),w("min",.1)("max",2)("title",e.scale()),P("step",e.zoomStep()),m(3),F("ngModel",e.tx),w("min",-200)("max",200)("title",e.tx()),m(3),F("ngModel",e.ty),w("min",-200)("max",200)("title",e.ty())}}var MOe=(()=>{let o=class o{constructor(){this.data=L.required(),this.current=L(void 0),this.w=L(111),this.h=L(111),this.changeId=R(1),this.startx=R(80),this.starty=R(122),this.offW=R(66),this.offH=R(22),this.isPreview=R(!0),this.pannable=R(!0),this.scale=R(1),this.tx=R(0),this.ty=R(0),this.zoomStep=R(.1),this.minZoom=R(.1),this.maxZoom=R(10),this.permanentContextMenu=R(!1),this.isPanDown=!1,this.beginX=0,this.beginY=0,this.Depth=22,this.diamondDepthRatio=.5,this.begin=0,this.end=0,this.canPan=R(!0),this.isRubberOn=!1,this.bandRect={x:444,y:30,w:80,h:80},this.branch=new oe,this.lastLayout="",this.isBoxItems=R(!1),this.renderType="",this.itemChanged=Ae(),this.rootUpdated=Ae(),this.lineHeight=14,this.fontSize=15,this.isContextMenuVisible=R(!1),this.contextMenuPosition=R({x:0,y:0}),this.maxW=window.innerWidth,this.maxH=window.innerHeight,this.filtered=R(void 0),this.draggers=[],this.altDraggers=[],this.selecteds=[],this.filters=me(()=>{let t=[];t.push(this.data());for(let i of this.data().getChildren())i.needsEnd&&t.push(i);return t}),this.uniqueDraggers=R([]),this.dragOver=t=>{t.preventDefault(),t.stopPropagation()},this.dropped=t=>{t.preventDefault();let i=t.dataTransfer?.getData("text/plain");if(!i){alert("Invalid Drag");return}let a=this.uniqueDraggers().find(u=>u.id===i);if(!a){alert("Not found");return}let c=this.current();if(!c){alert("No current");return}let l;if(We.canAdd(c,a))l=We.clone(a),c.addChild(l),this.setCurrent(l);else{let u=c.parent;if(u){let f=u.getChildren().indexOf(c),C=u.getChildren()[f+1];l=We.clone(a),C?u.addChildBefore(l,C):u.addChild(l)}}l&&(this.setCurrent(l),this.partialLayout()),this.removeDragListeners()},this.onRubberBandMove=t=>{var i=t.clientX,n=t.clientY;this.bandRect.w=i-this.bandRect.x,this.bandRect.h=n-this.bandRect.y},this.onRubberBandEnd=t=>{document.removeEventListener("mousemove",this.onRubberBandMove),document.removeEventListener("mouseup",this.onRubberBandEnd),this.isRubberOn=!1,this.selectNodesInBand()},this.branches=[],this.currentBranch=new oe,this.onSvgBranchDown=t=>{let i=t.e,n=t.data;if(!n){alert("No data");return}if(!i){alert("No event");return}i.stopPropagation(),this.down=n,n.from?this.setCurrent(n.from):this.draggers=[],this.startDrag(i),window.addEventListener("touchmove",this.onSvgBranchDownMove),window.addEventListener("pointermove",this.onSvgBranchDownMove),window.addEventListener("touchend",this.onSvgBranchDownUp),window.addEventListener("pointerup",this.onSvgBranchDownUp)},this.onSvgBranchDownMove=t=>{t.stopPropagation();let{dx:i,dy:n}=this.getDragDelta(t);this.moveGroup(this.down,i,n)},this.onSvgBranchDownUp=t=>{t.stopPropagation(),window.removeEventListener("touchmove",this.onSvgBranchDownMove),window.removeEventListener("pointermove",this.onSvgBranchDownMove),window.removeEventListener("touchend",this.onSvgBranchDownUp),window.removeEventListener("pointerup",this.onSvgBranchDownUp),this.changeId.update(i=>i+1),this.endDrag()},this.onSvgDown=t=>{this.setCurrent(t.data),t.e&&(this.startDrag(t.e),window.addEventListener("touchmove",this.onSvgMove),window.addEventListener("pointermove",this.onSvgMove),window.addEventListener("touchend",this.onSvgUp),window.addEventListener("pointerup",this.onSvgUp),this.changeId.update(i=>i+1))},this.onSvgMove=t=>{t.stopPropagation();let i=this.current();if(!i)return;let{dx:n,dy:a}=this.getDragDelta(t);this.moveAst(i,n,a),this.changeId.update(c=>c+1)},this.onSvgUp=t=>{t.stopPropagation(),window.removeEventListener("touchmove",this.onSvgMove),window.removeEventListener("pointermove",this.onSvgMove),window.removeEventListener("touchend",this.onSvgUp),window.removeEventListener("pointerup",this.onSvgUp);let i=this.current();if(this.draggers.length>0&&i&&i.needsEnd){let n=i.shape.x+i.shape.width+20,a=i.shape.y+i.shape.height/2}else this.isContextMenuVisible.set(!1);this.endDrag(),this.changeId.update(n=>n+1)},this.minis=R(Array()),this.panNonPanStyle=me(()=>this.canPan()?{cursor:"grab",width:this.w(),height:this.h()}:{cursor:"default",width:this.maxW+200,height:this.maxH}),this.onPan=t=>{if(t.stopPropagation(),!this.isPanDown)return;let i=t.clientX-this.beginX,n=t.clientY-this.beginY;this.tx.update(a=>a+i),this.ty.update(a=>a+n),this.beginX=t.clientX,this.beginY=t.clientY},this.onPanUp=t=>{t.stopPropagation(),t.preventDefault(),this.isPanDown=!1,window.removeEventListener("pointermove",this.onPan),window.removeEventListener("pointerup",this.onPanUp)},this.pannable.set(!0),this.maxW=this.w(),this.maxH=this.h()}ngOnChanges(t){if(t.data&&t.data.currentValue)if(this.data().getChildren().length)this.doLayout();else return;if(t.current){let i=t.current;if(i.currentValue)if(this.data().getChildren().length)i.currentValue!==i.previousValue&&this.setCurrent(i.currentValue);else return}}linkClicked(t){this.currentLink=t.data;let i=t.data,n=t.e;i.from&&(this.setCurrent(i.from),this.draggers.length>0?this.contextMenuPosition.set({x:n.clientX,y:n.clientY}):this.isContextMenuVisible.set(!1))}toggleEditPreview(){this.isPreview.set(!this.isPreview()),this.partialLayout()}togglePermanentC0ntextMenu(){this.permanentContextMenu.set(!this.permanentContextMenu())}toggleBoxItems(){this.isBoxItems.set(!this.isBoxItems())}setFilter(t){this.filtered.set(t),this.setCurrent(t),this.doLayout()}setCurrent(t){t.isExpanded||(t.isExpanded=!t.isExpanded),t.isExpanded&&t.parent&&(t.parent.isExpanded=!0,t.parent.parent&&(t.parent.parent.isExpanded=!0)),this.itemChanged.emit(t),this.draggers=this.getDraggers(t),this.selecteds=[],this.draggers.length>0?this.altDraggers=[]:this.altDraggers=this.getAlternatives(t);let i=[];for(let n of this.draggers)i.includes(n)||i.push(n);for(let n of this.altDraggers)i.includes(n)||i.push(n);i.length>0&&this.uniqueDraggers.set(i),this.handle=new Hi,this.handle.setFrom(t),this.changeId.update(n=>n+1)}doUpdate(){this.changeId.update(t=>t+1)}doSomething(t){this.maxW=t.maxW,this.maxH=t.maxH,this.updateViewPort()}updateViewPort(){let t=this.filtered();if(t){let n=new Array,a=t.flatten(),c=0,l=0;for(let f of a)f.shape.x>c&&(c=f.shape.x),f.shape.y>l&&(l=f.shape.y);let u=Math.min(130/c,130/l);for(let f of a){var i=new ln;i.x=(f.shape.x-this.startx())*u,i.y=(f.shape.y-this.starty())*u,i.w=f.shape.width*u,i.h=f.shape.height*u,i.ast=f,i.fill=f.shape.fill,i.stroke=f.shape.stroke,i.text=f.shape.text,n.push(i)}this.minis.set(n)}this.changeId.update(n=>n+1)}toggleRender(){this.renderType==="Flow"?this.renderType="TopBottom":this.renderType==="TopBottom"?this.renderType="PseudoCode":this.renderType==="PseudoCode"?this.renderType="Grid":this.renderType==="Grid"?this.renderType="LeftRight":this.renderType==="LeftRight"?this.renderType="Circular":this.renderType==="Circular"?this.renderType="Tree":this.renderType==="Tree"?this.renderType="Radially":this.renderType==="Radially"?this.renderType="Flow":this.renderType="TopBottom",this.isPreview()||(this.renderType==="Radially"?this.renderType="Flow":this.renderType==="Circular"&&(this.renderType="Tree")),this.partialLayout()}partialLayout(){let t=this.filtered();if(t)if(this.isPreview()){if(this.renderType==="Radially"){t.createBranches(),t.placeRadially(this.w(),this.h());let i=t.flatten();fe.SetThemeColors(i,"AppTheme");let n=this.w,a=this.h;for(let c of i){for(let l of c.groups)l.from&&(l.shape.fill=l.from.shape.fill,l.shape.stroke=l.from.shape.stroke,l.shape.textColor=l.from.shape.textColor);this.maxW=Math.max(this.w(),c.shape.x+c.shape.width),this.maxH=Math.max(this.h(),c.shape.y+c.shape.height)}n<this.w&&(n=this.w),a<this.h&&(a=this.h),this.maxW+=30,this.maxH+=30,this.branch=t.groups[0],this.branch&&(this.branch.heading=t.first()),this.changeId.update(c=>c+1)}else{let i=this.layoutAst(t);i.block&&(this.branch=i.block),this.doSomething(i)}this.doUpdate()}else{let i=this.filtered();if(!i){let c=this.data();if(c)this.filtered.set(c),i=c;else{let l=this.current();l&&(this.filtered.set(l),i=l)}}let n=i;if(!n)return;let a=this.layoutAst(n);this.doSomething(a)}}doLayout(){let t=this.filtered();if(!t){let n=this.data();if(this.lastLayout="",n)this.filtered.set(n),t=n,this.lastLayout="";else{this.lastLayout="";let a=this.current();a&&(this.filtered.set(a),t=a)}}let i=t;if(i){if(this.doUpdate(),i.id===this.lastLayout){this.partialLayout();return}if(i.keyValue().length&&i.tokenType!==ue.NotSet)if(this.lastLayout=i.id,i.tokenType==="PROJECT"?this.renderType="Circular":i.tokenType==="SCHEMA"?this.renderType="Radially":i.tokenType==="TABLE"?this.renderType="Radially":i.tokenType==="COLUMN"?this.renderType="Radially":i.tokenType==="ENUM"?this.renderType="Radially":i.tokenType==="VALUE"?this.renderType="Radially":i.tokenType==="SEED"?this.renderType="Circular":i.tokenType==="RECORD"?this.renderType="Radially":i.tokenType==="FIELD"?this.renderType="Radially":i.tokenType==="API"?this.renderType="Circular":i.tokenType==="ROUTE"?this.renderType="Radially":i.tokenType==="DESIGN"?this.renderType="Circular":i.tokenType==="PAGE"?this.renderType="Radially":i.tokenType==="AGENT"?this.renderType="PseudoCode":i.tokenType==="PLAN"?this.renderType="PseudoCode":i.tokenType==="INVOKE"?this.renderType="PseudoCode":i.tokenType==="LINE"?this.renderType="Radially":i.tokenType==="PROMPT"?this.renderType="Flow":navigator.clipboard.writeText(`else if( _data.tokenType === '${i.tokenType}'){
        this.renderType = ('Radially');
      }`),!this.isPreview())this.partialLayout();else if(this.renderType==="Radially"){i.createBranches(),i.placeRadially(this.w(),this.h());let n=i.flatten();fe.SetThemeColors(n,"AppTheme");let a=this.w,c=this.h;for(let l of n){for(let u of l.groups)u.from&&(u.shape.fill=u.from.shape.fill,u.shape.stroke=u.from.shape.stroke,u.shape.textColor=u.from.shape.textColor);this.maxW=Math.max(this.w(),l.shape.x+l.shape.width),this.maxH=Math.max(this.h(),l.shape.y+l.shape.height)}a<this.w&&(a=this.w),c<this.h&&(c=this.h),this.maxW+=30,this.maxH+=30,this.branch=i.groups[0],this.branch&&(this.branch.heading=i.first())}else{let n=this.layoutAst(i);n.block&&(this.branch=n.block),this.doSomething(n)}}}startDraggerDrag(t,i){if(i||alert("No id for "),!!this.current()){if(!this.uniqueDraggers().length){alert("No unique draggers");return}t.stopPropagation(),t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="copy",t.dataTransfer.setData("text/plain",i),document.addEventListener("dragover",this.dragOver),document.addEventListener("drop",this.dropped)}}removeDragListeners(){document.removeEventListener("dragover",this.dragOver),document.removeEventListener("drop",this.dropped)}startRepeating(t,i){this.intervalId=setInterval(()=>{this.pan(t,i)},100)}stopRepeating(){clearInterval(this.intervalId)}pan(t,i){switch(i){case"Up":this.ty.update(n=>n-=10);break;case"Down":this.ty.update(n=>n+=10);break;case"Left":this.tx.update(n=>n-=10);break;case"Right":this.tx.update(n=>n+=10);break}}resetPan(){this.tx.set(0),this.ty.set(0)}handleMoved(t){if(t&&t.model&&t.model){let i=this.filtered();if(!i)return;let n=t.model,a=i.flatten(),c=!1;for(let l of a){if(c)break;if(n!==l&&this.isNear(l,t.ex,t.ey,20)){let f=n.getValue("Key"),C=l.keyValue();for(let y of C)if(y.type==="Keys"&&y.value){if(y.value.split(",").includes(f))return;y.value+=","+f,c=!0,l.updateKevValue([y]),this.rootUpdated.emit({root:this.data(),crnt:l}),this.handle=void 0;break}}}}}isNear(t,i,n,a){var c=t.shape.x-a,l=t.shape.y-a,u=t.shape.x+t.shape.width+a,f=t.shape.y+t.shape.height+a;return i>=c&&i<=u&&n>=l&&n<=f}toggleRubberBand(t){this.isRubberOn=!this.isRubberOn,this.isRubberOn||this.unSelectNodes()}unSelectNodes(){this.selecteds=new Array,this.bandRect={x:444,y:30,w:80,h:80}}rubberBand(t){this.isRubberOn&&t.buttons===1&&(this.bandRect.x=t.clientX,this.bandRect.y=t.clientY,this.bandRect.w=4,this.bandRect.h=4,document.addEventListener("mousemove",this.onRubberBandMove),document.addEventListener("mouseup",this.onRubberBandEnd))}selectBranch(t){this.currentBranch=t}branchBodyChanged(t){t!==null&&this.currentBranch&&this.selectBranchBody()}selectBranchBody(){let t=this.filtered();if(t){var i=t.flatten();if(!this.currentBranch){alert("no current unit");return}}}addRemoveClear(t){switch(t){case"add":let i=new oe;i.shape.x=this.bandRect.x-40,i.shape.y=this.bandRect.y+40,i.shape.width=this.bandRect.w+40,i.shape.height=this.bandRect.h+40;for(let n of this.selecteds)i.addChild(n);this.branches.push(i),this.selectBranch(i),this.unSelectNodes();break;case"remove":this.selecteds=this.selecteds.filter(n=>!this.branches.includes(n));break;case"clear":this.unSelectNodes();break}}selectNodesInBandChanged(t){this.bandRect=t,this.selecteds=[],this.selectNodesInBand()}selectNodesInBand(){let t=this.filtered();if(t){var i=t.flatten();this.selecteds=new Array;var n=3;for(let a of i)a.isLINK()||a.isBRANCH()||this.isNodeInsideBand(a,this.bandRect,n)&&this.selecteds.push(a)}}isNodeInsideBand(t,i,n){var a=t.shape.x,c=t.shape.y,l=t.shape.x+t.shape.width,u=t.shape.y+t.shape.height,f=!1;return(a>i.x-n&&a<i.x+i.w+n&&c>i.y-n&&c<i.y+i.h+n||l>i.x-n&&l<i.x+i.w+n&&c>i.y-n&&c<i.y+i.h+n)&&(f=!0),f}closeContextMenu(){this.isContextMenuVisible.set(!1),this.draggers=[]}moveAst(t,i,n){if(t.shape.x+=i,t.shape.y+=n,t.parent){let c=t.parent.getChildren(),l=c.indexOf(t);for(let u of c)u===t||c.indexOf(u)<l||u.move(i,n)}let a=0;t.getChildren().forEach(c=>{c.move(i,n)}),this.updateViewPort()}moveGroup(t,i,n){t.shape.x+=i,t.shape.y+=n,t.groups.forEach(a=>{a.move(i,n)})}layoutAst(t){let i,n=0,a=0,c=t.flatten(),l=this.renderType,u=0,f=0;if(this.isPreview()){for(let C of c){let y=C.keyValue().filter(k=>k.value),B=Math.max(...y.map(k=>k.value?k.value.length:2+k.key.length));C.shape.x=10,C.shape.y=10,y.length>0?(C.shape.width=Math.max(B*this.fontSize,100),C.shape.height=Math.max(y.length*this.lineHeight,42),u=Math.max(u,C.shape.width),f=Math.max(f,C.shape.height),C.shape.width>362&&(C.shape.width=361),C.shape.width<200&&(C.shape.width=201)):(C.shape.width=42,C.shape.height=42)}l==="Radially"?(t.placeRadially(this.w(),this.h()),i=t.groups[0],i.heading=t.first()):fe.renderShape(c,t,l,this.startx(),this.starty(),this.w(),this.offW(),this.offH()),fe.SetThemeColors(c,"Random")}else{for(let C of c)C.tokenType===ue.PLAN?(C.shape.width=200,C.shape.height=229):C.tokenType===ue.AGENT?(C.shape.width=239,C.shape.height=248):C.tokenType===ue.DECLARE?(C.shape.width=274,C.shape.height=413):C.tokenType===ue.IN?(C.shape.width=258,C.shape.height=264):C.tokenType===ue.PROMPT?(C.shape.width=257,C.shape.height=384):C.tokenType===ue.LINE?(C.shape.width=270,C.shape.height=521):C.tokenType===ue.WHILE?(C.shape.width=256,C.shape.height=390):C.tokenType===ue.INVOKE?(C.shape.width=318,C.shape.height=548):C.tokenType===ue.OUT?(C.shape.width=256,C.shape.height=390):(C.shape.width=200,C.shape.height=400);fe.renderShape(c,t,this.renderType,this.startx(),this.starty(),this.w(),this.offW(),this.offH()),fe.SetThemeColors(c,"Random")}for(let C of c){for(let y of C.groups)y.from&&(y.shape.fill=y.from.shape.fill,y.shape.stroke=y.from.shape.stroke,y.shape.textColor=y.from.shape.textColor);n=Math.max(n,C.shape.x+C.shape.width+22),a=Math.max(a,C.shape.y+C.shape.height+22)}n<this.w()&&(n=this.w()),a<this.h()&&(a=this.h()),n+=30,a+=30;for(let C of c)this.assignPath(C);return{maxW:n,maxH:a,block:i}}reFlowCurrent(t){!t.needsEnd&&t.parent&&(t=t.parent);let i=t.flatten();for(let c of i){let l=c.keyValue(),u=Math.max(...l.map(f=>f.value?f.value.length:4+f.key.length));l.length>0?(c.shape.width=Math.max(u*this.fontSize*1.3,100),c.shape.height=Math.max(l.length*this.lineHeight*1.2,42)):(c.shape.width=42,c.shape.height=42)}for(let c of i)this.assignPath(c);let n=t.shape.x,a=t.shape.y}assignPath(t){let i=t.shape,n=i.width,a=i.height,c=1,l=1,u="";switch(t.shapeType?t.shapeType.toLowerCase():"rectangle"){case"diamond":u=this.createDiamondPath(c,l,n,a);break;case"parallelogram":u=this.createParallelogramPath(c,l,n,a);break;case"polygon":u=this.createPolygonPath(c,l,n,a);break;case"triangle":u=this.createTrianglePath(c,l,n,a);break;case"trapezoid":u=this.createTrapezoidPath(c,l,n,a);break;case"hexagon":u=this.createHexagonPath(c,l,n,a);break;case"pentagon":u=this.createPentagonPath(c,l,n,a);break;case"octagon":u=this.createOctagonPath(c,l,n,a);break;case"star":u=this.createStarPath(c,l,n,a);break;case"tetragram":u=this.createTetragramPath(c,l,n,a);break;case"rhombus":u=this.createRhombusPath(c,l,n,a);break;case"bot":u=this.createBotPath(c,l,n,a);break;case"run":u=this.createRunPath(c,l,n,a);break;case"circle":case"ellipse":u=this.createEllipsePath(c,l,n,a);break;case"line":u=this.createLinePath(c,l,n,a);break;default:u=this.createRectanglePath(c,l,n,a)}i.pathData=u}createDiamondPath(t,i,n,a){let c=a*this.diamondDepthRatio;return`M${t} ${i+a/2} L${t+n/2} ${i-c} L${t+n} ${i+a/2} L${t+n/2} ${i+a+c} Z`}createParallelogramPath(t,i,n,a){return`M${t} ${i} L${t+n-this.Depth} ${i} L${t+n} ${i+a} L${t+this.Depth} ${i+a} Z`}createPolygonPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n} ${i+a/3} L${t+n*3/4} ${i+a} L${t+n/4} ${i+a} L${t} ${i+a/3} Z`}createTrianglePath(t,i,n,a){return`M${t} ${i+a} L${t+n/2} ${i} L${t+n} ${i+a} Z`}createTrapezoidPath(t,i,n,a){return`M${t} ${i} L${t+n} ${i} L${t+n-this.Depth} ${i+a} L${t+this.Depth} ${i+a} Z`}createHexagonPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n} ${i+a/3} L${t+n} ${i+a*2/3} L${t+n/2} ${i+a} L${t} ${i+a*2/3} L${t} ${i+a/3} Z`}createPentagonPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n} ${i+a/3} L${t+n*3/4} ${i+a} L${t+n/4} ${i+a} L${t} ${i+a/3} Z`}createOctagonPath(t,i,n,a){return`M${t+n/3} ${i} L${t+n*2/3} ${i} L${t+n} ${i+n/3} L${t+n} ${i+n*2/3} L${t+n*2/3} ${i+n} L${t+n/3} ${i+n} L${t} ${i+n*2/3} L${t} ${i+n/3} Z`}createStarPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n*2/3} ${i+a/3} L${t+n} ${i+a/3} L${t+n*3/4} ${i+a*2/3} L${t+n*5/6} ${i+a} L${t+n/2} ${i+a*2/3} L${t+n/6} ${i+a} L${t+n/4} ${i+a*2/3} L${t} ${i+a/3} L${t+n/3} ${i+a/3} Z`}createTetragramPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n} ${i+a/3} L${t+n*3/4} ${i+a} L${t+n/4} ${i+a} L${t} ${i+a/3} Z`}createRhombusPath(t,i,n,a){return`M${t+n/2} ${i} L${t+n} ${i+a/2} L${t+n/2} ${i+a} L${t} ${i+a/2} Z`}createBotPath(t,i,n,a){let c=`M${t} ${i} L${t+n} ${i} L${t+n} ${i+a} L${t} ${i+a} Z`,l=`M${t} ${i} L${t+n/2} ${i-this.Depth} L${t+n} ${i} Z`;return c+" "+l}createRunPath(t,i,n,a){return`M${t} ${i} L${t+n} ${i+a/2} L${t} ${i+a} L${t} ${i+a/2} Z`}createRectanglePath(t,i,n,a){return`M${t} ${i} L${t+n} ${i} L${t+n} ${i+a} L${t} ${i+a} Z`}createEllipsePath(t,i,n,a){return`M${t+n/2} ${i} A${n/2} ${a/2} 0 1 0 ${t+n/2} ${i+a} A${n/2} ${a/2} 0 1 0 ${t+n/2} ${i}`}createLinePath(t,i,n,a){return`M${t} ${i} L${t+n} ${i+a}`}getDraggers(t){return We.getNext(t).getChildren()}getAlternatives(t){return t.parent?We.getNext(t.parent).getChildren():[]}cloneCurrent(t){let i=We.clone(t);if(i.id=fe.newid(),i.updateKevValue(t.keyValue()),t.parent){i.parent=t.parent;let n=t.parent.getChildren().indexOf(t);t.parent.insertChild(n+1,i),this.rootUpdated.emit({root:this.data(),crnt:i})}}addNext(t){for(let i of this.selecteds){let n=We.clone(i);if(n.id=fe.newid(),t.parent){n.parent=t.parent;let a=t.parent.getChildren().indexOf(t);t.parent.insertChild(a+1,n),this.rootUpdated.emit({root:this.data(),crnt:n})}}}onAddSelected(t){this.selecteds.length>0&&this.addAsts(this.selecteds,t),this.selecteds=[],this.closeContextMenu()}deleteCurrent(t){let i=this.deleteAst(t);i&&this.rootUpdated.emit({root:this.data(),crnt:i})}deleteAst(t){if(t){let i=t.parent;return i&&i.removeChild(t),i}return null}updateData(t){this.rootUpdated.emit({root:this.data(),crnt:t})}addAsts(t,i){for(let n of t){if(n.index===-1||n.index===0){alert("index is 0 or -1");continue}let a=n.index||0;for(let c=0;c<a;c++)this.recursiveAddAst(n,i);this.reFlowCurrent(n)}}recursiveAddAst(t,i){try{let n=We.clone(t);if(!n){alert("failed to clone");return}n.parent=i,i.addChild(n)}catch(n){alert("failed to add ast"+n)}}togglePannable(t){this.togglePanMode(t),this.canPan.set(this.pannable())}resetScale(){this.scale.set(1),this.tx.set(0),this.ty.set(0)}togglePanMode(t){t.preventDefault(),t.stopPropagation(),this.pannable.set(!this.pannable()),this.pannable()||(this.tx.set(0),this.ty.set(0),this.scale.set(1))}onPanDown(t){if(t.stopPropagation(),this.changeId.update(i=>i+1),!this.canPan()){let i=this.current();i?(this.bandRect.x=i.shape.x-150,this.bandRect.y=i.shape.y-50):(this.bandRect.x=t.clientX,this.bandRect.y=t.clientY);return}t.button!==2&&(this.isContextMenuVisible.set(!1),!(this.isPanDown||t.button!==0)&&(this.beginX=t.clientX,this.beginY=t.clientY,this.isPanDown=!0,window.addEventListener("pointermove",this.onPan),window.addEventListener("pointerup",this.onPanUp)))}onWheel(t){if(!t.shiftKey){let i=t.deltaY>0?this.scale()*(1-this.zoomStep()):this.scale()*(1+this.zoomStep());i>=this.minZoom()&&i<=this.maxZoom()&&this.scale.update(n=>i)}}getViewBox(){return this.pannable()?`${-this.tx()} ${-this.ty()} ${this.maxW} ${this.maxH}`:"0"}getTransform(){return this.pannable()?`scale(${this.scale()})`:"scale(1)"}startDrag(t){t instanceof TouchEvent?(this.beginX=t.touches[0].clientX,this.beginY=t.touches[0].clientY):(this.beginX=t.clientX,this.beginY=t.clientY)}getDragDelta(t){let i,n;t instanceof TouchEvent?(i=t.touches[0].clientX,n=t.touches[0].clientY):(i=t.clientX,n=t.clientY);let a=parseFloat((i-this.beginX).toFixed(2)),c=parseFloat((n-this.beginY).toFixed(2));return this.beginX=i,this.beginY=n,{dx:a,dy:c}}endDrag(){this.beginX=0,this.beginY=0}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=H({type:o,selectors:[["ast-canvas"]],inputs:{data:[1,"data"],current:[1,"current"],w:[1,"w"],h:[1,"h"]},outputs:{itemChanged:"itemChanged",rootUpdated:"rootUpdated"},standalone:!0,features:[Re,X],decls:37,vars:21,consts:[["svg",""],[3,"ngClass"],[3,"pointerdown","wheel","ngStyle","ngClass"],["id","myFilter"],["in","SourceGraphic","stdDeviation","5"],["id","arrow","viewBox","0 0 2 2","refX","0.35","refY","0.5","fill","green","orient","auto-start-reverse",1,"svgtxt"],["d","M 0 0 L 1 0.5 L 0 1 z"],["id","dot2","viewBox","0 0 10 10","refX","5.5","refY","5","markerWidth","6","markerHeight","6","orient","auto-start-reverse",1,"svgtxt"],["cx","5","cy","5","r","1","fill","green"],[1,"mini-map","el9"],[1,"mininode-dragger",3,"title","ngStyle"],[1,"rightbar"],[1,"right-btn",3,"pointerdown"],[1,"icon"],[1,"right-btn",3,"click"],[1,"flow-permanent","glass"],[1,"topfilters"],[1,"bottomright","glass"],["fobj-tree","",3,"root","w","h","data","current"],["line-svg","",3,"currentChanged","parent","data","current"],["circle-svg","",3,"currentChanged","data","current"],["fake-link","",3,"onLink","data","current","selected","w","h","changeId"],["real-link","",3,"onLink","data","current","selected","w","h","changeId"],["circle-tree","",3,"data","current"],["card-tree","",3,"data","current"],["branch-tree","",3,"data","current"],["branch-tree","",3,"currentChanged","data","current"],["circle-tree","",3,"currentChanged","data","current"],["card-tree","",3,"currentChanged","data","current"],["fobj-tree","",3,"currentChanged","root","w","h","data","current"],[1,"mininode-dragger",3,"click","title","ngStyle"],[3,"label"],[3,"w","position","h","label","addLabel"],[3,"max-height","overflow-y"],[1,"drag",3,"draggable"],[1,"drag",3,"dragstart","draggable"],[1,"very-small-icon"],[4,"ngIf"],[3,"onClone","onDelete","onAdd","onClose","w","position","h","label","addLabel"],[3,"data","level","selecteds",4,"ngFor","ngForOf"],[3,"data","level","selecteds"],[1,"fab","glass",3,"active"],[1,"fab","glass",3,"click"],[1,"fab-text"],[1,"padded","form"],["for","startx"],["type","range","id","startx","name","startx",3,"ngModelChange","ngModel","min","max","title"],["for","starty"],["type","range","id","starty","name","starty",3,"ngModelChange","ngModel","min","max","title"],["for","offW"],["type","range","id","offW","name","offW",3,"ngModelChange","ngModel","min","max","title"],["for","offH"],["type","range","id","offH","name","offH",3,"ngModelChange","ngModel","min","max","title"],[3,"click"],[1,"pan-container","form"],[1,"pan-button","up",3,"mousedown","mouseup","title"],[1,"pan-button","left",3,"mousedown","mouseup","title"],[1,"pan-button","reset",3,"click","title"],[1,"pan-button","right",3,"mousedown","mouseup","title"],[1,"pan-button","down",3,"mousedown","mouseup","title"],[1,"form"],["for","scale"],["type","range","id","scale","name","scale",3,"ngModelChange","ngModel","min","max","title"],["for","tx"],["type","range","id","tx","name","tx",3,"ngModelChange","ngModel","min","max","title"],["for","ty"],["type","range","id","ty","name","ty",3,"ngModelChange","ngModel","min","max","title"]],template:function(i,n){if(i&1){let a=g();p(0,"div",1),G(),p(1,"svg",2,0),v("pointerdown",function(l){return _(a),h(n.onPanDown(l))})("wheel",function(l){return _(a),h(n.onWheel(l))}),p(3,"defs")(4,"filter",3),Z(5,"feGaussianBlur",4),d(),p(6,"marker",5),Z(7,"path",6),d(),p(8,"marker",7),Z(9,"circle",8),d()(),Ce(10)(11),O(12,K8,6,3,":svg:g"),d(),Xi(),p(13,"div",9),T(14,B8,3,12,"div",10,b),d(),p(16,"div",11)(17,"div",12),v("pointerdown",function(l){return _(a),h(n.togglePannable(l))}),p(18,"span",13),x(19,"pan_tool"),d()(),p(20,"div",14),v("click",function(){return _(a),h(n.toggleRender())}),p(21,"span",13),x(22,"settings"),d(),x(23),d(),p(24,"div",14),v("click",function(){return _(a),h(n.togglePermanentC0ntextMenu())}),p(25,"span",13),x(26,"menu"),d()(),p(27,"div",14),v("click",function(){return _(a),h(n.toggleEditPreview())}),O(28,$8,2,0,"span",13)(29,L8,2,0,"span",13),d(),p(30,"div",14),v("click",function(){return _(a),h(n.toggleBoxItems())}),O(31,W8,2,0,"span",13)(32,A8,2,0,"span",13),d()(),O(33,NN,11,6,"div",15),p(34,"div",16),O(35,qN,2,0),d(),O(36,jN,52,36,"div",17),d()}if(i&2){j("max-width",n.w(),"px")("max-height",n.h(),"px"),w("ngClass",n.canPan()?"pannable-container":"scrollable-container"),m(),w("ngStyle",n.panNonPanStyle())("ngClass",n.canPan()?"pannable-svg":"non-pannable-svg"),P("viewBox",n.getViewBox()),m(9);let a=ge(n.current());m();let c=ge(n.filtered());m(),N(c?12:-1),m(2),E(n.minis()),m(3),S("disasbled",!n.canPan()),m(6),V(" ",n.renderType," "),m(5),N(n.isPreview()?28:29),m(3),N(n.isBoxItems()?31:32),m(2),N(n.permanentContextMenu()&&a?33:-1),m(),j("width",n.w()/2,"px"),m(),N(n.filters().length?35:-1),m(),N(n.isBoxItems()?36:-1)}},dependencies:[J,Ri,yt,Di,Li,ee,le,Dr,ce,pe,Ir,zs,js,Ns,Rs,qs,Us,Xs,Hs,Zs,Js,sn],styles:[".pannable-container[_ngcontent-%COMP%]{overflow:hidden;background-color:transparent}.pannable-svg[_ngcontent-%COMP%]{overflow:hidden;transition:all .5s linear}.non-pannable-svg[_ngcontent-%COMP%]{overflow:auto}.scrollable-container[_ngcontent-%COMP%]{overflow:auto;width:100%;height:100%}.right-btn[_ngcontent-%COMP%]{margin:0rem;padding:0rem;height:40px;width:40px;display:flex;flex-direction:column;font-size:7px;border-radius:50%;border-style:solid;border-width:2px;border-color:var(--accent-color);color:var(--text-color);transition:all .3s ease-in-out;outline:none;justify-content:center;align-items:center}.right-btn[_ngcontent-%COMP%]:focus{outline:none}.right-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.disasbled[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.2}.flow-permanent[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:220px;height:270px;right:10px}.topfilters[_ngcontent-%COMP%]{position:absolute;top:37px;left:15px;gap:20px;height:50px;display:flex;overflow:hidden;flex-direction:row}.fab-text[_ngcontent-%COMP%]{font-size:11px;max-width:40px;overflow:hidden;word-wrap:break-word}.pointer[_ngcontent-%COMP%]{cursor:pointer}.rightbar[_ngcontent-%COMP%]{right:20px;position:absolute}.bottomright[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:220px;height:270px;right:10px}.pan-container[_ngcontent-%COMP%]{display:grid;padding:2px;width:120px;grid-template-rows:repeat(3,1fr);grid-template-columns:repeat(3,1fr);justify-items:center}.pan-button.up[_ngcontent-%COMP%]{grid-row:1;grid-column:2}.pan-button.down[_ngcontent-%COMP%]{grid-row:3;grid-column:2}.pan-button.left[_ngcontent-%COMP%]{grid-row:2;grid-column:1}.pan-button.right[_ngcontent-%COMP%]{grid-row:2;grid-column:3}.pan-button.reset[_ngcontent-%COMP%]{grid-row:2;grid-column:2}.drag[_ngcontent-%COMP%]{display:grid;column-gap:3px;grid-template-columns:14px auto max-content;box-shadow:var(--glass-shadow);outline-style:none;font-size:12px;width:92%;margin-left:6px;margin-bottom:2px;cursor:pointer}.drag[_ngcontent-%COMP%]:hover{background-color:var(--focus-color)}.mininode-dragger[_ngcontent-%COMP%]{cursor:pointer;display:flex;position:absolute;border-style:none;flex-direction:column;align-items:center;justify-content:center;transition:all .8s linear}.mini-map[_ngcontent-%COMP%]{position:absolute;top:30px;width:140px;height:140px;right:60px}"]});let r=o;return r})();export{Ke as a,He as b,Oe as c,qe as d,ut as e,Ze as f,rt as g,Le as h,Ar as i,rn as j,Or as k,fH as l,za as m,K3e as n,P9e as o,yWe as p,MOe as q};
